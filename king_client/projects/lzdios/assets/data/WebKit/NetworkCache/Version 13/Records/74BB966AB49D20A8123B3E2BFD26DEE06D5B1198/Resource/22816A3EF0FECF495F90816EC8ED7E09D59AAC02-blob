!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Eventics=e()}}(function(){return function a(o,s,c){function l(n,e){if(!s[n]){if(!o[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(d)return d(n,!0);var i=new Error("Cannot find module '"+n+"'");throw i.code="MODULE_NOT_FOUND",i}var r=s[n]={exports:{}};o[n][0].call(r.exports,function(e){return l(o[n][1][e]||e)},r,r.exports,a,o,s,c)}return s[n].exports}for(var d="function"==typeof require&&require,e=0;e<c.length;e++)l(c[e]);return l}({1:[function(e,n,t){n.exports=function(n){var r,a=["ironBeastEventicsProvider"],o=[],s={},c={},t=this,l=[],e=(n=n||1,"undefined"!=typeof jQuery?jQuery:{}),i=void 0!==window.angular?window.angular:{};function d(e){for(var n=o.length,t=0;t<n;t++)e(o[t])}function u(e){t.extend(c||{},e)}return t.extend=e.extend||i.extend||function(){for(var e,n,t=arguments.length,i=1,r=arguments[0]||{};i<t;i++)if(null!=(e=arguments[i]))for(n in e)void 0!==e[n]&&(r[n]=e[n]);return r},t.trackEvent=function(n,t,i){n&&(i=extend(i||{},c),r?d(function(e){e.trackEvent(n,t,i)}):l.push({eName:n,label:t,data:i,eType:"event"}))},t.trackTiming=function(n,t,i){n&&t&&(i=extend(i||{},c),r?d(function(e){e.trackTiming(n,t,i)}):l.push({eName:n,time:t,data:i,eType:"timing"}))},{setProvidersHandlers:function(e){if(e){"string"==typeof e&&(e=[e]),a=[];for(var n=e.length,t=0;t<n;t++)a.push(e[t])}},setProvidersConfig:function(e){s=e},init:function(e){r||(e&&u(e),function(){o=[];for(var e=a.length,n=0;n<e;n++){var t=a[n];if("function"==typeof window[t]){var i=new window[t];i.init(s),o.push(i)}}}(),r=!0,function(){for(var e in l){var n=l[e]||{};"event"===n.eType?t.trackEvent(n.eName,n.label,n.data):"timing"===n.eType&&t.trackTiming(n.eName,n.time,n.data)}l=[]}())},updateBaseData:u,createEventic:function(e){return(e=e||{}).userChance=n,new f(t,e)},updateUserChance:function(e){n=e}}};var f=e("./eventicsHelper.js");window.ironBeastEventicsProvider=e("./providers/ironBeastEventicsProvider.js"),window.QAEventicsProvider=e("./providers/QAEventicsProvider.js"),window.KuduEventicsProvider=e("./providers/KuduEventicsProvider.js")},{"./eventicsHelper.js":2,"./providers/KuduEventicsProvider.js":3,"./providers/QAEventicsProvider.js":4,"./providers/ironBeastEventicsProvider.js":5}],2:[function(e,n,t){n.exports=function(e,n){var t=void 0!==(n=n||{}).productChance?n.productChance:1,i=void 0!==n.userChance?n.userChance:1,s=e||{},c=n.baseData||{},l={},d=s.extend,r={};function u(e){return e&&e.name&&e.id}return r.trackEvent=function(e,n,t){if(!u(e))return!1;var i=e.name,r=e.id;t||(t={}),t.eventId=r,t=d({},c,t||{}),s.trackEvent(i,n,t)},r.trackTimingStart=function(e,n){if(!u(e))return!1;var t=e.name;return n=n||Date.now(),l[t]=n,!0},r.trackTimingStop=function(e,n){if(!u(e))return!1;var t,i,r=e.name;if(n||(n={}),n.eventId=e.id,n&&n.timeStamp?(i=n.timeStamp,delete n.timeStamp):i=Date.now(),n&&n.eNameStart&&n.eNameStart.name?(t=l[n.eNameStart.name],delete n.eNameStart):l[r]&&(t=l[r],l[r]=null),t){var a=i-t,o=d({},c);return n=d(o,n||{}),s.trackTiming(r,a,n),!0}},r.updateBaseData=function(e){for(var n in e)c[n]=e[n];return!0},r.resetBaseData=function(e){for(var n=0;n<e.length;n++)r.unsetParamFromBaseData(e[n])},r.unsetParamFromBaseData=function(e){c.hasOwnProperty(e)&&delete c[e]},r.incrementSessionNumber=function(){return c.sessionDepth?c.sessionDepth++:c.sessionDepth=1,!0},0<i&&i<=t?r:function(){var e={};for(var n in r)"function"==typeof r[n]&&(e[n]=function(){});return e}()}},{}],3:[function(e,n,t){n.exports=function(){var t,i,r="https://logs.supersonic.com/logs",a={table:"supersonic.adunitanalytics.ad_unit_events"},o=["generalmessage","emptyowreason","landingid"];function s(e,n){switch(e){case"landingid":n=parseInt(n);break;case"generalmessage":case"emptyowreason":n=t=void 0===(t=n)?"undefined":null===t?"null":t.toString()}var t;return n}function c(e){if(e){e=function(e){if(!e)return e;for(var n=Object.keys(e),t=n.length;t--;){var i=n[t],r=i.toLowerCase(),a=e[i];-1!==o.indexOf(r)&&(a=s(r,a)),e[r]=a,i!==r&&delete e[i]}return e}(e);var n={table:a.table,data:e};i(n)}}function n(e){var n=new XMLHttpRequest;n.open("POST",t,!0),n.onerror=function(){e&&0<=e.retry&&e.retry<2&&(e.retry++,i(e))},n.send(JSON.stringify(e))}function l(n){var t;try{t=btoa(JSON.stringify(n))}catch(e){n.data.applicationUserId="badName",n.data.userId="badName",n.data.eventName="errorEvent",t=btoa(JSON.stringify(n))}var e=r+"?data="+t,i=new XMLHttpRequest;i.open("GET",e,!0),i.send()}return{init:function(e){i=e&&"POST"===e.method?(t="https://postlog.supersonic.com/logs",n):(t=r,l)},trackEvent:function(e,n,t){if(e){if(n&&"object"==typeof n){var i=Object.keys(n)[0];i&&(t[i]=n[i])}t.eventName=e,c(t)}},trackTiming:function(e,n,t){e&&n&&(t.eventName=e,t.timingValue=n,c(t))}}}},{}],4:[function(e,n,t){n.exports=function(){var i,r={};function a(e){if(e){r.data=e;var n=function e(n,t){var i=[];for(var r in n)if(n.hasOwnProperty(r)){var a=t?t+"["+r+"]":r,o=n[r];i.push("object"==typeof o?e(o,a):encodeURIComponent(a)+"="+encodeURIComponent(o))}return i.join("&")}(r);delete r.data,(t=i+"?"+n)&&((new Image).src=t)}var t}return{init:function(e){i="http://qa.eventics.qa"},trackEvent:function(e,n,t){if(e){if(n&&"object"==typeof n){var i=Object.keys(n)[0];i&&(t[i]=n[i])}t.eventName=e,a(t)}},trackTiming:function(e,n,t){e&&n&&(t.eventName=e,t.timingValue=n,a(t))}}}},{}],5:[function(e,n,t){n.exports=function(){var i,r={table:"supersonic.adunitanalytics.ad_unit_events"};function a(e){if(e){var n;r.data=e;try{n=btoa(JSON.stringify(r))}catch(e){r.data.applicationUserId="badName",r.data.userId="badName",r.data.eventName="errorEvent",n=btoa(JSON.stringify(r))}delete r.data,(t=i+"?data="+n)&&((new Image).src=t)}var t}return{init:function(e){i=e.isSecured?"https://secure.ironbeast.io":"http://supersonic.ironbeast.io"},trackEvent:function(e,n,t){if(e){if(n&&"object"==typeof n){var i=Object.keys(n)[0];i&&(t[i]=n[i])}t.eventName=e,a(t)}},trackTiming:function(e,n,t){e&&n&&(t.eventName=e,t.timingValue=n,a(t))}}}},{}]},{},[1])(1)}),function a(o,s,c){function l(n,e){if(!s[n]){if(!o[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(d)return d(n,!0);var i=new Error("Cannot find module '"+n+"'");throw i.code="MODULE_NOT_FOUND",i}var r=s[n]={exports:{}};o[n][0].call(r.exports,function(e){return l(o[n][1][e]||e)},r,r.exports,a,o,s,c)}return s[n].exports}for(var d="function"==typeof require&&require,e=0;e<c.length;e++)l(c[e]);return l}({1:[function(e,n,t){n.exports=function(e){var n={v:1,controllerId:1,applicationKey:1,applicationUserId:0,debug:0,language:0,disableCache:0,applicationUserGender:0,applicationUserAgeGroup:0,demoCampaigns:0,appOrientation:1,mobileCarrier:0,connectionType:1,iphoneAppOnIpadDevice:0,deviceOs:1,SDKVersion:1,deviceOSVersion:1,deviceOEM:0,deviceVolume:0,immersiveMode:0,"deviceIds[IFA]":0,"deviceIds[IDFV]":0,"deviceIds[SERIAL]":0,"deviceIds[AndroidID]":0,"deviceIds[IMEI]":0,"deviceIds[AID]":0,deviceWidthDP:0,deviceHeightDP:0,deviceLanguage:0,deviceModel:0,diskFreeSize:1,country:0,campaignId:0,customParams:0,isLimitAdTrackingEnabled:0,SDKPluginType:0,bundleId:0,jb:0,gpi:0,allowArbitraryLoads:0,allowArbitraryLoadsInWebContent:0,mcc:0,mnc:0,appVersion:0,batteryLevel:0,maxVideoLength:0,itemName:0,itemCount:0,timestamp:0,localTime:0,timezoneOffset:0,itemSignature:0,showDeliveryLimitationsLog:0,minimumOfferCommission:0,minimumOfferCommissionSignature:0,applicationUserCreationDate:0,applicationUserCreationDateSignature:0,mraid:0,numOfCampaigns:0,deviceScreenScale:0,androidIsVersion:0,cdnCn:0,sdkAbName:0,segmentId:0,segmentName:0,consent:0,moatSupported:0};return{init:function(){"android"===e.getConfig().mobileSDKSettings.deviceOs&&(n.deviceApiLevel=0)},getCommonRequiredData:function(){return n}}}},{}],2:[function(e,n,t){n.exports=function(c,l,d){var u=l.appInfo.orientation.portrait,f=l.appInfo.orientation.landscape,g={android:function(e,n,t){return e.ext.forceOrientation.toLowerCase()},ios:function(e,n,t){return i=e,r=n.getABTestConfiguration(i.productType,i.ext.landingId).ignoreAppOrientationInForceCampaigns||!1,c.log("shouldIgnoreAppOrientationInForcedCampaign: "+Boolean(r),c.LogLevels.verbose),!r&&d.getOrientation()&&d.isAppOrientation(e.ext.forceOrientation.toLowerCase())?(c.log("forced campaign | application is locked on the same orientation - sending  default: "+t,c.LogLevels.verbose),t):e.ext.forceOrientation.toLowerCase();var i,r}};function p(e){return e&&e.controllerConfig&&("499b4845"===e.controllerConfig.applicationKey||"406ff65d"===e.controllerConfig.applicationKey)}return{getAdDisplayOrientation:function(e,n,t){if(t){var i,r,a,o="undefined",s=l.defaultOrientation[t.productType];return p(e)&&t.settings&&(t.settings.orientation=u),r=e,(a=t).ext&&a.ext.forceOrientation&&(!p(r)||p(r)&&a.ext.forceOrientation.toLowerCase()===f)?o=s=g[e.mobileSDKSettings.deviceOs](t,n,s):s=(i=t).settings&&i.settings.orientation?t.settings.orientation:d.getOrientation(),s.toLowerCase()===l.appInfo.orientation.none&&(s=l.defaultOrientation[t.productType]),c.log("adOrientation | forceByCampaign:"+o+" , forceBySession:"+t.settings.orientation+" ,forceByNative:"+d.getOrientation()+" , ChosenOrientation:"+s,c.LogLevels.info),s.toLowerCase()}}}}},{}],3:[function(e,n,t){n.exports=function(o,s,r){var t=e("../components/Constants.js"),c="MRAID",l="VAST",d="EXTERNAL",u="INTERNAL",f="PLAYABLE",g="HYBRID",p="IMAGE_INTERSTITIAL",v="STATIC_BANNER",m="OTHER",i={};function a(e){if(e)return e.id||S(e,b(e),h(e)),e.id&&e.id.toString()}function b(e){if(e){var n=e.crid||e.bannerId||e.bannerID;return n&&n.toString()}}function h(e){if(e){var n=e.creativeId||"0";return n&&n.toString()}}function S(e,n,t){e.id=n+"_"+t}function y(e,n){if(!e)return"";var t=C(e,n);return i[t]||i.other}i[c]="MR",i[l]="VA",i[d]="EX",i[u]="AT",i[f]="PL",i[g]="HY",i[p]="IM",i[v]="SB",i[m]="OT";var C=function(e,n){var t,i,r=e&&e.ext,a="";return r?a=(i=r)&&i.type&&"imageInterstitial"===i.type?p:o.VastUtils.isVastCampaign(e)?l:s.HybridService.isHybridCampaign(e,n)?g:A(r)?f:D(r)?c:I(r)?d:w(r)?u:(t=r)&&t.type&&"staticBanner"===t.type?v:m:a};function A(e){return e&&e.type&&"playableAd"===e.type}function D(e){return e&&e.type&&"MRAID"===e.type}function I(e){return e&&e.videoData&&e.videoData.videoType&&"ssa-external-video-player"===e.videoData.videoType}function w(e){return e&&e.videoData&&e.videoData.videoType&&"ssa-internal-video-player"===e.videoData.videoType}function L(e){var n={};return n.id=a(e),n.title="",n.credits=e.credits,n.staticContent=o.AdAssets.extractStaticFiles(e,P(e)),n.lastUpdateTime=e.lastUpdateTime,n.inventoryIndex=e.inventoryIndex,n.isCacheable=e.isCacheable=0<n.staticContent.length,n}function P(e){var n=e.ext;return A(n)&&n.videoData&&n.videoData.videoSource&&n.videoData.videoSource.html&&-1<n.videoData.videoSource.html.indexOf(o.AdAssets.getPlayableCacheFlag())}function T(e){var n=s.getApiData({deviceOs:1}).deviceOs;e.standaloneView=n===t.deviceOs.ios,e.translucentView=n===t.deviceOs.android}function O(e,n){var t={};return n&&n.ext&&n.ext.opportunityID&&(t.opportunityId=n.ext.opportunityID),e&&e.requestID&&(t.requestId=e.requestID),t}return{getAdId:a,getBannerId:b,getCreativeId:h,getAdType:y,formatParamsToAdId:function(e){if(e){if(!e.id){var n=b(e);n&&S(e,n,t.legacyCreativeId)}return e}},formatAdsForPrecache:function(e){var i=[];return r.each(e,function(e,n){var t=L(n);t.isCacheable&&i.push(t)}),i},isCacheableAd:function(e){return e&&e.isCacheable},getStoreAppId:function(e){if(e.ext.clickTags.storeAppId)return e.ext.clickTags.storeAppId;var n,t="",i=e.ext.clickTags.clickURL;return i&&((n=i.match(/id\d+/g))&&(n=(n=(n=n[n.length-1]).match(/\d+/g))[0]),t=n)&&(e.ext.clickTags.storeAppId=t),t},formatVastAdForPrecache:function(e,n){var t;return(t=L(e)).preProcessing=n,t.isCacheable=e.isCacheable=!0,t},setViewType:function(e,n,t){var i;n&&n.ext&&(i=n.ext)&&i.layoutData&&(i.layoutData.portrait&&i.layoutData.portrait.frameUrl&&i.layoutData.portrait.closeButtonUrl||i.layoutData.landscape&&i.layoutData.landscape.frameUrl&&i.layoutData.landscape.closeButtonUrl)&&T(e),t&&(e.viewType=t)},getViewType:function(e){return e&&e.settings?e.settings.viewType:null},getRequestOppParams:O,updateEventWithAdParams:function(e,n,t){return n&&(r.extend(t,O(e,n)),t.bannerId=b(n),t.creativeId=h(n),t.campaignType=y(n,e)),t},isPlayableCampaign:A,isPlayablePrecachedAd:P,isInternalCampaign:w,isMRAIDCampaign:D,isExternalCampaign:I,isCampaignShouldStartMuted:function(e,n){return!(!e||!e[t.sspProductNames[n]]||!0!==e[t.sspProductNames[n]].startVideoOnMute)},extendAdObjectWithConfig:function(e,n,t,i){n.settings=r.extend(!0,n.settings,i),n.ext&&n.ext.forceOrientation&&(n.settings.orientation=n.ext.forceOrientation.toLowerCase()),r.extend(!0,n,t,{url:e})},extendSettingsWithStandaloneViewSupport:T}}},{"../components/Constants.js":7}],4:[function(n,e,t){e.exports=function(t,r,e){var a=n("./NativeLifeCycleEventsConstants.js"),o=r.jQuery(),s={};function c(e){r.log("AndroidLifeCycleEventHandlers | handleOnDestroy:",r.LogLevels.verbose);var n={};e&&(n.eventParams=e),t.PubSub.publish(a.serviceCallback+"."+a.AndroidEvents.onDestroy,[n])}return{publishEvent:function(e,n){var t,i;r.log("AndroidLifeCycleEventHandlers | _handleEvent:",r.LogLevels.verbose),s[a.AndroidEvents.onDestroy]=c,t=e,i=Object.keys(s),r.log("AndroidLifeCycleEventHandlers | _isEventSupported: "+t+" supportedEvents: "+i,r.LogLevels.verbose),t&&-1<o.inArray(t,i)&&s[e](n)}}}},{"./NativeLifeCycleEventsConstants.js":24}],5:[function(e,n,t){n.exports=function(n){var r={},t=!1;function a(e,n){var t=r[e],i=[];return t&&t[n]?i=t[n]:t[n]=i,i}return{init:function(e){t||(r[n.RV]={},r[n.IS]={},r[n.BN]={},t=!0)},addToBlacklistedCampaigns:function(e,n,t){if(e&&n&&t){var i=a(e,n);i&&-1===i.indexOf(t)&&i.push(t)}},getBlacklistedCampaigns:function(e,n){var t=[];return e&&n&&(t=a(e,n)),t},isEmpty:function(e,n){var t=a(e,n);return!t||0===t.length}}}},{}],6:[function(e,n,t){n.exports=function(l,u){var t,f,d="NativeCallback",i={deviceOs:1,"deviceIds[IFA]":0,"deviceIds[AID]":0},g=1500,p=l.Utils;function n(e){var n,t,i,r=new jQuery.Deferred,a="checkInstalledAppsSuccess",o="checkInstalledAppsFailed",s={appIds:e,requestId:Date.now().toString()},c=function(){l.PubSub.unsubscribe(n),l.PubSub.unsubscribe(t)};return n=l.PubSub.subscribe(d+"."+a,function(e){e.requestId===s.requestId&&(clearTimeout(i),c(),u.log("successfully check apps installed "+JSON.stringify(e.result),u.LogLevels.info),r.resolve(e.result))}),t=l.PubSub.subscribe(d+"."+o,function(e){clearTimeout(i),c(),u.log("failed to check apps installed."+JSON.stringify(e),u.LogLevels.info),r.reject()}),i=setTimeout(function(){c(),r.reject("SDK check apps installed timeout request")},g),u.callSDKFunction("checkInstalledApps",s,a,o),r.promise()}function a(e){var a={deviceId:"ios"===(t=u.getApiData(i)).deviceOs?t["deviceIds[IFA]"]:t["deviceIds[AID]"],os:t.deviceOs,campaignIds:{}},n=f.urlPaths&&f.urlPaths.campaignsStatus;n?(jQuery.each(e,function(e,n){var t,i,r;a.campaignIds[n.campaignId]=(t=n.isInstalled,r=t?(i=50,100):(i=0,50),Math.floor(Math.random()*(r-i))+i)}),jQuery.ajax({url:n,data:a,type:"GET",dataType:"jsonp",success:function(e){u.log("Success update campaigns status to server",u.LogLevels.verbose)},error:function(e,n){u.log("Success update campaigns status to server: response:"+e+".status: "+n,u.LogLevels.verbose)}})):u.log("No url in settings to update server on campaigns status",u.LogLevels.verbose)}function v(e,n){var t=!0;return e||(u.log("filter apps installed flag is false",u.LogLevels.verbose),t=!1),n&&0!==n.length||(u.log("get 0 campaigns to filter",u.LogLevels.verbose),t=!1),u.isLegacy({ios:"5.14",android:"5.16"})&&(u.log("NewController: Old controller version. filter campaigns by app installed is not supported in this version of SDK.",u.LogLevels.verbose),t=!1),t}function m(t,i,e){var r=new jQuery.Deferred;return jQuery.isEmptyObject(i)?r.resolve():n(e).then(function(e){var o,n;return jQuery.each(e,function(e,n){var t=i[e];t&&(n.bannerIds=t)}),o=t,n=e,jQuery.each(n,function(e,n){if(n.isInstalled){for(var t=[],i=0;i<o.length;i++){var r=u.AdUtils.getAdId(o[i]);n.bannerIds&&-1===n.bannerIds.indexOf(r)&&t.push(o[i])}for(var a=o.length=0;a<t.length;a++)o.push(t[a])}}),u.log("Campaigns after filtering: "+JSON.stringify(o),u.LogLevels.verbose),t=o,r.resolve(),e}).then(a).fail(function(e){u.log("failed filter campaigns by app installed. "+e,u.LogLevels.verbose),r.resolve()}),r.promise()}function r(e,n,t){if(t=t||[],!v((f=n).filterAppsInstalled,e))return p.returnResolvedPromise();for(var i={},r=e.length,a=[],o=0;o<r;o++){var s=e[o],c=u.AdUtils.getAdId(s),l=s&&s.ext,d=l&&l.appData;l&&d&&d.appId&&(0===t.length||-1===t.indexOf(l.type))&&(i[d.appId]||(i[d.appId]=[]),i[d.appId].push(c),-1===a.indexOf(d.appId)&&a.push(d.appId))}return m(e,i,a)}function o(e,n){if(f=n,!v(!0,e))return p.returnResolvedPromise();for(var t={},i=e.length,r=[],a=0;a<i;a++){var o=e[a],s=u.AdUtils.getAdId(o),c=o.appData;c&&c.filterIfInstalled&&c.appId&&(t[c.appId]||(t[c.appId]=[]),t[c.appId].push(s),-1===r.indexOf(c.appId)&&r.push(c.appId))}return m(e,t,r)}return{factory:function(e){return t=u.getApiData(i),"RewardedVideo"===e||"BrandConnect"===e||"Interstitial"===e||"Banner"===e?{filterByAppInstalled:r}:"OfferWall"===e?{filterByAppInstalled:o}:"Controller"===e?{checkIfAppInstallOnDevice:n}:void 0}}}},{}],7:[function(e,n,t){var i=e("../constants/featureCompatibilityMap");n.exports={CB:"NativeCallback",BC:"BrandConnect",RV:"RewardedVideo",OW:"OfferWall",IS:"Interstitial",BN:"Banner",RIS:"RIS",taskManager:"TaskManagerDS",libs:"libs",fakeOWLoader:"fakeOWLoader",timeunit:6e4,closeAndBackDisabledTimer:1e4,closeAndBackDisabledTimerOW:8e3,vastResponseTimeout:8e3,vastMinimumResponseTimeout:500,legacyCreativeId:0,domainUrls:{local:"local.ssacdn.com",prod:"www.supersonicads.com"},environment:{develop:"dev",production:"prod",stage:"stage"},errors:{missing:"Missing required parameter: ",invalid:"Invalid parameter: ",unknown:"Unknown parameter: ",appInfo:"Failed to retrieve application info",device:"Failed to retrieve device status",filemap:"Failed to retrieve file map",showAdFailedReasons:{preloadNoAd:"No ad on preload function",showNoAd:"No ad on show function",taskManagerPreload:"taskManager failed to preload",taskManagerEngage:"taskManager failed to engage"}},noMoreOffersReason:{refreshFeedAfterClosingAd:"Refresh Feed after closing ad",noMoreOffersToShowInFeed:"Finish view all campaigns (engageEnd)"},DebugLevels:{0:"NONE",1:"ERROR",2:"INFO",3:"VERBOSE"},videoStates:{none:0,play:1,stop:2},confirmCloseMsg:{close:"Are you sure you want to quit the offer?",yes:"OK",no:"Cancel"},confirmCloseMsgMap:{0:"during",1:"after"},protocol:{http:"http:",https:"https:",file:"file:"},styleAccordingToProtocol:{secured:"secured",unsecured:"unsecured"},labels:{noInternet:"No internet connection. Please connect and try again.",noOffers:"Sorry, There are no offers at the moment"},closeButtonStates:{close:"close",confirm:"confirm",back:"back",confirmNextFrame:"confirmNextFrame",nextFrame:"nextFrame",ignore:"ignore"},openUrlMethods:{storeKit:"storeKit",external_browser:"external_browser",store:"store",webview:"webview"},deviceOs:{android:"android",ios:"ios"},deviceOEM:{amazon:"amazon"},nativeInterfaceMethod:{displayWebView:"displayWebView"},nativeCallBacks:{hideSuccess:"onHideSuccess",hideFailed:"onHideFailed"},offerWallSetting:{immersive:"immersive",OLXD:"OLXD"},appInfo:{orientation:{landscape:"landscape",portrait:"portrait",none:"none"}},sspProductNames:{RewardedVideo:"rewardedVideo",Interstitial:"interstitial",OfferWall:"offerWall",Banner:"banner"},demandSourceType:{demandSource:"demandSource",instance:"instance"},demandSourceStates:{notInitiated:0,initFail:1,initiated:2,available:3,notAvailable:4,exhausted:5,cappedPerSession:6,initPending:7,loadPending:8},templateStyle:{template4:{minDialogBtnWidth:187,baseDialogBtnWidth:187,maxDialogBtnWidth:187,maxDialogBtnTextWidth:165},defaultTemplate:{minDialogBtnWidth:75,baseDialogBtnWidth:100,maxDialogBtnWidth:133,maxDialogBtnTextWidth:115}},viewsStates:{hybrid:2,normal:0},hybridViews:[{viewType:"controller",screenRatio:.999},{viewType:"store",screenRatio:.001}],baseDataKeys:["bannerId","creativeId","campaignType","opportunityId","requestId"],iphoneXDeviceModels:["iPhone10,3","iPhone10,6","iPhone11,6","iPhone11,4","iPhone11,2","iPhone11,8"],iphoneXDeviceResolution:{type1:{width:375,height:812},type2:{width:414,height:896}},requiredDeviceInfo:["appOrientation","connectionType","deviceOs","SDKVersion","deviceOSVersion","deviceModel","diskFreeSize"],requiredAppInfo:["applicationKey","applicationUserId"],optionalAppInfo:["campaignId","showDeliveryLimitationsLog","numOfCampaigns","disableCache","disableSession","country","language","itemName","itemCount","itemSignature","timestamp","demoCampaigns","mraid","admin","page","pageSize","landingId","maxVideoLength","minimumOfferCommission","minimumOfferCommissionSignature","useClientSideCallbacks","applicationUserGender","applicationUserAgeGroup","applicationUserCreationDate","applicationUserCreationDateSignature","placementId","SDKPluginType"],abTests:{CnCcCdn:"CC2",CnNonCcCdn:"NCC2",CnUser:"CN",NonCnUser:"NCN",WithoutCC:"WOCC"},deviceLimitations:["iPod5,1","iPad2,1","iPad4,8","iPad3,5","iPad3,6","iPad4,5","iPhone4,1","iPhone7,1","iPad4,4","iPad4,2","iPad2,2","iPad2,5","iPad4,1","iPad3,4","iPad3,3","iPad4,7","iPad3,1","iPad2,4"],applicationsLimitations:["49726195"],moat:{disabled:"off"},MOAT_PC:"ironsourceinappvideo555077879249",sValueApps:["com.xinmei365.font","com.fw.appshare","com.wifiup","com.qihoo.security.lite","com.qihoo.security","com.antivirus.security.boost","com.security.antivirus.free.cleaner","com.security.antivirus.profree","com.naver.vapp","com.ztapps.lockermaster","com.newborntown.android.solo.security.free","com.newborntown.android.solocleaner","com.diy.applock","com.newborntown.android.solo.batteryapp","home.solo.launcher.free.plugin","home.solo.launcher.free","home.solo.plugin.qrcode","com.solo.theme.rounder","com.solo.theme.flui.free","com.solo.theme.flui","com.solo.theme.colorfulcircle","home.solo.plugin.calculator","home.solo.plugin.weather","com.solo.theme.colorfulflat","com.qisiemoji.inputmethod","com.emoji.coolkeyboard","com.ikeyboard.theme.galaxy","com.ikeyboard.emoji.twttier","com.ikeyboard.theme.panda","com.ikeyboard.theme.panda_night","com.ztapps.lockermaster","com.diy.applock","com.qisiemoji.inputmethod","com.emoji.coolkeyboard","com.whosthat.callerid","com.dianxinos.flashlight.duplay","com.dianxinos.optimizer.duplay","com.dianxinos.dxbs"],testAppBundleIds:["com.supersonic.mediation.test","com.ironsrcmobile.UltraApp","com.ironsrcmobile.UltraApp-enterprise","com.supersonic.automationapp","com.ironsrcmobile.Bridge","com.ironsource.othermediationtester"],defaultOrientation:{BrandConnect:"application",RewardedVideo:"application",Interstitial:"application",OfferWall:"application",Banner:"application",general:"device",undefined:"application"},vastRequestPlaceholders:{moatEnabled:"{MT_ENABLED}",requestId:"{REQ_ID}",opportunityId:"{OPP_ID}"},featureCompatibilityMap:i,blockedProductsPerApiLevel:{BrandConnect:{android:/^10/,ios:/^7/},RewardedVideo:{android:/^10/,ios:/^7/},OfferWall:{android:/^10/,ios:/^7/},Interstitial:{android:/^10/,ios:/^7/},Banner:{android:/^10/,ios:/^7|8|9/}},storeSearchKeys:{ios:["itunes.apple.com"],android:["market://","play.google.com"]},gatewayDestinationMap:{RV:{production:"//rv-gateway.supersonicads.com/gateway/sdk/request",staging:"//staging-rv-gateway.sonic-us.supersonicads.com/gateway/sdk/request"},IS:{production:"//is-gateway.supersonicads.com/gateway/sdk/request/",staging:"//staging-is-gateway.sonic-us.supersonicads.com/gateway/sdk/request/"},OW:{production:"//ow-gateway.supersonicads.com/gateway/offerwall/request",staging:"//staging-ow-gateway.sonic-us.supersonicads.com/gateway/offerwall/request"},BN:{production:"//banner-gateway.supersonicads.com/gateway/sdk/request",staging:"//staging-banner-gateway.sonic-us.supersonicads.com/gateway/sdk/admin/request"}},programmaticDestinationMap:{RewardedVideo:{production:"//rv-gateway.supersonicads.com/gateway/sdk/ortb-request",staging:"//staging-rv-gateway.sonic-us.supersonicads.com/gateway/sdk/ortb-request"},Interstitial:{production:"//is-gateway.supersonicads.com/gateway/sdk/ortb-request",staging:"//staging-is-gateway.sonic-us.supersonicads.com/gateway/sdk/ortb-request"}},appConfigPath:"/delivery/mobile/adUnit/getAppConfig.php",appExtConfigPath:"/users/microjob/sdkconfig.json",appExtConfigPathStaging:"/users/microjob/sdkconfig_staging.json",requiredSDKDataKeys:{applicationKey:"applicationKey",applicationUserId:"applicationUserId",appOrientation:"appOrientation",deviceLanguage:"deviceLanguage",bundleId:"bundleId"},HTTPMethods:{GET:"GET",POST:"POST"},adClosedErrorReason:{unexpectedCloseActivityDestroy:"unexpectedClose_ActivityDestroy"},viewTypes:{externalView:"external"},DEFAULT_AMOUNT_OF_INVENTORIES:1}},{"../constants/featureCompatibilityMap":51}],8:[function(e,n,t){n.exports=function(i,r){var t=e("../components/Constants.js");function a(e){var n=e?e.productType:null;return!n||r.isLegacy(r.featureMap.MDS[n])}function o(e,n){return n=n||{},e&&e.demandSourceName&&!r.isLegacy(r.featureMap.MDS[t.RV])&&(n.demandSourceName=e.demandSourceName),n}return{isLegacy:a,extendCallbackParamsWithDemandConfig:o,extendCallbackParamsWithProductConfig:function(e,n){return n=o(e,n),e&&e.productType&&(n.productType=e.productType),n},extendCallbackParamsWithParentProductConfig:function(e,n){if(n=o(e,n),e&&e.productType){var t=r[e.productType];t&&(n.productType=i.Utils.isFunction(t.getProductType)?t.getProductType():e.productType)}return n},shouldReceiveMessage:function(e,n){return!(!e||!n)&&!(!e.productType||!e.demandSourceName)&&n.productType===e.productType&&(a(e)||n.demandSourceName===e.demandSourceName)}}}},{"../components/Constants.js":7}],9:[function(e,n,t){n.exports=function(n){var t=null;return{set:function(e){t=e},get:function(){return t||null},reset:function(){t=null},getDisplayedAdType:function(){return t?t.productType:null},getDisplayedAdDemandName:function(){return t?t.demandSourceName:null},getDisplayedAdSettings:function(){return t?t.settings:null},isDisplayed:function(){return null!==t},isAdDisplayed:function(e){return t&&e&&n.getAdId(t)===n.getAdId(e)}}}},{}],10:[function(e,n,t){n.exports=function(){var a={};return{getABTestConfiguration:function(e,n){var t=a[e]&&a[e].abtest&&a[e].abtest.default,i=a[e]&&a[e].abtest&&a[e].abtest[t]||{},r=a[e]&&a[e].abtest&&a[e].abtest[n]||{};return jQuery.extend(i,r)},setConfig:function(e){a=e||{}},getExtConfig:function(){return a},getGeneralConfig:function(){return a.general},reset:function(){a={}}}}},{}],11:[function(e,n,t){n.exports=function(e,i,n){var r,a=e||"",o=n||6e4,s="Invalid API response",c=function(n){var t=!0;return jQuery.each(i,function(e){t=t&&void 0!==n[e]}),t};return{getInventory:function(e,n,t){r=new jQuery.Deferred;var i=n||a;return jQuery.ajax({url:i,data:e,type:"GET",dataType:t||"jsonp",timeout:o}).then(function(e){e&&e.errorCode&&e.errorMessage?r.reject({errorMessage:e.errorMessage,errorCode:e.errorCode}):c(e)?r.resolve(e):r.reject({errorMessage:s})},function(e,n,t){var i={errorMessage:"Error fetching inventory. Error data: "+n};r.reject(i)}),r.promise()},isValidResponseStructure:c}}},{}],12:[function(e,n,t){n.exports=function(o,s){var c,i={hit:1,miss:2,eventResult:"eventResult",resultReason:"resultReason"};function n(e){function a(e,n){var t;return e&&e.url&&(t={url:function(e,n){if(!e)return"";if(n)for(var t=n.length,i=0;i<t;i++)e=e.replace("{{"+n[i].key+"}}",encodeURIComponent(n[i].value));return e=e.replace(/\{\{[\w\d\s]*\}\}/g,"ok")}(e.url,n),type:e.type}),t}function t(e,n){var t,i,r=c[e];"object"==typeof r&&(0<r.length&&(r=r[0]),(t=a(r,n))&&(i=t,s.firePixel(i),o.log("Callback: "+JSON.stringify(i),o.LogLevels.info)))}return c=e,{track:function(e){var n;if(e&&c)switch(e.trackingType){case"request":t("requestTracking",null);break;case"responseHit":t("responseTracking",[{key:i.eventResult,value:i.hit}]);break;case"responseMiss":n=e.data,t("responseTracking",[{key:i.eventResult,value:i.miss},{key:i.resultReason,value:n}])}}}}return{init:function(e){return new n(e)}}}},{}],13:[function(e,n,t){n.exports=function(e,i,n){function t(){var e=n("#displayedFrame");return e&&0<e.length?e:null}return{getDisplayedAdFrame:t,isFrameDisplayed:function(e){var n=t();return e&&n&&e[0]===n[0]},getAdUnitClassObj:function(e){var n="ssaAdUnit",t={class:n+" ",selector:"."+n};return e&&e.productType?(t.class+=e.productType+" ",t.selector+="."+e.productType,e.demandSourceName&&(t.class+=e.demandSourceName+" ",t.selector+="."+e.demandSourceName)):i.log("In getAdUnitClass with no ad",i.LogLevels.error),t},hideFrame:function(){var e=t();e&&e.addClass("hidden")},displayFrame:function(){var e=t();e&&e.removeClass("hidden")}}}},{}],14:[function(e,n,t){n.exports={NativeAPI:{updateConsentInfo:".updateConsentInfo"}}},{}],15:[function(s,e,n){e.exports=function(n,t,e){var i=s("./GDPRConstants.js"),r=!1,a=e.CB;function o(e){"string"!=typeof e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(t.getConfig().applicationSettings.consent=e)}return{init:function(e){e&&!r&&(n.PubSub.subscribe(a+i.NativeAPI.updateConsentInfo,function(e){if(e&&e.gdprConsentStatus)return t.log("updateConsentInfo | controller | params: "+JSON.stringify(e),t.LogLevels.info),void o(e.gdprConsentStatus);t.log("updateConsentInfo | controller | without params or gdprConsentStatus key",t.LogLevels.info)}),r=!0)},setConsent:o,getConsent:function(){return t.getConfig().applicationSettings.consent}}}},{"./GDPRConstants.js":14}],16:[function(e,n,t){function i(r,o){var e="NativeCallback",n=!1,a=[],t={GET:"GET",POST:"POST"},s={requestUnknown:"requestUnknown",requestStarted:"requestStarted",responseReceived:"responseReceived",requestError:"requestError"};function i(){r.PubSub.subscribe(e+".httpRequestStatusChanged",function(e){o.checkRequiredCallbackParams(["identifier","status"],e,"httpRequestStatusChanged").didSucceed&&c(e)})}function c(e){o.log("HTTPService - request status changed",o.LogLevels.verbose);var n=g(e.identifier,a);if(e.status===s.requestStarted)l(n);else if(e.status===s.responseReceived){var t={headers:e.responseParams.headers,statusCode:e.responseParams.statusCode,ranOnNative:!0},i=e.data;e.data&&(i=decodeURIComponent(i)),d(n,i,t)}else u(n,e.errMsg)}function l(e){o.log("onRequestStarted "+e.identifier,o.LogLevels.verbose),r.Utils.isFunction(e.onRequestStarted)&&e.onRequestStarted()}function d(e,n,t){o.log("_onResponseReceived "+e.identifier,o.LogLevels.verbose),f(e),r.Utils.isFunction(e.onResponseReceived)&&e.onResponseReceived(n,t)}function u(e,n){o.log("onRequestError "+n,o.LogLevels.verbose),f(e),r.Utils.isFunction(e.onRequestError)&&e.onRequestError(n)}function f(e){if(e){var n=a.indexOf(e);-1<n&&a.splice(n,1)}}function g(n,e){var t=jQuery.grep(e,function(e){return e.identifier===n});return 1!==t.length?null:t[0]}function p(){return+new Date+""+Math.random()}function v(e){return(!r.Utils.isDefined(e.allowNative)||e.allowNative)&&n}function m(e,n){return jQuery.extend(n,{url:e},{identifier:p()}),r.Utils.isDefined(n.background)||(n.background=!1),n}function b(e){o.log("_sendNativeEngineRequest",o.LogLevels.verbose);var i={};jQuery.each(e,function(e,n){if(!r.Utils.isFunction(n)){var t={};t[e]=n,jQuery.extend(i,t)}}),o.callSDKFunction("sendHttpRequest",i,"httpRequestStatusChanged","httpRequestStatusChanged")}function h(i){var r;o.log("_sendWebEngineRequest",o.LogLevels.verbose);var e=i;l(i);var a=function(e,n){var t={headers:e.getAllResponseHeaders(),statusCode:e.status,ranOnNative:!1};d(i,n,t)},n=jQuery.ajax(e);n.done(function(e,n,t){var i=t.responseText;a(t,i)}),n.fail(function(e,n,t){r=t,0===e.status?u(i,r&&""!==r?r:"unknown error"):a(e)})}function S(e){a.push(e),v(e)?b(e):h(e)}function y(e,n){n||(n={}),n.type=t.GET,S(m(e,n))}function C(e,n){n||(n={}),n.type=t.POST,S(m(e,n))}function A(){return a}function D(){return n}function I(e){n=e,i()}var w={GETRequest:y,POSTRequest:C,getPendingRequests:A,getIsNativeEngineExist:D,init:I};return w}n.exports=i},{}],17:[function(e,n,t){n.exports=function(d,u){var f="NativeCallback",g=!1;return{isHybridCampaign:function(e,n){return!u.isLegacy(u.featureMap.hybrid)&&"ios"===u.getApiData({deviceOs:1}).deviceOs&&e&&e.ext&&d.Utils.isDefined(e.ext.features)&&(n&&n.hybridOnClick&&!e.ext.forceOrientation||e.ext.features.allowHybrid&&!e.ext.forceOrientation||e.ext.isHybridFlow&&e.ext.forceOrientation)&&e.ext.clickTags&&u.AdUtils.getStoreAppId(e)&&e.ext.clickTags.pixelURL&&"CPVI"===e.ext.type},clearAppPage:function(e){e&&u.callSDKFunction("clearAppPage",{viewUniqueId:e})},loadHybridCampaign:function(e,s){var c=new jQuery.Deferred;if(u.isLegacy(u.featureMap.hybrid))c.reject();else{u.callSDKFunction("preLoadAppPage",{appId:e,viewUniqueId:s});var l=d.PubSub.subscribe(f+".appStoreInsideLoaded",function(e){var i,t,r,n,a,o;e&&"object"==typeof e&&e.viewUniqueId&&e.viewUniqueId===s&&(d.PubSub.unsubscribe(l),e.isLoaded?(i=s,t=d.PubSub.subscribe(f+".appStoreInsideClosed",function(e){if(e.viewUniqueId===i){var n=jQuery.extend({name:"appStoreInsideClosed"},e);d.PubSub.unsubscribe(t),g&&d.PubSub.publish("ViewsManager.viewClosed"),u.postAdUnitEvent(JSON.stringify(n))}}),r=d.PubSub.subscribe(f+".appStoreInsideDisplayHybrid",function(e){if(e.viewUniqueId===i){var n=jQuery.extend({name:"appStoreInsideDisplayHybrid"},e);d.PubSub.unsubscribe(r),u.postAdUnitEvent(JSON.stringify(n))}}),n=d.PubSub.subscribe(f+".appStoreInsideHideHybrid",function(){d.PubSub.publish("SDKController.HybridAdDidClosed"),d.PubSub.unsubscribe(n)}),a=d.PubSub.subscribe("SDKController.HybridChangeRatio",function(e){var n=e.hybridJson,t=e.viewUniqueId;t===i&&(0===n[0].screenRatio?(d.PubSub.unsubscribe(a),g=!0):1===n[0].screenRatio&&(d.PubSub.unsubscribe(a),d.PubSub.publish("ViewsManager.viewClosed")),u.callSDKFunction("hybridChangeRatio",{hybridJson:JSON.stringify(n),viewUniqueId:t}))}),o=d.PubSub.subscribe("HybridService.closeHybridFlow",function(e){e.viewUniqueId!==i&&(d.PubSub.unsubscribe(o),d.PubSub.unsubscribe(t),d.PubSub.unsubscribe(r),d.PubSub.unsubscribe(a),d.PubSub.unsubscribe(n))}),c.resolve()):c.reject())})}return c.promise()},createHybridId:function(e,n){var t="";return void 0!==n.demandSourceName&&(t=n.demandSourceName),t+=n.productType+u.AdUtils.getAdId(e)+u.AdUtils.getStoreAppId(e)}}}},{}],18:[function(e,n,t){n.exports=function(a,i,o,r,s,c,l,d){function u(e,n,t,i){r.extendAdObjectWithConfig(n,e,t,i),c.ifShouldSetIphoneXBG(e)&&(e.settings.isTransparentLayout=!0),l.isInitiated()&&(e.settings.ringerMuteOnStart=!0),a.log("Extended ad object, ad is "+JSON.stringify(e),a.LogLevels.verbose)}function f(e){var n="ssaAdUnit",t={class:n+" ",selector:"."+n};return e&&e.productType?(t.class+=e.productType+" ",t.selector+="."+e.productType,e.demandSourceName&&(t.class+=e.demandSourceName+" ",t.selector+="."+e.demandSourceName)):a.log("In getAdUnitClass with no ad",a.LogLevels.error),t}function g(e){var n,t=r.getAdId(e),i=null;return n=f(e).selector,o.each(o(n),function(){return o(this).data("id")!=t||(i=o(this),!1)}),i}function p(e,n,t,i){u(e,n,t,i),a.log("line[2717]: load ad unit url",a.LogLevels.verbose),g(e)||function(e,n){a.log("SDKController | loading ad to frame: "+r.getAdId(e)+e.productType,a.LogLevels.verbose);var t=f(e).class;n&&(t+="hidden "),o("<iframe />",{class:t,src:e.url}).data("id",r.getAdId(e)).data("close",!0).appendTo("body")}(e,i.preload)}function v(){var e=o(".loaderOW");e.addClass("loaderOWFadeOut"),setTimeout(function(){a.log("enter timeOut",a.LogLevels.verbose),o(".loaderOW").addClass("hidden"),e[0].offsetWidth=e[0].offsetWidth},600),o("#ssaLoaderWrap").addClass("hidden")}function m(e,n,t,i){v(),t(!1),d.set(n),e.removeClass("hidden").attr("id","displayedFrame"),i()}function b(e){e===i.OW?o(".loaderOW").removeClass("loaderOWFadeOut hidden"):o("#ssaLoaderWrap").removeClass("hidden")}return{createAndLoadAdUnitFrame:p,updateAdUnitUrl:function(e,n,t,i){var r;u(e,n,t,i),(r=g(e))?(a.log("line[3054]: updated iframe url for product "+t.productType,a.LogLevels.verbose),r[0].src=e.url):i.forceCreation?(a.log("Cannot find iframe to update, creating new one",a.LogLevels.verbose),p(e,n,t,i)):a.log("line[3051]: cannot find iframe to update url",a.LogLevels.verbose)},displayAdUnitFrame:function(e,n,t,i){var r=g(e);r.data("loaded")?(a.log("display frame",a.LogLevels.verbose),o.when(i(e,!1)).done(function(){m(r,e,n,t)})):(a.log("display frame with loader",a.LogLevels.verbose),d.set(e),o.when(i(e,!0)).done(function(){!function(e,n,t,i){if(e.data("loaded"))return m(e,n,t,i);t(!0),a.log("SDKController | Display with loader, frame "+e.data("id"),a.LogLevels.verbose),n&&n.productType&&(b(n.productType),e.attr("id","displayedFrame"))}(r,e,n,t)}))},handleScreenVisible:function(e,n,t){e&&b(t.productType),n&&(a.log("ad unit open error",a.LogLevels.verbose),n.addClass("hidden").attr("id",""))},unloadAdUnitFrame:function(t){a.log("SDKController | unloading ad from frame: "+r.getAdId(t)+t.productType,a.LogLevels.verbose),o.each(o(s.getAdUnitClassObj(t).selector),function(e,n){return o(n).data("id")!==r.getAdId(t)||(t.engaged=s.isFrameDisplayed(o(n)),t.engaged&&n.removeAttribute("id"),t.productType===i.OW?setTimeout(function(){n&&n.parentNode&&n.parentNode.removeChild(n)},0):n&&n.parentNode&&n.parentNode.removeChild(n),!1)})},displayLoader:b,hideLoader:v,hideFrame:s.hideFrame,displayFrame:s.displayFrame,isContainerLoaded:function(e){return!!g(e)},onAdUnitLoaded:function(e,n,t){var i=g(e);if(i)if(i.data("loaded"))a.log("SDKController | We already received the loaded event for this frame",a.LogLevels.verbose);else{i.data("loaded",!0);var r=s.isFrameDisplayed(i);a.log("SDKController | ad loaded: "+a.AdUtils.getAdId(e)+"|"+r?"frame Displayed: true":"frame Displayed: false|"+f(e).selector,a.LogLevels.verbose),r&&m(i,e,n,t)}},getAdFrameByProductAndId:g}}},{}],19:[function(e,n,t){function i(e){var n=e,r=[],i=-1,t;function a(){return r.length}function o(){return r}function s(e){Array.isArray(e)&&(i=0,r=e)}function c(){return r[i]}function l(){return t}function d(e){t=e}function u(e){var n,t=p(e);return-1<t&&(n=r.splice(t,1)[0])&&(m()?i=-1:i<t?i=(i+1)%a():t<i&&i--),n}function f(e){var n=p(e);if(-1<n)return r[n]}function g(e,n){var t=p(n);if(-1<t)return r[t]=e,r[t]}function p(e){if(void 0===e)return-1;for(var n=0,t=a(),i=e.toString();n<t&&e;n++)if(r[n].id===i)return n;return-1}function v(){return!m()&&(i+1)%a()!==i}function m(){return 0===a()}function b(){r=[],i=-1,t=null}var h={getOffers:o,getCurrentOffer:c,getOfferById:f,getBackfillOffer:l,setOffers:s,setBackfillOffer:d,removeOfferById:u,replaceOfferById:g,isNextOfferAvailable:v,isEmpty:m,size:a,reset:b};return h}n.exports=i},{}],20:[function(e,n,t){function i(r){var a,o,s,c,l,d,u={none:0,error:1,info:2,verbose:3},f={0:"NONE",1:"ERROR",2:"INFO",3:"VERBOSE"};return{init:function(e,n,t,i){l=window.console||{},a=e,s=t,c=n,d=i,l.log=t?(o=l.log,function(e){this.log(e,u.verbose)}):function(){}},log:function(e,n,t){if(window.productionDebug&&d({url:"http://iron-debug-controller.com?log="+e,type:"pixel"}),!(n&&s<n))if(r.isString(e)||(e=JSON.stringify(e)),r.isFunction(o)&&"android"===a)o.call(l,this.debugMsg(t,n)+e);else{var i={eventName:"log",prefix:"logmessage"};i.parameters={message:this.debugMsg(t,n)+e,acknowledgeWith:"acknowledgeMessage",declineWith:"errorTest"},c.postMessage(i)}},debugMsg:function(e,n){var t=r.isDefined(e)?e:"Controller",i=r.isDefined(n)?f[n]:f[s];return s?"SupersonicAds "+t+" ["+i+"] :":""},LogLevels:u,DebugLevels:f}}var r;n.exports=function(e){return r||(r=new i(e)),r}},{}],21:[function(f,e,n){e.exports=function(e,t){var i=f("./Constants.js"),r="moatAPI",n="moatStartTrackingSuccess",a="moatStartTrackingFail",o="moatStopTrackingSuccess",s=!1,c=!1,l=!1;function d(){return s}function u(){return c}return{initWithOptions:function(e){u()&&t.log("MOATService - initWithOptions MOAT is already initialized",t.LogLevels.verbose),l||(t.setAllowFileAccessFromFileURLs(!0),l=!0);var n=e||{};n.loggingEnabled="prod"!==t.getEnv()&&(t.getConfig().mobileSDKSettings.deviceOs!==i.deviceOs.ios||"true"),t.getConfig().mobileSDKSettings.deviceOs===i.deviceOs.android&&(n.disableAdIdCollection=!0),t.callSDKFunction(r,{moatFunction:"initWithOptions",moatParams:n}),c=!0},containsMOATData:function(e){return!!(e.ext&&e.ext.ivt&&e.ext.ivt.mt)},vastContainsMOATData:function(e){return e.ext&&e.ext.videoData&&e.ext.videoData.videoSource&&e.ext.videoData.videoSource.vast&&-1!==e.ext.videoData.videoSource.vast.indexOf("mt=")},createAdTracker:function(){d()&&t.callSDKFunction(r,{moatFunction:"createAdTracker"})},startTracking:function(){d()&&(e.PubSub.subscribe(i.CB+"."+n,function(e){t.log(r+" Start tracking success: "+JSON.stringify(e),t.LogLevels.verbose)}),e.PubSub.subscribe(i.CB+"."+a,function(e){t.log(r+" Start tracking fail: "+JSON.stringify(e),t.LogLevels.verbose)}),t.callSDKFunction(r,{moatFunction:"startTracking"},n,a))},stopTracking:function(){d()&&(e.PubSub.subscribe(i.CB+"."+o,function(e){t.log(r+"Stop tracking success: "+JSON.stringify(e),t.LogLevels.verbose)}),t.callSDKFunction(r,{moatFunction:"stopTracking"},o))},isTrackingEnabled:d,isInitialized:u,enableTracking:function(){s=c},disableTracking:function(){s=!1},extractMoatDataFromAd:function(e){var n={};return n.ids=e.ext.ivt.mt||{},n.publisherCode=e.ext.ivt&&e.ext.ivt.mtpcode?e.ext.ivt.mtpcode:i.MOAT_PC,n}}}},{"./Constants.js":7}],22:[function(e,n,t){function i(){var e,n={init:function(n,t,e){return this.receiveMessage(function(e){t.call(n,e)},e),this},postMessage:function(e,n,t){n&&(t=t||parent).postMessage(e,n.replace(/([^:]+:\/\/[^\/]+).*/,"$1"))},receiveMessage:function(n,t){n&&(e=function(e){"string"==typeof t&&e.origin!==t||"[object Function]"===Object.prototype.toString.call(t)&&!1===t(e.origin)||("function"!=typeof t||t(e.data))&&n(e)}),window.addEventListener?window[n?"addEventListener":"removeEventListener"]("message",e,!1):window[n?"attachEvent":"detachEvent"]("onmessage",e)}};return n}n.exports=i},{}],23:[function(O,e,n){function t(){var e=O("./Inventory.js"),r={},n=[],t,i;function a(){i=4}function o(){if(I())return Math.max(1,t-1)}function s(){if(0!==Object.keys(r).length)return r[o()]}function c(e){return I()&&w()?e?r[e].size():r[o()].size():0}function l(e){return I()&&w()?e?r[e].getOffers():r[o()].getOffers():[]}function d(){Array.isArray(n)&&n.length>i&&delete r[n.shift()]}function u(e,n){if(Array.isArray(e)&&0!==e.length){var t=void 0!==n?n:D();void 0===r[t]&&(t=D());for(var i=0;i<e.length;i++)e[i].inventoryId=t;return r[t].setOffers(e),t}}function f(e,n){if(e){var t=void 0!==n?n:D();return void 0===r[t]&&(t=D()),e.inventoryId=t,r[t].setBackfillOffer(e),t}}function g(e){if(I()&&w())return e?r[e].getCurrentOffer():r[o()].getCurrentOffer()}function p(e){if(I()&&w())return e?r[e].getBackfillOffer():r[o()].getBackfillOffer()}function v(e,n){if(I()&&w())return n?r[n].removeOfferById(e):r[o()].removeOfferById(e)}function m(e,n){if(I()&&w())return n?r[n].getOfferById(e):r[o()].getOfferById(e)}function b(e,n,t){if(I()&&w())return t?r[t].replaceOfferById(e,n):r[o()].replaceOfferById(e,n)}function h(e){return!(!I()||!w())&&(e?r[e].isNextOfferAvailable():r[o()].isNextOfferAvailable())}function S(e){return!I()||!w()||(e?r[e].isEmpty():r[o()].isEmpty())}function y(){n=[],r={},t=void 0}function C(e){var n=void 0!==e?e:o();n&&r[n]&&(delete r[n],t--)}function A(){return r}function D(){return void 0===t&&(t=1),r[t]=new e(t),n.push(t),t++,d(),t-1}function I(){return 0!==n.length&&void 0!==t}function w(){return void 0!==r[o()]}function L(){return i}function P(){return t}a();var T={getOffers:l,getCurrentOffer:g,getOfferById:m,getBackfillOffer:p,setOffers:u,setBackfillOffer:f,removeOfferById:v,replaceOfferById:b,isNextOfferAvailable:h,isEmpty:S,size:c,reset:y,getActiveInventoryId:o,getActiveInventory:s,removeInventory:C,getInventories:A,getAmountOfInventoriesAllowed:L,getAvailableInventoryId:P};return T}e.exports=t},{"./Inventory.js":19}],24:[function(e,n,t){n.exports={CB:"NativeCallback",serviceCallback:"serviceCallback",NativeAPI:{onNativeLifeCycleEvent:"onNativeLifeCycleEvent"},AndroidEvents:{onStart:"onStart",onPause:"onPause",onResume:"onResume",onDestroy:"onDestroy"}}},{}],25:[function(l,e,n){e.exports=function(e,i,n){var t=l("./NativeLifeCycleEventsConstants.js"),r=i.jQuery(),a=[],o=new(l("./AndroidLifeCycleEventHandlers.js"))(e,i,n);function s(){e.PubSub.subscribe(t.CB+"."+t.NativeAPI.onNativeLifeCycleEvent,function(e){var n,t;i.log("LifeCycleEventsService | received new event: "+JSON.stringify(e),i.LogLevels.info),e&&(n=e.lifeCycleEvent,t=e,c(n)&&o.publishEvent(n,t))})}function c(e){return e&&-1<r.inArray(e,a)}return{init:function(){s()},startNotify:function(e){i.log("LifeCycleEventsService | startNotify | event: "+e,i.LogLevels.info),c(e)||a.push(e)},stopNotify:function(e){i.log("LifeCycleEventsService | stopNotify | event: "+e,i.LogLevels.info),c(e)&&a.splice(r.inArray(e,a),1)}}}},{"./AndroidLifeCycleEventHandlers.js":4,"./NativeLifeCycleEventsConstants.js":24}],26:[function(e,n,t){n.exports=function(){var i,r={iframe:"#adSandbox",url:"",adData:"",templateClass:"obfuscationIframe",src:"{{url}}",frameBorder:"0",scrolling:"no",style:{},id:""},a={};return{init:function(e,n){if((a=jQuery.extend(r,e)).adData&&""!==a.adData){var t=a.src.replace("{{url}}",a.url);(i=jQuery("<iframe />",{id:a.id,class:a.templateClass,src:t,scrolling:a.scrolling,frameborder:a.frameBorder}).css(a.style)).on("load",function(){n(i)}),document.documentElement.appendChild(i[0])}},removeIframe:function(e){if(e){var n=document.getElementById(e);n&&n.parentNode.removeChild(n)}}}}},{}],27:[function(e,n,t){n.exports=function(o){var s=e("./Constants.js");return{open:function(e){if(e&&e.type){if("openUrl"!==e.type)return!1;var n,t=e.callback;e.method||(o.getApiData({deviceOs:1}).deviceOs===s.deviceOs.ios?!e.appId||!o.isLegacy(o.featureMap.hybrid)&&o.isLegacy({ios:"5.38",android:"99"})?e.method=s.openUrlMethods.external_browser:e.method=s.openUrlMethods.storeKit:e.method=s.openUrlMethods.store);var i=(r=e,(a={default:{}})[s.openUrlMethods.storeKit]={appId:r.appId,viewUniqueId:o.StoreKitService.getViewUniqueId(r)},a[s.openUrlMethods.external_browser]={},a[s.openUrlMethods.store]={},a[s.openUrlMethods.webview]={controls:!0},a[r.method]||a.default);return n=jQuery.extend({url:e.url,method:e.method},i),o.openUrl(n,t),!0}var r,a;return!1},openForOW:function(e){if(e&&e.type&&"openUrl"===e.type){var n={},t=e.callback;return n=e.externalBrowser?{url:e.url,controls:!0,method:"external_browser"}:e.method===s.openUrlMethods.external_browser?{url:e.url,method:"external_browser"}:e.install?"ios"===o.getApiData({deviceOs:1}).deviceOs?{url:e.url,controls:!0,method:"external_browser"}:{url:e.url,controls:!0,method:"store"}:{url:e.url,controls:!0,method:"webview"},o.openUrl(n,t),!0}return!1}}}},{"./Constants.js":7}],28:[function(e,n,t){n.exports={NativeAPI:{failCallback:"handleAppOrientationDataFailed",successCallback:"handleAppOrientationDataSuccess",oldApiSuccessCallback:"getOrientationSuccess"},ControllerNativeAPI:{getAppOrientationData:"getAppOrientationData",oldSetOrientation:"setOrientation",oldGetOrientation:"getOrientation",setAppOrientation:"setAppOrientation"},eventicsCategories:{failCallback:{name:"AppOrientationFailed",id:263},successCallback:{name:"AppOrientationSuccess",id:264}},iosOrientationsMap:{UIInterfaceOrientationPortrait:2,UIInterfaceOrientationPortraitUpsideDown:4,UIInterfaceOrientationLandscapeLeft:16,UIInterfaceOrientationLandscapeRight:8},iosOrientations:{2:"Portrait",4:"PortraitUpsideDown",16:"LandscapeLeft",8:"LandscapeRight"},appOrientationAPI:"appOrientationAPI"}},{}],29:[function(e,n,t){n.exports=function(a,o,s){var t,c=e("./OrientationConstants.js"),i=!1,l=s.CB;function r(e){o.log("_setAppOrientation | send orientation: "+e,o.LogLevels.info),o.callSDKFunction(c.ControllerNativeAPI.setAppOrientation,{appOrientation:e})}return{init:function(e,n){e&&!i&&(a.PubSub.subscribe(l+"."+c.NativeAPI.successCallback,function(e){t.trackEvent(c.eventicsCategories.successCallback),e||(o.log("getAppOrientationData | Orientation data structure not exist.",o.LogLevels.info),t.trackEvent(c.eventicsCategories.failCallback))}),a.PubSub.subscribe(l+"."+c.NativeAPI.failCallback,function(e){o.log("getAppOrientationData failed, errorMsg:"+e.errMsg,o.LogLevels.info),t.trackEvent(c.eventicsCategories.failCallback)}),a.PubSub.subscribe("AppOrientationManager.appOrientationChanged",function(e){e&&e.appOrientation&&(o.log("appOrientationChanged | updating native with orientation: "+e.appOrientation,o.LogLevels.info),r(e.appOrientation))}),t=n,i=!0)},getAppOrientationData:function(){o.callSDKFunction(c.ControllerNativeAPI.getAppOrientationData,{},c.NativeAPI.successCallback,c.NativeAPI.failCallback)},setOrientation:function(e){o.callSDKFunction(c.ControllerNativeAPI.oldSetOrientation,{orientation:e})},oldGetOrientation:function(){var t=new jQuery.Deferred,i=a.PubSub.subscribe(l+"."+c.NativeAPI.oldApiSuccessCallback,function(e){if(a.PubSub.unsubscribe(i),"resolved"!==t.state()){clearTimeout(r);var n=e&&e.orientation||s.appInfo.orientation.portrait;t.resolve(n)}}),r=setTimeout(function(){t.resolve(s.appInfo.orientation.portrait)},2e3);return o.callSDKFunction(c.ControllerNativeAPI.oldGetOrientation,null,c.NativeAPI.oldApiSuccessCallback,c.NativeAPI.oldApiSuccessCallback),t.promise()},setAppOrientation:r}}},{"./OrientationConstants.js":28}],30:[function(e,n,t){n.exports=function(){var a=e("./OrientationConstants.js");function o(e){var n=parseInt(e.replace(/^"|"$/g,"")),t=[],i=n.toString(2);if(i.length>Object.keys(a.iosOrientations).length+1||"0"!==i.substr(i.length-1,1))return[];for(var r in a.iosOrientations)(n|r)===n&&t.push(a.iosOrientations[r]);return t}var n=function(n,e){return e.some(function(e){return 0<=n.indexOf(e)})};return{convertOrientationsArrayToNumber:function(e){var i=0;return e.forEach(function(e){var n,t;i+=Number((n=a.iosOrientations,t=e,Object.keys(n).filter(function(e){return n[e]===t})))}),i},convertNumberToOrientations:o,isContainPortrait:function(e){return n(o(e),[a.iosOrientations[2],a.iosOrientations[4]])},isContainLandscape:function(e){return n(o(e),[a.iosOrientations[8],a.iosOrientations[16]])},sharedOrientationBetweenOrientations:function(e,n){var t=o(e),i=o(n),r=t.filter(function(e){return-1<i.indexOf(e)});return r||(r=[]),r}}}},{"./OrientationConstants.js":28}],31:[function(e,n,t){n.exports=function(r,a){var i,o=e("./Constants.js"),s=e("./PermissionsConstants.js"),c=s.nativeFunction,l={};return{getPermissions:function(){if(i&&"pending"===i.status)return i;i=new jQuery.Deferred;var e,n=r.PubSub.subscribe(o.CB+"."+s.handleGetPermissionsSuccess,function(e){a.log(s.handleGetPermissionsSuccess+": "+JSON.stringify(e)),r.PubSub.unsubscribe(n),r.PubSub.unsubscribe(t),i.resolve(e)}),t=r.PubSub.subscribe(o.CB+"."+s.handleGetPermissionsFailure,function(e){a.log(s.handleGetPermissionsFailure+": "+JSON.stringify(e)),r.PubSub.unsubscribe(t),r.PubSub.unsubscribe(n),i.reject(e)});return a.callSDKFunction(s.nativeFunction,{functionName:s.NativeAPI.getPermissions,functionParams:(e=a.getConfig().mobileSDKSettings.deviceOs===o.deviceOs.ios?o.deviceOs.ios:o.deviceOs.android,{permissions:s.supportedPermissions[e]})},s.handleGetPermissionsSuccess,s.handleGetPermissionsFailure),i.promise()},isPermissionGranted:function(e){if(!e)return!1;if(l[e]&&"pending"===l[e].status)return l[e];l[e]=new jQuery.Deferred;var t=r.PubSub.subscribe(o.CB+"."+s.handleIsPermissionGrantedSuccess,function(e){if(e&&e.permission){var n=e.permission;l[n]?(a.log(s.handleIsPermissionGrantedSuccess+": "+JSON.stringify(e)),r.PubSub.unsubscribe(t),r.PubSub.unsubscribe(i),l[n].resolve(e)):a.log("Unrecognised permission name "+n,a.LogLevels.error)}}),i=r.PubSub.subscribe(o.CB+"."+s.handleIsPermissionGrantedFailure,function(e){if(e&&e.permission){a.log(c+s.NativeAPI.isPermissionGranted+JSON.stringify(e),a.LogLevels.verbose);var n=e.permission;l[n]?(r.PubSub.unsubscribe(i),r.PubSub.unsubscribe(t),l[n].reject(e)):a.log("Unrecognised permission name "+n,a.LogLevels.error)}else e&&e.errMsg&&a.log("Error calling isPermissionGranted "+e.errMsg,a.LogLevels.error)});return a.callSDKFunction(s.nativeFunction,{functionName:s.NativeAPI.isPermissionGranted,functionParams:{permission:e}},s.handleIsPermissionGrantedSuccess,s.handleIsPermissionGrantedFailure),l[e].promise()}}}},{"./Constants.js":7,"./PermissionsConstants.js":32}],32:[function(e,n,t){n.exports={CB:"NativeCallback",NativeAPI:{getPermissions:"getPermissions",isPermissionGranted:"isPermissionGranted"},nativeFunction:"permissionsAPI",supportedPermissions:{ios:["NSCameraUsageDescription","NSLocationAlwaysUsageDescription","NSLocationWhenInUseUsageDescription","NSLocationAlwaysAndWhenInUseUsageDescription","NSMicrophoneUsageDescription"],android:[]},handleGetPermissionsSuccess:"handleGetPermissionsSuccess",handleGetPermissionsFailure:"handleGetPermissionsFailure",handleIsPermissionGrantedSuccess:"handleIsPermissionGrantedSuccess",handleIsPermissionGrantedFailure:"handleIsPermissionGrantedFailure"}},{}],33:[function(e,n,t){n.exports=function(t){return{firePixel:function(e){if(void 0!==e.url&&""!==e.url){if("pixel"===e.type){var n=new Image;""===e.at||isNaN(parseInt(e.at))?n.src=e.url:(n.src=e.url,n.time=e.at)}}else t.log("Missing callback data. At: directive ssaPixel"+(new Date).getTime(),t.LogLevels.info)}}}},{}],34:[function(e,n,t){function i(r){var a={},e,o,n={init:function(){o=jQuery,e=this},publish:function(n,e){o=o||jQuery;try{var t=o.extend(!0,[],a[n]);o.each(t,function(){this.apply(o,e||[])})}catch(e){if(r.Utils.isDefined(e)){r.log({type:"in PubSub "+n,data:e.message,trace:e.stack});var i={name:e.name,message:e.stack};window.onerror(e.name+": "+e.message,null,null,null,i)}}},subscribe:function(e,n){return a[e]||(a[e]=[]),a[e].push(n),[e,n]},unsubscribe:function(n){if(n){var t=n[0];a[t]&&o.each(a[t],function(e){a[t][e]===n[1]&&a[t].splice(e,1)})}},subscribeOnce:function(e,n){var t=this,i=this.subscribe(e,function(){n(),t.unsubscribe(i)})}};return n}n.exports=i},{}],35:[function(e,n,t){n.exports={CB:"NativeCallback",NativeAPI:{startListenerSuccessKey:"startListenerSuccess",startListenerFailKey:"startListenerFailed",stopListenerSuccessKey:"stopListenerSuccess",stopListenerFailKey:"stopListenerFailed",initSuccessKey:"initSuccess",initFailKey:"initFailed",statusChanged:"ringerSwitchStatusChanged"},ControllerNativeAPI:{startListener:"startListener",stopListener:"stopListener",init:"init"},eventicsCategories:{startListenerFail:{name:"startListenerFail",id:263},stopListenerFail:{name:"stopListenerFail",id:264},initFail:{name:"initRingerFail",id:265}},notifyAdunitOnState:"ringerSwitchState",ringerNativeFunction:"ringerSwitchAPI"}},{}],36:[function(e,n,t){n.exports=function(n,t){var i,r,a,o=e("./RingerSwitchConstants.js"),s=!0,c=!1,l=1e3,d=!1;function u(e){t.postAdUnitEvent(JSON.stringify({name:o.notifyAdunitOnState,isRingerSwitchSilent:e}))}return{init:function(){var e;c||(n.PubSub.subscribe(o.CB+"."+o.NativeAPI.statusChanged,function(e){e&&(s=e.ringerSwitchSilent,d&&!s?r=setTimeout(function(){u(s)},i):(r&&clearTimeout(r),u(s)))}),n.PubSub.subscribe(o.CB+"."+o.NativeAPI.startListenerSuccessKey,function(e){t.log("Ringer | start detecting function performed successfully.",t.LogLevels.info)}),n.PubSub.subscribe(o.CB+"."+o.NativeAPI.startListenerFailKey,function(e){a.trackEvent(o.eventicsCategories.startListenerFail),e&&t.log("Ringer start detecting failed to perform, errorMsg:"+e.errMsg,t.LogLevels.info)}),n.PubSub.subscribe(o.CB+"."+o.NativeAPI.stopListenerSuccessKey,function(e){t.log("Ringer stop detecting successfully.",t.LogLevels.info)}),n.PubSub.subscribe(o.CB+"."+o.NativeAPI.stopListenerFailKey,function(e){a.trackEvent(o.eventicsCategories.stopListenerFail),e&&t.log("Ringer stop detecting failed to perform, errorMsg:"+e.errMsg,t.LogLevels.info)}),n.PubSub.subscribe(o.CB+"."+o.NativeAPI.initSuccessKey,function(e){t.log("Ringer prepare detector successfully.",t.LogLevels.info)}),n.PubSub.subscribe(o.CB+"."+o.NativeAPI.initFailKey,function(e){a.trackEvent(o.eventicsCategories.initFail),e&&t.log("Ringer prepare detector failed to perform, errorMsg:"+e.errMsg,t.LogLevels.info)}),t.log("Ringer | calling init native function",t.LogLevels.info),t.callSDKFunction(o.ringerNativeFunction,{functionName:o.ControllerNativeAPI.init},o.NativeAPI.initSuccessKey,o.NativeAPI.initFailKey),e={productChance:(t.getEnv(),1),baseData:{}},a=n.Eventics.createEventic(e),c=!0)},startListener:function(e){t.postAdUnitEvent(JSON.stringify({name:o.notifyAdunitOnState,isRingerSwitchSilent:s})),d=e&&e.shouldSetRingerUpdateDelay,i=e&&e.ringerUpdateDelay||l,t.log("Ringer | Set listener config to should delay?"+d+", with delay "+i,t.LogLevels.verbose),t.callSDKFunction(o.ringerNativeFunction,{functionName:o.ControllerNativeAPI.startListener},o.NativeAPI.startListenerSuccessKey,o.NativeAPI.startListenerFailKey)},stopListener:function(){d=!1,i=l,t.callSDKFunction(o.ringerNativeFunction,{functionName:o.ControllerNativeAPI.stopListener},o.NativeAPI.stopListenerSuccessKey,o.NativeAPI.stopListenerFailKey)},isInitiated:function(){return c}}}},{"./RingerSwitchConstants.js":35}],37:[function(e,n,t){n.exports=function(o,s){var c="NativeCallback";function l(e){return e.viewIdentifier?e.viewIdentifier:e.viewUniqueId}function d(e){return!(e&&!0===e.standaloneView||s.isLegacy(s.featureMap.hybrid)||"ios"!==s.getApiData({deviceOs:1}).deviceOs)}return o.PubSub.subscribe("SDKController.PreloadAppInstallPage",function(e){s.checkRequiredCallbackParams(["appId"],e,"preloadAppInstallPage").didSucceed?function(n){var t,i=l(n);if(d(n)){s.callSDKFunction("preLoadAppPage",{appId:n.appId,viewUniqueId:i},"preloadAppInstallPageSuccess","preloadAppInstallPageFailure");var r=o.PubSub.subscribe(c+".appStoreInsideLoaded",function(e){e&&"object"==typeof e&&e.viewUniqueId&&e.viewUniqueId===i&&(clearTimeout(t),o.PubSub.unsubscribe(r),n.callback&&n.callback.call(null,e))}),a=o.PubSub.subscribe(c+".appStoreInsideClosed",function(e){if(e.viewUniqueId===i){var n=jQuery.extend({name:"appStoreInsideClosed"},e);o.PubSub.unsubscribe(a),s.postAdUnitEvent(JSON.stringify(n))}});t=setTimeout(function(){o.PubSub.unsubscribe(r),o.PubSub.unsubscribe(a)},5e3)}}(e):s.log("error calling preload App install page with "+JSON.stringify(e),s.LogLevels.error)}),o.PubSub.subscribe("SDKController.ClearAppPage",function(e){e.viewUniqueId=l(e),s.checkRequiredCallbackParams(["viewUniqueId"],e,"ClearAppPage").didSucceed?e&&e.viewUniqueId&&function(e){if(d()){if(!e)return;s.callSDKFunction("clearAppPage",{viewUniqueId:e})}}(e.viewUniqueId):s.log("error calling clear App install page with "+JSON.stringify(e),s.LogLevels.error)}),{isStoreKitSupported:d,updateAdWithStoreAppId:function(e,n){if(n&&n.extractAppIdForStoreKit&&d(n)&&e&&e.ext&&e.ext.clickTags&&!e.ext.clickTags.storeAppId&&e.ext.clickTags.pixelURL){var t=s.AdUtils.getStoreAppId(e);t&&(e.ext.clickTags.storeAppId=t)}return e},getViewUniqueId:l}}},{}],38:[function(e,n,t){function i(o,r,s,c){function i(e,n){return e[0]&&n[0]?(e=new Date(e[0]))<(n=new Date(n[0]))?-1:n<e?1:0:0}var e={getScript:function(e,n,t){var i=s.createElement("script");i.src=e;var r=s.getElementsByTagName("head")[0],a=!1;i.onload=i.onreadystatechange=function(e){a||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(a=!0,n(e),i.onload=i.onreadystatechange=null,r.removeChild(i))},i.onerror=function(e){o.log(["script load error",e]),t&&t()},r.appendChild(i)},getQueryString:function(e,n,t){t=this.isDefined(t)?t:r.location.href,null===n&&(n=""),e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return null===i?n:i[1]},getUrlInfo:function(e){var n=s.createElement("a");return n.href=e,{host:n.hostname,port:n.port,path:n.pathname,protocol:n.protocol}},changeUrlProtocol:function(e,n){var t=s.createElement("a");return t.href=e,t.protocol=n,t.href},serialize:function(e){var n=[];for(var t in e)e.hasOwnProperty(t)&&n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n.join("&")},isDefined:function(e){return typeof e!==c},isFunction:function(e){return"function"==typeof e},isString:function(e){return"string"==typeof e},parseJSON:function(e){var n={};if(!this.isString(e))return null;try{n=jQuery.parseJSON(e)}catch(e){o.log(e.message,o.LogLevels.error)}return n},getParams:function(e){var n,t=[],i=e.split("/"),r=i.length;if(-1===e.indexOf("JSON:")){if(2<=r&&r%2==0)for(n=0;n<r;n+=2)t[i[n]]=i.length>=n+1?decodeURIComponent(i[n+1]):null}else{var a=e.split("JSON:");typeof a[1]!==c&&(t=jQuery.parseJSON(a[1]))}return t},decodeValues:function(n){jQuery.each(n,function(e){n.hasOwnProperty(e)&&("string"==typeof n[e]&&(n[e]=decodeURIComponent(n[e])),"object"==typeof n[e]&&n[e]&&o.Utils.decodeValues(n[e]))})},renderTemplate:function(i,e){return e&&jQuery.each(e,function(e,n){var t=new RegExp("{{"+e+"}}","g");i=i.replace(t,n)}),i},isVisible:function(e){return"none"!==e.css("display")&&"hidden"!==e.css("visibility")},versionCompare:function(e,n){var t=function(e){1===e.length&&e.push("0"),2===e.length&&e.push("0")},i=function(n){jQuery.each(n,function(e){n[e]=parseInt(n[e])})};"5.02"===e&&(e="5.0.2");var r=e.split("."),a=n.split(".");t(r),t(a);try{i(r),i(a)}catch(e){throw"parse error"}return r[0]===a[0]?r[1]===a[1]?r[2]===a[2]?0:r[2]>a[2]?1:-1:r[1]>a[1]?1:-1:r[0]>a[0]?1:-1},returnResolvedPromise:function(){var e,n=new jQuery.Deferred;return 0<arguments.length&&(e=[].slice.call(arguments)),n.resolve.apply(n.resolve,e),n.promise()},returnRejectedPromise:function(){var e,n=new jQuery.Deferred;return 0<arguments.length&&(e=[].slice.call(arguments)),n.reject.apply(n.reject,e),n.promise()},replacePlaceHolder:function(e,n){var t;for(var i in n){t=n[i];var r=new RegExp(i+"|"+encodeURIComponent(i),"i");e=e.replace(r,"function"==typeof t?t():t)}return e},fileArrayIncludes:function(e,n){if(e||0===e.length)return!1;for(var t=0;t<e.length;t++)if(n===e[t])return!0;return!1},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},isEmptyObject:function(e){if(!e)return!0;if(this.isString(e)||this.isArray(e))return 0===e.length;for(var n in e)if(e.hasOwnProperty(n))return!1;return!0},sortDataByDateKey:function(e){var n=[];for(var t in e)n.push([t,e[t]]);return n.sort(i)}};return e}n.exports=i},{}],39:[function(e,n,t){n.exports=function(g,p){var v=e("../components/PixelTrackingService.js")(p),m=e("../components/FillRateTrackingService.js")(p,v),b=e("../components/ObfuscationService.js")(),h=e("../modules/DemandSource/EventCategories")(),S=e("./Constants"),y=p.DemandUtils,C={url:1,xmlResponse:2};function A(e){return e.ext.vastData?e.ext.vastData.xmlResponse:null}return{parseVast:function(e,n,t){var i,r,a=new jQuery.Deferred;r="prod"!==p.getEnv()?(i=e.settings.urltocdn+"/common/sdk/1.0.8/vastObfuscator.html",e.settings.urltocdn+"/common/sdk/1.0.8/vast-vmap.js"):(i=e.settings.urltocdn+"/common/sdk/1.0.8/vastObfuscator.d09fd80f.min.html",e.settings.urltocdn+"/common/sdk/1.0.8/vast-vmap.d09fd80f.min.js");var o,s,c,l=(c=A(o=e)?(s=A(o),C.xmlResponse):(s=o.ext.videoData.videoSource.vast,C.url),{adData:s,adSource:c});l.adSource===C.url&&(l.adData=function(e,n,t){if(e&&void 0!==e){var i;e=e.replace(S.vastRequestPlaceholders.moatEnabled,(i=n,p.MOATService.isInitialized()&&i?1:0));var r=t.requestID;r&&(e=e.replace(S.vastRequestPlaceholders.requestId,r));var a=function(e){var n=e.ext.opportunityID;if(e.ext.squeezeOpportunityIds&&"[object Array]"===Object.prototype.toString.call(e.ext.squeezeOpportunityIds)){var t=e.controllerSpace&&e.controllerSpace.viewCount||0;n=e.ext.squeezeOpportunityIds[t]}return n}(t);return a&&(e=e.replace(S.vastRequestPlaceholders.opportunityId,a)),e}}(l.adData,n,e));var d,u={adData:l.adData,style:"height:100%;",adUnitData:e,vastParserUrl:r,isAdDataTypeURL:(d=l,d.adSource===C.url)},f={adData:l.adData,url:i,templateClass:"obfuscationIframe",style:{width:"1px",height:"1px",border:"0"},id:e.vastIframeId};return function(t,n,e){var i,r;if("[object Array]"===Object.prototype.toString.call(t.ext.callbacks)){var a=t.controllerSpace&&t.controllerSpace.viewCount||0;i=t.ext.callbacks[a]}else i=t.ext.callbacks;var o=m.init(i),s=t.vastIframeId,c=g.PubSub.subscribe("SDKController.VastRequest",function(e){e.vastIframeId&&e.vastIframeId===s&&(o.track({trackingType:"request"}),g.PubSub.unsubscribe(c))}),l=g.PubSub.subscribe("SDKController.VastResponse",function(e){e.vastIframeId&&e.vastIframeId===s&&(clearTimeout(r),"hit"===e.result?(o.track({trackingType:"responseHit"}),b.removeIframe(s),g.PubSub.unsubscribe(l),n.resolve(e.data)):(o.track({trackingType:"responseMiss",data:e.data}),b.removeIframe(s),g.PubSub.unsubscribe(l),n.reject({errMsg:e.data})))}),d=e&&e>S.vastMinimumResponseTimeout?e:S.vastResponseTimeout;r=setTimeout(function(){g.PubSub.unsubscribe(l),g.PubSub.unsubscribe(c),g.PubSub.unsubscribe(u),clearTimeout(r),n.reject({isTimeLimitReached:!0,errMsg:"timeout"})},d);var u=g.PubSub.subscribe("SDKController.VastErrorPixel",function(e){e.vastIframeId&&e.vastIframeId===s&&(v.firePixel(e),b.removeIframe(s),g.PubSub.unsubscribe(u))}),f=g.PubSub.subscribe("SDKController.parseVastInfo",function(e){if(e.vastIframeId&&e.vastIframeId===s){g.PubSub.unsubscribe(f);var n=y.extendCallbackParamsWithParentProductConfig(t,{action:"fireEvent",eventParam:{eName:h.parseVastInfo,label:{},data:{generalMessage:e.data}}});g.PubSub.publish("SDKController.Analytics",[n])}})}(e,a,t.vastTimeOut),b.init(f,function(e){g.Msg.postMessage("$$JSON:"+JSON.stringify(u),i,e[0].contentWindow)}),a.promise()},removeIframe:function(e){b.removeIframe(e)}}}},{"../components/FillRateTrackingService.js":12,"../components/ObfuscationService.js":26,"../components/PixelTrackingService.js":33,"../modules/DemandSource/EventCategories":65,"./Constants":7}],40:[function(e,n,t){n.exports=function(r){var a,o,s,c,l=e("../components/Constants.js"),d=null;return{init:function(e){var n;d=new jQuery.Deferred,a=(n=e).settings&&n.settings.standaloneView,(o=e.ext&&e.ext.isHybridFlow||!1)?l.viewsStates.hybrid:l.viewsStates.normal,s=e.ext&&e.ext.viewUniqueId||"";var t,i=JSON.stringify(l.hybridViews);c={standaloneView:a,viewUniqueId:s},o?(c.hybridView=o,c.hybridJson=i,t=r.PubSub.subscribe("ViewsManager.viewClosed",function(e){d.resolve(),r.PubSub.unsubscribe(t)})):d.resolve({})},waitForAllViews:function(){return d.promise()},isHybridFlow:function(){return isHybrid},getDisplayWebViewParams:function(e){return c=jQuery.extend(c,{display:e})}}}},{"../components/Constants.js":7}],41:[function(s,e,n){e.exports=function(u,f,g,p,v,e,m,b,n,h,S,y,t,C,i,A,D,a){var c=new(s("../IframeManager.js"))(f,p,v,e,t,C,i,a),r=n.style.webViewBGColor,o=n.style.backgroundsByType,I=n.style.forceCloseProperties,w=n.style.backgroundsByDevice,l={none:0,device:1,controller:2},L=function(){var r=!1,a=!1,o=!1,s=null,i={on:!1,productConfig:null};function c(){f.log("Webview state- open: "+r+", viewable: "+a+", productConfig: "+JSON.stringify(s),f.LogLevels.verbose)}function e(e,n){var t;switch(f.log("received event: "+e+" sendCloseRequest: "+JSON.stringify(i),f.LogLevels.verbose),e){case"close":L.shouldNotifyClose(n)&&(t=y.extendCallbackParamsWithParentProductConfig(n),u.PubSub.publish("SDKController.onAdWindowsClosed",[t]),f.callSDKFunction("onAdWindowsClosed",t));break;default:f.log("received event: "+e,f.LogLevels.verbose)}}function l(e,n){var t=I[g.mobileSDKSettings.deviceOs+e]?e:"Neutral",i=v.extend({},I[g.mobileSDKSettings.deviceOs+t]);n&&(i.position=n),f.callSDKFunction("setForceClose",i)}function d(e){var n,t;u.Utils.isDefined(e)&&u.Utils.isDefined(e.productType)?C.ifShouldSetIphoneXBG(e)?(n="iphoneX",t=u.Utils.isDefined(w[n])?w[n]:w.general,v("body").css("background",t)):(P(e.productType),T(e.productType)):T("default"),l(e.productType)}return u.PubSub.subscribe("SDKController.SetForceClose",function(e){var n;n=e,!u.Utils.isDefined(n.isEnable)||n.isEnable?L.changeMode("Neutral",n.position):L.disableForceClose()}),{display:function(e){if(e){if(g.mobileSDKSettings.deviceOs===p.deviceOs.ios&&(r||a)&&A.supportOrientation)f.log("avoiding setOrientation for new displayed ad",f.LogLevels.verbose);else{var n=b.getAdDisplayOrientation(g,h,e);S.setOrientation(n)}if(r||a)return f.log("line[882]: be might here because of next offer, engaged is "+o,f.LogLevels.verbose),void(o=!0);d(e),L.loadProduct(e),m.init(e);var t=y.extendCallbackParamsWithParentProductConfig(e,m.getDisplayWebViewParams(!0)),i=function(e){var n={};if(g.mobileSDKSettings.deviceOs===p.deviceOs.android&&!A.supportImmersive){var t=e.settings&&e.settings.immersive;v.extend(n,{immersive:t})}return A.translucent||(n.activityThemeTranslucent=!!e.settings.translucentView),g.mobileSDKSettings.deviceOs===p.deviceOs.ios&&v.extend(n,{appOrientation:D.getOrientation()}),n}(e);f.log("displayWebView platformParams: "+JSON.stringify(i),f.LogLevels.verbose),f.log("displayWebView displayParams: "+JSON.stringify(t),f.LogLevels.verbose),f.callSDKFunction(p.nativeInterfaceMethod.displayWebView,v.extend(i,t)),r=!0,c()}},hide:function(){r&&function(){var e,n,t=new v.Deferred,i=function(){u.PubSub.unsubscribe(e),u.PubSub.unsubscribe(n),t.resolve()};f.log("line[882]:"+JSON.stringify(s),f.LogLevels.verbose);var r=f.DemandUtils.extendCallbackParamsWithParentProductConfig(s,f.ViewsManager.getDisplayWebViewParams(!1));return A.supportAdCloseCB?(e=u.PubSub.subscribe(p.CB+"."+p.nativeCallBacks.hideSuccess,i),n=u.PubSub.subscribe("SDKController.HybridAdDidClosed",i)):t.resolve(),f.callSDKFunction(p.nativeInterfaceMethod.displayWebView,r,p.nativeCallBacks.hideSuccess,p.nativeCallBacks.hideFailed),t.promise()}().then(function(){r=!1,i.productConfig=s,i.on=!0,o||e("close",s),c()})},setVisibility:function(e){a=e,c()},shouldNotifyClose:function(e){return i.on&&i.productConfig===e?(i.on=!1,i.productConfig=null,c(),!0):(c(),!1)},loadProduct:function(e){s=y.extendCallbackParamsWithParentProductConfig(e),o=!0,c()},unloadProduct:function(){o=!1,i.on&&e("close",s),c()},changeMode:function(e,n){l(e,n)},disableForceClose:function(){f.callSDKFunction("setForceClose",I.disable)},getState:function(){return{engaged:o,opened:r,productConfig:s,viewable:a,standalone:!1}}}}();function P(e){var n=u.Utils.isDefined(r[e])?r[e]:r.general;f.callSDKFunction("setWebviewBackgroundColor",{color:n})}function T(e){var n=u.Utils.isDefined(o[e])?o[e]:o.general;v("body").css("background",n)}function d(e,n,t){var i=v("#ssaNavigator"),r=a.getDisplayedAdType();g.mobileSDKSettings.deviceOs!==p.deviceOs.android&&v("body").css("height",n.scrollHeight),T(r),P(r),c.displayFrame(),f.callSDKFunction("setBackButtonState",{state:l.controller}),e(!1,null),L.changeMode("Neutral"),t(),i.removeClass("webNavigation").addClass("defaultNavigation"),setTimeout(function(){f.callSDKFunction("navigationModeChange",{state:!1})},70)}return{createAndLoadAdFrame:c.createAndLoadAdUnitFrame,displayAdFrame:c.displayAdUnitFrame,unloadAdFrame:c.unloadAdUnitFrame,updateFrameUrl:c.updateAdUnitUrl,getContainerState:L.getState,displayContainer:L.display,hideContainer:L.hide,setContainerVisibility:L.setVisibility,changeContainerMode:L.changeMode,unloadProductFromContainer:L.unloadProduct,handleScreenVisible:c.handleScreenVisible,displayLoader:c.displayLoader,hideLoader:c.hideLoader,changeToNavigationMode:function(e,n,t,i){var r,a,o,s=v("#ssaNavigator");v("body").css("height",""),P("WebControls"),T("WebControls"),L.changeMode("Navigation"),c.hideFrame(),c.hideLoader(),f.callSDKFunction("setBackButtonState",{state:l.device}),e(!1,null),r=e,a=t,o=i,n.unbind("touchend").bind("touchend",function(e){e.stopPropagation(),e.preventDefault(),v("#ssaNavigatorBackButton").unbind("touchend"),f.callSDKFunction("controlSecondaryWebView",{action:"close"}),f.callSDKFunction("removeCloseEventHandler"),d(r,a,o)}),v("#ssaNavigatorBackButton").unbind("touchend").bind("touchend",function(e){e.stopPropagation(),e.preventDefault(),f.callSDKFunction("removeCloseEventHandler"),f.callSDKFunction("controlSecondaryWebView",{action:"back"})}),s.removeClass("defaultNavigation").addClass("webNavigation"),f.callSDKFunction("navigationModeChange",{state:!0})},returnFromNavigationMode:d,isContainerLoaded:c.isContainerLoaded,onAdUnitLoaded:c.onAdUnitLoaded,getAdFrameByProductAndId:c.getAdFrameByProductAndId}}},{"../IframeManager.js":18}],42:[function(e,n,t){n.exports={CB:"NativeCallback",NativeAPI:{loadWithUrl:"loadWithUrl",updateAd:"updateAd",isExternalAdViewInitiated:"isExternalAdViewInitiated",sendMessage:"sendMessage",getViewVisibility:"handleGetViewVisibility"},nativeFunction:"bannerViewAPI",handleContainerIsVisible:"containerIsVisible",handleContainerWasRemoved:"containerWasRemoved",handleIsInitiated:"containerAdViewStatus",handleIsInitiatedFailure:"containerAdViewStatusFailure",handleAdReplaced:"containerAdReplaced",handleMessage:"containerSendMessage",handleLoadWithUrlSuccess:"handleLoadWithUrlSuccess",handleLoadWithUrlFailure:"handleLoadWithUrlFailure",handleUpdateAdSuccess:"handleUpdateAdSuccess",handleUpdateAdFailure:"handleUpdateAdFailure",handleSendMessageSuccess:"handleSendMessageSuccess",handleSendMessageFailure:"handleSendMessageFailure",handleGetViewVisibilitySuccess:"handleGetViewVisibility",handleGetViewVisibilityFailure:"handleGetViewVisibilityFailure"}},{}],43:[function(e,n,t){n.exports=function(o,s,c,i,n){var r,a,l=e("./ExternalAdViewConstants.js"),t=[],d=[];function u(){var e=n.get();e&&e.productType&&e.productType===c.BN&&n.reset()}function f(e){return!!e&&e.isViewVisible}function g(e){s.log("ExternalAdViewService | sendMessage | "+JSON.stringify(e));var n=o.PubSub.subscribe(c.CB+"."+l.handleSendMessageFailure,function(e){e&&e.errMsg&&s.log("Error calling "+l.handleSendMessageFailure+" with error "+e.errMsg,s.LogLevels.error),o.PubSub.unsubscribe(n)}),t=e.indexOf("$$");-1!==t&&(e=function(e,n){var t={};t.name=e.substr(0,n);var i=e.substr(n+2),r=i.indexOf("="),a=i.substr(0,r),o=i.substr(r+1);return t[a]=o,JSON.stringify(t)}(e,t)),s.callSDKFunction(l.nativeFunction,{functionName:l.NativeAPI.sendMessage,functionParams:{params:e}},l.handleSendMessageSuccess,l.handleSendMessageFailure)}var p=function(e,n){s.log("ExternalAdViewService | send message to adview"+e,s.LogLevels.error),g(e)};return{init:function(){t.push(o.PubSub.subscribe(c.CB+"."+l.handleContainerIsVisible,function(e){!e.configs&&e.configs.productType&&e.configs.visibilityParams||(s.log("ExternalAdViewService | "+l.handleContainerIsVisible,s.LogLevels.verbose),f(e.configs.visibilityParams)&&o.PubSub.publish(e.configs.productType+".isVisible",[e.configs]))})),t.push(o.PubSub.subscribe(c.CB+"."+l.handleContainerWasRemoved,function(e){s.log("ExternalAdViewService | "+l.handleContainerWasRemoved,s.LogLevels.error);for(var n=!1,t=0;!n&&t<d.length;t++)d[t].id===e.configs.externalAdViewId&&(n=!0,d.splice(t,1));n||s.log("ExternalAdViewService | "+l.handleContainerWasRemoved+"trying to remove container "+e.configs.externalAdViewId+" that does not exist",s.LogLevels.error),u(),o.PubSub.publish(e.configs.productType+".reset",[e.configs])})),t.push(o.PubSub.subscribe(c.CB+"."+l.handleMessage,function(e){!function(n){try{s.log("ExternalAdViewService | handleMessageFromAdunit | "+JSON.stringify(n));var e=(t=n.id,function(e){p(JSON.stringify({data:e,id:t}),!0)});o.Utils.decodeValues(n.arguments),i.extend(n.arguments,{callback:e}),o.PubSub.publish("SDKController."+n.method,[n.arguments])}catch(e){s.log("ExternalAdViewService | unable to parse message: "+n,s.LogLevels.error)}var t}(e)}))},destroy:function(){for(var e in t)o.PubSub.unsubscribe(e)},loadWithUrl:function(e,n,t,i){s.log("ExternalAdViewService | _loadWithUrl | "+e),s.AdUtils.extendAdObjectWithConfig(e,n,t,i);var r=o.PubSub.subscribe(c.CB+"."+l.handleLoadWithUrlFailure,function(e){e&&e.errMsg&&(s.log("Error calling "+l.handleLoadWithUrlFailure+" with error "+e.errMsg,s.LogLevels.error),u(),o.PubSub.publish("SDKController.AdLoadError",[e])),o.PubSub.unsubscribe(r)});s.callSDKFunction(l.nativeFunction,{functionName:l.NativeAPI.loadWithUrl,functionParams:{urlForWebView:e}},l.handleLoadWithUrlSuccess,l.handleLoadWithUrlFailure)},updateAd:function(e,n,t,i){s.log("ExternalAdViewService | _updateAd | "+JSON.stringify(n));var r={name:"updateAd",param:n};s.AdUtils.extendAdObjectWithConfig(e,n,t,i);var a=o.PubSub.subscribe(c.CB+"."+l.handleUpdateAdFailure,function(e){e&&e.errMsg&&s.log("Error calling "+l.handleUpdateAdFailure+" with error "+e.errMsg,s.LogLevels.error),o.PubSub.unsubscribe(a)});s.callSDKFunction(l.nativeFunction,{functionName:l.NativeAPI.updateAd,functionParams:{params:JSON.stringify(r)}},l.handleUpdateAdSuccess,l.handleUpdateAdFailure)},sendMessage:g,isContainerVisible:f,isExternalAdViewInitiated:function(){if(s.log("ExternalAdViewService | isExternalAdViewInitiated |"),r&&"pending"===r.status)return r;r=new i.Deferred;var n=o.PubSub.subscribe(c.CB+"."+l.handleIsInitiated,function(e){s.log("ExternalAdViewService | "+l.handleIsInitiated+" "+JSON.stringify(e)),o.PubSub.unsubscribe(n),o.PubSub.unsubscribe(t),r.resolve(e)}),t=o.PubSub.subscribe(c.CB+"."+l.handleIsInitiatedFailure,function(e){e&&e.errMsg&&s.log("Error calling "+l.handleIsInitiatedFailure+" with error "+e.errMsg,s.LogLevels.error),o.PubSub.unsubscribe(t),o.PubSub.unsubscribe(n),r.reject(e)});return s.callSDKFunction(l.nativeFunction,{functionName:l.NativeAPI.isExternalAdViewInitiated},l.handleIsInitiated,l.handleIsInitiatedFailure),r.promise()},addExternalAdViewIdAndSetStatus:function(e){s.log("ExternalAdViewService | _addExternalAdViewIdAndSetStatus",s.LogLevels.error);for(var n=e.externalAdViewId,t=e.isInReload,i=!1,r=0;r<d.length;r++){var a=d[r];a.id===n&&(i=!0,a.isInReload=t,s.log("ExternalAdViewService | _addExternalAdViewIdAndSetStatus | changed isInReload to "+t,s.LogLevels.error))}i?s.log("ExternalAdViewService | _addExternalAdViewIdAndSetStatus | "+n+" has been previously added",s.LogLevels.error):(0!==d.length&&(d=[]),d.push({id:n,isInReload:t}))},getViewVisibility:function(){if(s.log("ExternalAdViewService | _getViewVisibility"),a&&"pending"===a.status)return a;a=new i.Deferred;var n=o.PubSub.subscribe(c.CB+"."+l.handleGetViewVisibilitySuccess,function(e){s.log("ExternalAdViewService | "+l.handleGetViewVisibilitySuccess+" "+JSON.stringify(e)),o.PubSub.unsubscribe(n),o.PubSub.unsubscribe(t),a.resolve(e)}),t=o.PubSub.subscribe(c.CB+"."+l.handleGetViewVisibilityFailure,function(e){e&&e.errMsg&&s.log("Error calling "+l.handleGetViewVisibilityFailure+" with error "+e.errMsg,s.LogLevels.error),o.PubSub.unsubscribe(t),o.PubSub.unsubscribe(n),a.reject(e)});return s.callSDKFunction(l.nativeFunction,{functionName:l.NativeAPI.getViewVisibility},l.handleGetViewVisibilitySuccess,l.handleGetViewVisibilityFailure),a.promise()},resetExternalAdViewsIdentifiers:function(){d=[]}}}},{"./ExternalAdViewConstants.js":42}],44:[function(f,e,n){e.exports=function(e,n,t,i,r){var a,o=!1,s=!1;function c(e){s=e}function l(e){o=e}function d(){c(!1),l(!1)}function u(){return s&&!o}return{initExternalContainer:function(){(a=new(f("./ExternalAdViewService.js"))(e,n,t,i,r)).init(),e.PubSub.subscribe("SDKController.AdVisible",function(e){e&&e.productType===t.BN&&l(!0)})},setAdIsLoadedInContainer:c,setAdIsVisibleInContainer:l,resetReportAdVisibilityFlags:d,shouldReportAdVisible:u,checkStatusOfAdView:function(){return a.isExternalAdViewInitiated()},createAdUrlInAdView:function(e,n,t,i){d(),a.loadWithUrl(e,n,t,i)},updateAdInAdView:function(e,n,t,i){d(),a.updateAd(e,n,t,i)},sendMessageToExternalAdView:function(e){a.sendMessage(e)},addExternalAdViewIdAndSetStatus:function(e){a.addExternalAdViewIdAndSetStatus(e)},onExternalViewLoaded:function(n,t){a.getViewVisibility().then(function(e){a.isContainerVisible(e)&&(n(),u()&&t())})},resetExternalAdViewsIdentifiers:function(){a.resetExternalAdViewsIdentifiers()}}}},{"./ExternalAdViewService.js":43}],45:[function(t,e,n){e.exports=function(i,e,n){var r,a,s=t("../OrientationUtils.js")(),o=n.appInfo.orientation.none,c=!1,l={free:n.appInfo.orientation.none,portrait:n.appInfo.orientation.portrait,landscape:n.appInfo.orientation.landscape};function d(e,n,t){c=!1;var i=l[(e||"").toLowerCase()];if(i)return c=!0,i;if(!t)return n;var r,a=s.sharedOrientationBetweenOrientations(t.viewControllerToPresentFrom||t.topMostViewControllerOrientation,t.windowOrientation),o=(r=(a&&0<a.length?s.convertOrientationsArrayToNumber(a):t.windowOrientation).toString(),s.isContainPortrait(r)&&s.isContainLandscape(r)?l.free:s.isContainPortrait(r)?l.portrait:l.landscape);return o!==n&&(c=!0),o}return{init:function(e,n){r=e,a=n.appOrientation,o=d(r,a,n.orientationRestriction)},getOrientation:function(){return o},isAppOrientation:function(e){return o===e},isChangedExternally:function(){return c},updateAppOrientationByNewRestriction:function(e){if(e){var n,t=o;o=d(r,a,e),t!==(n=o)&&i.PubSub.publish("AppOrientationManager.appOrientationChanged",[{appOrientation:n}])}}}}},{"../OrientationUtils.js":30}],46:[function(e,n,t){function i(i,a,e){var o=e||{},n,r,s=!1,c=a.Cache,l={campaignsOnly:"campaignsOnly",globalsOnly:"globalsOnly",globalsAndCampaigns:"globalsAndCampaigns"},t=!1,d=a.jQuery();function u(e){t=e}function f(e,n){return c.cacheAds(o,e,n)}function g(e,n,t){return setTimeout(function(){!0,a.log("Time out in update cache. Fallback to non-precache.",a.LogLevels.error),i.PubSub.publish("PrecacheManager.fallbackToNonPrecache",[{demandSourceName:o.demandSourceName,productType:o.productType}]),p(!1),i.PubSub.publish("Cache.StopCacheUpdate",[{demandSourceName:o.demandSourceName,productType:o.productType}]),u(!1),c.clearCacheByType(o,[]).then(function(){n()}).fail(function(){var e="Error deleting globals in fallback to NPC";a.log(e,a.LogLevels.error),t(e)})},o.nonPrecacheFallback)}function p(e){n=e}function v(t){r=g(s,t.cacheTimeoutSuccessCallback,t.cacheTimeoutFailCallback),u(!0),f(t.applicationKey,t.newAdsToEnterCache).then(function(){a.log("PM | success",a.LogLevels.verbose),clearTimeout(r),s||(a.log("cache update completed",a.LogLevels.verbose),u(!1),i.PubSub.publish("PrecacheManager.cacheAdsSuccessCallback",[o]))},function(e,n){if(clearTimeout(r),!s){u(!1),i.PubSub.publish("PrecacheManager.cacheAdsFailedCallback",[{productType:o.productType,demandSourceName:o.demandSourceName,deletedOffers:n,errorLog:"Error adding new ads from queue, some campaigns were deleted.",cacheParam:e,inventoryId:t.inventoryId}])}})}function m(e){d.extend(o,e),a.log("PM | updateConfig updated config"+JSON.stringify(o),a.LogLevels.verbose)}function b(e){var n=e.numOfCampaigns||0,t=e.settings||{};return m({settings:t}),0<=t.numOfBannersToInitSuccess&&0<n&&0<t.numOfBannersToCache?(t.numOfBannersToCache<t.numOfBannersToInitSuccess&&(t.numOfBannersToInitSuccess=t.numOfBannersToCache),n<t.numOfBannersToInitSuccess&&(t.numOfBannersToInitSuccess=n),n<t.numOfBannersToCache&&(t.numOfBannersToCache=n),p(!0),t.maxCachedCampaigns=o.maxCachedCampaigns,c.setSettings(o,t)):(t.numOfBannersToInitSuccess=t.numOfBannersToCache=0,p(!1)),i.Utils.returnResolvedPromise()}function h(e){return e&&e.cacheBase===o.cacheBase}function S(){i.PubSub.subscribe("Cache.cacheUpdated",function(e){h(e)&&(d.extend(e,o),i.PubSub.publish("PrecacheManager.cacheUpdatedCallback",[e]))}),i.PubSub.subscribe("Cache.campaignDeleted",function(e){h(e)&&(d.extend(e,o),i.PubSub.publish("PrecacheManager.campaignDeletedCallback",[e]))}),i.PubSub.subscribe("Cache.campaignSaved",function(e){h(e)&&(d.extend(e,o),i.PubSub.publish("PrecacheManager.campaignSavedCallback",[e]))}),i.PubSub.subscribe("Cache.campaignDownloadStarted",function(e){h(e)&&(d.extend(e,o),i.PubSub.publish("PrecacheManager.campaignDownloadStartedCallback",[e]))}),i.PubSub.subscribe("Cache.preProcessingFailed",function(e){h(e)&&(d.extend(e,o),i.PubSub.publish("PrecacheManager.preProcessingFailedCallback",[e]))})}function y(){return n}function C(){var e,n,t=new d.Deferred,i=y();function r(e){t.resolve(e)}return o.settings.purgeCacheOnInit?(n="purge cache on init (settings)",e=!0):i||(n="purge cache on non-precache",e=!0),e?(a.log("handleCacheClear purge reason: "+n,a.LogLevels.verbose),c.clearCacheByType(o,[]).then(r.bind(null,l.campaignsOnly),function(){t.reject("Error in clearing cache")})):r(),t.promise()}function A(){y()&&(u(!0),c.cacheNext(o).always(function(){u(!1)}).fail(function(e,n){a.log("line[451]: failed updating cache on cache next with deletedAds: "+n,a.LogLevels.verbose),n&&0<n.length&&i.PubSub.publish("PrecacheManager.cacheNextFail",[{productType:o.productType,demandSourceName:o.demandSourceName,deletedAds:n,inventoryId:n[0].inventoryId}])}))}function D(){return l}function I(){return c.getNextAvailableAd(o)}function w(e){return c.clearCacheByType(o,e)}function L(e,n){return n=i.Utils.isDefined(n)?n:o.settings.numOfBannersToCache,c.mergeCampaigns(e,n,o.settings.maxCachedCampaigns,o)}function P(e,n){return c.areCampaignsAvailable(e,n,o)}function T(){return c.getCacheSizeByType(o)}function O(){return c.incrementNextCampaign(o)}function U(e){return c.getCurrentAd(o,e)}function F(e){return c.isNextAvailable(o,e)}function x(){return c.cacheNext(o)}function N(e,n){return c.setAdInventoryIndex(o,e,n)}function M(e){return c.isAdInCache(o,e)}function k(e){return c.setSettings(o,e)}function B(){S(),c.initCacheBase(o.cacheBase)}function E(e){return c.getAdStatusInQueue(o,e)}function V(e){return c.deleteCachedCampaign(o,e)}function R(e){return c.cacheSingleAd(o,e)}var K={updateConfig:m,init:B,decidePrecacheStatus:b,isPrecache:y,handleCacheClear:C,mergeCampaigns:L,handleCacheAds:v,updateCache:A,clearCacheByType:w,areCampaignsAvailable:P,getCacheSizeByType:T,setAdInventoryIndex:N,incrementNextCampaign:O,getCurrentAd:U,isAdInCache:M,getAdStatusInQueue:E,setCacheSettings:k,getNextAvailableAd:I,isNextAvailable:F,getCacheClearMessages:D,cachingStatus:c.cachingStatus,deleteCachedCampaign:V,cacheSingleAd:R};return K}n.exports=i},{}],47:[function(e,n,t){n.exports=function(t,i){var r={};function a(e){return(i.programmaticDestinationMap[e]||{}).production}function o(e){var n=[];for(var t in e)e.hasOwnProperty(t)&&n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n.join("&")}return r[i.HTTPMethods.GET]=function(e,n){return{url:t.getProtocol()+a(e)+"?"+o(n),method:i.HTTPMethods.GET}},r[i.HTTPMethods.POST]=function(e,n){return{url:t.getProtocol()+a(e),data:o(n),method:i.HTTPMethods.POST}},{build:function(e,n,t){return i.programmaticDestinationMap[n]&&r[e]?r[e](n,t):{}}}}},{}],48:[function(e,n,t){n.exports=function(){var i=e("./SDKPluginTypeConstants.js");return{shouldShowInStandAloneView:function(e){var n=!!e.getApplicationExternalConfig().getGeneralConfig()[i.microJobFlags.showStandaloneViewInAdobe],t=!e.isLegacy(e.featureMap.showStandaloneViewInAdobe)&&n;return e.log("AdobeAirPluginHandler | shouldShowInStandAloneView | useStandAloneView: "+t),t}}}},{"./SDKPluginTypeConstants.js":49}],49:[function(e,n,t){n.exports={supportedPluginNames:{adobeAir:"AdobeAir"},microJobFlags:{showStandaloneViewInAdobe:"showStandaloneViewInAdobe"}}},{}],50:[function(a,e,n){e.exports=function(t){var i=a("./SDKPluginTypeConstants.js");function r(e){return(n=e).applicationSettings&&n.applicationSettings.SDKPluginType&&n.applicationSettings.SDKPluginType===i.supportedPluginNames.adobeAir?(t.log("SDKPluginTypeHandler | createPluginHandler | creating adobe handler"),new(a("./AdobeAirPluginHandler.js"))):(t.log("SDKPluginTypeHandler | createPluginHandler | plugin handler is not required"),null);var n}return{shouldShowInStandAloneView:function(e){t.log("SDKPluginTypeHandler | shouldShowInStandAloneView");var n=r(e);return n&&"function"==typeof n.shouldShowInStandAloneView?n.shouldShowInStandAloneView(t):(t.log("SDKPluginTypeHandler | shouldShowInStandAloneView | "+(n?"function not supported in handler":"no plugin handler")),!1)}}}},{"./AdobeAirPluginHandler.js":48,"./SDKPluginTypeConstants.js":49}],51:[function(e,n,t){n.exports={userData:{ios:"5.1",android:"5.1"},loadIS:{ios:"5.7",android:"5.10"},selfLoadingIS:{ios:"5.19",android:"5.20"},supportImmersive:{ios:"99",android:"5.26"},rvPortraitOrientation:{ios:"5.30",android:"5.30"},MDS:{RewardedVideo:{ios:"5.29",android:"5.29"},Interstitial:{ios:"5.48",android:"5.48"},Banner:{ios:"5.51",android:"5.51"}},nativeHttpEngine:{ios:"5.36",android:"99"},translucent:{ios:"99",android:"5.37"},hybrid:{ios:"5.40",android:"99"},supportOrientation:{ios:"5.39",android:"99"},androidIsVersion:{ios:"99",android:"5.39"},postAdEventNotification:{ios:"5.43",android:"5.43"},MOAT:{ios:"5.46",android:"5.46"},sValue:{ios:"99",android:"5.29"},demandState:{ios:"5.47",android:"5.47"},ringerSwitch:{ios:"5.48",android:"99"},appOrientationRestrictions:{ios:"5.50",android:"99"},GDPRSupport:{ios:"5.51",android:"5.51"},adCloseCB:{ios:"5.51",android:"99"},rewardedAdInitLoadShow:{ios:"99",android:"99"},showStandaloneViewInAdobe:{ios:"5.54",android:"99"}}},{}],52:[function(e,n,t){var u={ext:{clickTags:{backgroundLandscape:"",backgroundPortrait:""},videoData:{videoPoster:"",videoSource:{videoformat_mp4:""}},appData:{appIcon:"",appImages:{both:[],portrait:[],landscape:[]}}}},f={ext:{videoData:{videoSource:{vast:""}}}},g={ext:{vastData:{xmlResponse:""}}},p={ext:{videoData:{videoPoster:"",videoSource:{videoformat_mp4:""}},appData:{appIcon:{url:""},appImages:[{url:""}]},imageData:{landscape:"",portrait:""}}},v={ext:{imageData:{landscape:"",portrait:""},layoutData:{portrait:{closeButtonUrl:"",frameUrl:""},landscape:{closeButtonUrl:"",frameUrl:""}}}},m={ext:{videoData:{videoPoster:"",videoSource:{videoformat_mp4:""}},layoutData:{html:""}}},b={ext:{videoData:{videoSource:{videoformat_mp4:""}},clickTags:{backgroundLandscape:""}}},h={ext:{videoData:{videoSource:{html:""}}}},S={ext:{videoData:{videoSource:{videoformat_mp4:""}},appData:{appIcon:""}}},y={ext:{videoData:{videoPoster:"",videoSource:{videoformat_mp4:""}},imageData:{landscape:"",portrait:""},layoutData:{portrait:{closeButtonUrl:"",frameUrl:""},landscape:{closeButtonUrl:"",frameUrl:""}}}};n.exports=function(){var s=function(e,n){return n+e.split("/").pop()},r=function(e,n){for(var a=[],t=Object.keys(n),i=0;i<t.length;i++)e[t[i]]&&o(n[t[i]],e[t[i]]);function o(e,n){var t,i;if("string"==typeof e)a.push(n);else if(e instanceof Array&&0===e.length)a=a.concat(n);else if(e instanceof Array&&0<e.length&&n instanceof Array&&0<n.length)for(t=0;t<n.length;t++)for(i=0;i<e.length;i++)o(e[i],n[t]);else{var r=Object.keys(e);for(t=0;t<r.length;t++)n[r[t]]&&o(e[r[t]],n[r[t]])}}return a};function o(e){return!!e.src&&e.src}function c(e){var n,t=r(e,d(e)),i=0<t.length&&t[0];return!!i&&((n=document.createElement("div")).innerHTML=i,n.firstChild)}function l(e){return e.ext&&e.ext.ableToCache}function i(e){return e&&e.type&&"playableAd"===e.type}function a(e){return e.ext.videoData&&e.ext.videoData.videoSource&&e.ext.videoData.videoSource.videoformat_mp4}function d(e){if(e.ext)return e.ext.layoutData?e.ext.layoutData.portrait&&e.ext.layoutData.landscape?a(e)?y:v:m:e.ext.appData&&e.ext.appData.appImages&&Array.isArray(e.ext.appData.appImages)?p:e.ext.clickTags&&e.ext.clickTags.backgroundLandscape&&e.ext.videoData.videoformat_mp4?b:i((t=e).ext)&&t.ext.videoData&&t.ext.videoData.videoSource&&t.ext.videoData.videoSource.html?h:a(n=e)&&n.ext.appData&&n.ext.appData.appIcon&&!n.ext.appData.appImages?S:u;var n,t}return{extractStaticFiles:function(e,n){return e.ext&&i(e.ext)?function(e,n){var t=[];if(n&&l(e)){var i=c(e);if(!i)return t;var r=o(i);if(r){t.push(r);var a=function(e){var n,t=[];if(n=e.getAttribute("data-assets"))try{t=(t=JSON.parse(n))&&t.assets?t.assets:[]}catch(e){}return t}(i);a&&0<a.length&&(t=t.concat(a))}}return t}(e,n):r(e,d(e))},extractVastSource:function(e){var n=e.ext&&e.ext.vastData&&e.ext.vastData.xmlResponse?g:f;return r(e,n)},updateAdunitPrecachePath:function(e,n,t){return e.ext&&i(e.ext)?function(e,n){var t=c(e),i=o(t);if(l(e)&&i&&t){var r=s(i,n);t.src=r,e.ext.videoData.videoSource.html=t.outerHTML}}(e,n):function(e,a,n){for(var t=Object.keys(n),i=0;i<t.length;i++)e[t[i]]&&(e[t[i]]=o(n[t[i]],e[t[i]]));function o(e,n){var t,i;if("string"==typeof e||"string"==typeof n)n=s(n,a);else if(e instanceof Array&&0===e.length)for(t=0;t<n.length;t++)n[t]=s(n[t],a);else if(e instanceof Array&&0<e.length&&n instanceof Array&&0<n.length)for(t=0;t<n.length;t++)for(i=0;i<e.length;i++)n[t]=o(e[i],n[t]);else{var r=Object.keys(e);for(t=0;t<r.length;t++)n[r[t]]&&(n[r[t]]=o(e[r[t]],n[r[t]]))}return n}return e}(e,n,d(e))},getPlayableCacheFlag:function(){return"isPrecacheable"},isAdAbleToCache:l}}},{}],53:[function(e,n,t){n.exports={adunitFilesMapping:{js:"main.min.js",css:"main.min.css",html:"adUnit.min.html"},environment:{develop:"dev",production:"prod",stage:"stage"},adunitAssetsJsonKeys:{html:"html",js:"js",css:"css",sprite:"sprite",BC:"BrandConnect",libs:"libs",graphicAssets:"graphicAssets",adunitVersion:"adunitVersion"},adunitVersionKey:"adunitVersion",adunitLibsFileName:"adunitLibsFile",failedDownloading:"Failed downloading adunitStaticAssets.json",apiResponseTimeout:15e3}},{}],54:[function(e,n,t){n.exports=function(e,n,t,i,r){var a=e||{},o=n||{},s=t&&t.debug,c=t&&t.domain,l=t&&t.scdn,d=t&&t.protocol,u=t&&t.adunitConfig,f=i,g=r||{};function p(){return d+"//"+function(){if(s&&0<parseInt(s)&&"www.supersonicads.com"!==c){var e=c.split(".")[0];return c+"/users/staging/"+e}return l}()+"/adunit/dist/adunitAssets.json"}function v(){return o.ajax({dataType:"json",url:p(),timeout:g.apiResponseTimeout}).then(function(e,n,t){if(e&&(e.libs&&e.libs.adunitVersion||e.adunitVersion))return e;var i=o.Deferred();return i.reject(g.failedDownloading),i.promise()},function(e,n,t){return g.failedDownloading})}function m(e){var n=o.extend(!0,e,u);return a.Utils.returnResolvedPromise(n)}return{getGlobalAssetsJSON:function(){return f===g.environment.develop?v():u&&u.hasOwnProperty(g.adunitAssetsJsonKeys.adunitVersion)&&null!==u.adunitVersion&&u.libs&&(u.graphicAssets||u.libs.graphicAssets)?a.Utils.returnResolvedPromise(u):v().then(m)},setProtocol:function(e){d=e}}}},{}],55:[function(j,e,n){function t(o){var l,d,u,f,g,p,v,m,b,h,S,y,i,r,a,s,c,C,A,D,I,w=j("./AdUnitConst.js");function L(){var e=u+"//",n="/adunit/dist",t=s?"/versions/"+s:"";if(l&&0<parseInt(l)&&"www.supersonicads.com"!==d){var i=d.split(".")[0],r="/stage/";"local"===i&&(r="/dev/"),e=e+d+("/users/staging/"+i)+n+t+r}else e=e+f+n+t+"/prod/";return e}function P(){var e=m.getCacheByType({cacheBase:"globals"});return e&&e.cache||[]}function T(e,n){return m.cacheGlobalAssets(e,n)}function O(){return"../"+b+"/globals/"}function U(){return m.getAppData().then(function(e){return(e=e||{})[w.adunitVersionKey]=s,m.setAppData(e)}).always(p.Utils.returnResolvedPromise)}function F(){return m.clearCacheByType({cacheBase:"globals"},[])}function x(){return g===o.environment.develop?p.Utils.returnResolvedPromise(!0):function(){var e=P();if(e.length<=0||function(e){for(var n=0;n<e.length;n++){var t=e[n].split("."),i=t[t.length-1];if(w.adunitFilesMapping.hasOwnProperty(i)&&e[n]!==w.adunitFilesMapping[i])return!0}return!1}(e))return p.Utils.returnResolvedPromise(!0);return m.getAppData().then(function(e){e=e||{};var n=p.Utils.versionCompare(s,e[w.adunitVersionKey]?e[w.adunitVersionKey]:"0");return p.Utils.returnResolvedPromise(0===n)}).then(function(e){var n=e&&function(){var e=P(),n=w.adunitFilesMapping;for(var t in n)if(-1==e.indexOf(n[t]))return!1;return!0}();return p.Utils.returnResolvedPromise(!n)}).fail(function(){return p.Utils.returnResolvedPromise(!0)})}()}function N(e){var n=v.extend(!0,{},e);return n[o.BC]&&(v.extend(n,n[o.BC]),delete n[o.BC]),n}function M(e){var n=v.extend(!0,{},e);return n[o.BC]&&delete n[o.BC],n}function k(e,n){var t={};switch(delete n[o.libs],e){case o.RV:case o.BC:t=N(n);break;case o.IS:t=M(n)}return t}function B(e,n){var a=L(),t=k(o.BC,e);return v.map(t,function(e){var n=/(\.\.\/)/g,t=e.match(n),i=t&&t.length||0;if(e=e.replace(n,""),0<i){var r=a.split("/");return r.splice(r.length-1-i,i),r.join("/")+e}return a+e})}function E(e){s=e.adunitVersion?e.adunitVersion:e.libs.adunitVersion}function V(e){var n,t,i,r=v.extend({},w.adunitFilesMapping,e);return t=e,i="../../",(n=r).sprite=i+t.sprite,n[o.BC]=R(t[o.BC],i),n.libs=R(t.libs,i),r=n}function R(e,n){for(var t in e)e.hasOwnProperty(t)&&"string"==typeof e[t]&&(e[t]=n+e[t]);return e}function K(e){return I.prefetchGlobalAssetsToBrowser(e,L())}return{init:function(e,n,t,i,r,a,o,s,c){e,l=n.debug,d=n.domain,u=n.protocol,f=n.scdn,v=t,m=i,b=r,h=a,S=o,g=s,p=c,y=new(j("./AdUnitDataJsonFetcher.js"))(p,v,n,g,w),I=new(j("./AdUnitUtils.js"))(p,v,w),D=new(j("./AdUnitGraphicAssetsManager.js"))(p,I,m)},setProtocol:function(e){u=e,y.setProtocol(e)},getStaticGlobalsUrl:L,getGlobalAssetsJSON:function(){return y.getGlobalAssetsJSON()},getRVAssetsFromJSON:N,getISAssetsFromJSON:M,getAssetsFromJSONByProductType:k,prefetchGlobalAssetsToBrowser:K,getGlobalsCache:P,isAdunitVersionChanged:function(t){var e=P(),i=!0;return v.each(e,function(e,n){return-1<n.indexOf(t)&&(i=!1),i}),i},clearGlobalsCache:F,getLocalGlobalsFolder:O,cacheGlobalAssets:T,assetsToCache:B,updateAdUnitGlobals:function(n,e,t){if(n){if(C&&"rejected"!==C.state())return C.promise();C=v.Deferred()}else{if(c&&"rejected"!==c.state())return c.promise();c=v.Deferred()}return A&&"rejected"!==A.state()||(A=y.getGlobalAssetsJSON().then(function(e){var n,t;E(i=e),i=V(i),r=w.adunitFilesMapping,n=i.graphicAssets?i.graphicAssets:i.libs.graphicAssets,D.setAdunitAssetsPaths(n,L()),a=i.libs,S.setLibsFilesPaths(a,L()),t=L()+w.adunitFilesMapping.html,h.setRemoteAdunitUrl(t),h.setLocalAdunitUrlFromCache(O(),P())}).then(function(){return n?S.manageDownloadLibsFileByFiletype(w.adunitLibsFileName,e):K({adunitLibsFile:a.adunitLibsFile})}).fail(function(e){n?C.reject(e):c.reject(e)})),A.then(function(){return n?(e=t,D.shouldUpdateAdunitAssets()?D.precacheAdunitGraphicAssets(e):p.Utils.returnResolvedPromise()).then(null,function(){C.reject("Failed to download adunit graphic assets")}).then(x).then(function(e){return e?F().then(function(e,n){return T(B(e),n).then(function(){h.setLocalAdunitUrl(O()+h.getRemoteAdunitFileName())},function(){return h.setLocalAdunitUrl(h.getRemoteAdunitUrl()),"Failed to retrieve Adunit url"}).then(U)}.bind(null,r,t)).then(function(){C.resolve()},function(e){C.reject(e)}).always(function(){return C.promise()}):(C.resolve(),C.promise())}):K(r).then(D.prefetchAdunitGraphicAssets).then(function(){c.resolve()},function(e){c.reject(e)}).always(function(){return c.promise()});var e})},setAdunitVersion:E,getAdunitGlobalsHTML:function(){return w.adunitFilesMapping.html},updateGlobalAssetsStructure:V,isUsingAdunitGraphicAssetsCacheFolder:function(){return!0}}}var i;e.exports=function(e,n){return n?new t(e):(i||(i=new t(e)),i)}},{"./AdUnitConst.js":53,"./AdUnitDataJsonFetcher.js":54,"./AdUnitGraphicAssetsManager.js":56,"./AdUnitUtils.js":58}],56:[function(e,n,t){n.exports=function(e,n,t){var r,a=t||{},o=n||{},s={},i={},c="graphicAssets";function l(){var e=a.getCacheByType({cacheBase:c});return e&&e.cache||[]}return{setAdunitAssetsPaths:function(e,n){s=e,r=n,i.sprite=s.sprite},shouldUpdateAdunitAssets:function(){if(0===l().length)return!0;for(var e in s)if(!a.isAssetInCache(o.extractFileNameFromPath(s[e]),c))return!0;return!1},precacheAdunitGraphicAssets:function(e){return(n=function(){for(var e=l(),n=[],t=function(e){for(var n in s)if(o.extractFileNameFromPath(s[n])===e)return!1;return!0},i=0;i<e.length;i++)t(e[i])&&n.push(e[i]);return n}(),a.deleteCachedListOfAssets(c,n)).then(a.cacheGraphicAssets.bind(null,function(){var e=[];for(var n in s){var t=o.extractFileNameFromPath(s[n]);if(!a.isAssetInCache(t,c)){var i=o.formatAssetsUrlForCache(s[n],r);e.push(i)}}return e}(),e));var n},prefetchAdunitGraphicAssets:function(){return o.prefetchGlobalAssetsToBrowser(i,r)}}}},{}],57:[function(S,e,n){function t(e){var a=e||{},n={dapi:"dapi",externalObfuscation:"externalObfuscation",adunitLibsFile:"adunitLibsFile"},o={dapi:{filename:"dapi.js",type:n.dapi,cacheKeyName:"dapiVersion"},externalObfuscation:{filename:"obfuscateV2.html",type:n.externalObfuscation,cacheKeyName:"externalObfuscation"},adunitLibsFile:{filename:"adunitLibs.min.js",type:n.adunitLibsFile,cacheKeyName:"adunitLibsFile"}},s="libs",c,l,d,i,r;function u(e,n){if(!o[e])return!1;o[e].url=i.formatAssetsUrlForCache(n,r),o[e].newVersion=i.extractFileVersionFromUrl(n)}function f(e){return c.isAssetInCache(e,s)?c.deleteCachedAsset(s,e):a.returnResolvedPromise()}function g(e,n){return 0===a.versionCompare(e,n)}function p(e,n){var t=o[e],i={};return!!t&&(i[t.cacheKeyName]=n,i)}function t(e,n,t){d=e,l=n,c=t||{},i=new(S("./AdUnitUtils.js"))(l,c)}function v(e,n){if(r=n,e)for(var t in e)u(t,e[t])}function m(e,t){var i=o[e]||{},r=function(){return f(i.filename).then(function(){return d.log("AdUnitLibsManager | updateFileInCache | going to download",d.LogLevels.verbose),c.cacheLibsAsset(i.url).then(null,function(){return a.returnResolvedPromise()})}).fail(function(){return a.returnResolvedPromise()})};return c.getAppData().then(function(e){e=e||{},i.savedVersion=e&&e[i.cacheKeyName]?e[i.cacheKeyName]:"0";var n=!g(i.newVersion,i.savedVersion);return t||n?r().then(function(e){d.log("AdUnitLibsManager | updateFileVersion | appData "+JSON.stringify(e),d.LogLevels.verbose);var n=l.extend(e,p(i.type,i.newVersion));return d.log("AdUnitLibsManager | updateFileVersion | updatedData "+JSON.stringify(n),d.LogLevels.verbose),c.setAppData(n).fail(function(){return a.returnResolvedPromise()})}.bind(null,e)):c.isAssetInCache(i.filename,s)?(d.log("AdUnitLibsManager | manageDownloadLibsFileByFiletype | file version is updated and file is already in cache",d.LogLevels.verbose),a.returnResolvedPromise()):(d.log("AdUnitLibsManager | manageDownloadLibsFileByFiletype  | file version updated but file is not in cache - download it again",d.LogLevels.verbose),c.cacheLibsAsset(i.url))},r).then(function(){return d.log("AdUnitLibsManager | manageDownloadLibsFileByFiletype  | success to download file "+i.url,d.LogLevels.verbose),a.returnResolvedPromise("success")},function(){return d.log("AdUnitLibsManager | manageDownloadLibsFileByFiletype  | failed to download file "+i.url,d.LogLevels.verbose),b(i)})}function b(e){return e.filename===o.adunitLibsFile.filename?a.returnRejectedPromise("Failed to download file "+e.filename):a.returnResolvedPromise()}var h={init:t,setLibsFilesPaths:v,manageDownloadLibsFileByFiletype:m};return h}e.exports=t},{"./AdUnitUtils.js":58}],58:[function(e,n,t){n.exports=function(e,n,t){var p=n||{},v=t||{};return{formatAssetsUrlForCache:function(e,n){var t=n,i=function(e,n){var t=/(\.\.\/)/g,i=n.match(t),r=i&&i.length||0;if(n=n.replace(t,""),0<r){var a=e.split("/");return a.splice(a.length-1-r,r),a.join("/")+n}return e+n};return"string"==typeof e?i(t,e):p.map(e,function(e){i(t,e)})},prefetchGlobalAssetsToBrowser:function(e,n,t,i){var r,a,o=new p.Deferred,s=[],c=0,l=0,d=p.extend(!0,{},e);d.hasOwnProperty(v.adunitAssetsJsonKeys.BC)&&(p.extend(d,d[v.adunitAssetsJsonKeys.BC]),delete d[v.adunitAssetsJsonKeys.BC]),d.hasOwnProperty(v.adunitAssetsJsonKeys.html)&&delete d.html;var u=function(e){return-1<s.indexOf(e)};p.each(d,function(e,n){"string"==typeof n?u(n)||l++:delete d[e]}),0===l&&o.resolve();var f=function(e){var n;if(u(n=e)||s.push(n),++c===l){if("function"==typeof t&&t(s),r)return;clearTimeout(a),o.resolve()}},g=n;return p.each(d,function(e,i){if(!u(i)){var n=g+i;p.get(n,{},null,{dataType:"text"}).done(function(){f(i)}).fail(function(e,n,t){"parsererror"===n&&f(i)})}}),a=setTimeout(function(){c<l&&("function"==typeof i&&i(),o.reject("Failed to preload all global assets ("+c+" out of "+l+" succeeded)")),r=!0},15e3),o.promise()},extractFileVersionFromUrl:function(e){var n=e.split("/");return 0<n.length?n[n.length-2]:"0"},extractFileNameFromPath:function(e){return e.replace(/^.*[\\\/]/,"")}}}},{}],59:[function(e,n,t){function i(e){var n,t,r=function(){return n},i=function(e){n=e},a=function(){var e=null;return n&&(e=n.replace(/^.*[\\\/]/,"")),e},o=function(){return t},s=function(e){t=e},c=function(e,n,t){var i=e?o():r();return i+=n&&n.productType?"#?productType="+n.productType:"",i+=n&&n.demandSourceName?"&demandSourceName="+n.demandSourceName:"",i+=t&&t.shouldBuildAdUnitUrlForExternal?"&mode=native&viewType=external":"",i+=t&&t.isVersionedAdunit?"&isVersionedAdunit=true":"",i+=t&&t.isUsingAdunitGraphicAssetsCacheFolder?"&isUsingAdunitGraphicAssetsCacheFolder=true":""},l=function(t,e){jQuery.each(e,function(e,n){if("string"==typeof n&&n.match(/.*\.html/))return s(t+n.replace(/^.*[\\\/]/,"")),!1})},d={getAdunitUrl:c,getRemoteAdunitUrl:r,setRemoteAdunitUrl:i,getRemoteAdunitFileName:a,getLocalAdunitUrl:o,setLocalAdunitUrl:s,setLocalAdunitUrlFromCache:l};return d}n.exports=i},{}],60:[function(e,n,t){n.exports={NativeAPI:{adClicked:"adClicked",readyForBid:"readyForBid"},ControllerCallbacks:{cacheReady:".CacheReady",allOffersVast:".AllOffersVast",noMoreOffers:".NoMoreOffers",failedToShow:".failedToShow",failedToLoad:".failedToLoad",fallbackToNonPrecache:".fallbackToNonPrecache",actionClick:".ActionClick",exhaustedDemandSource:".exhaustedDemandSource",onAdWindowsClosed:".onAdWindowsClosed",readyForBid:".readyForBid",payloadUpdated:".payloadUpdated"},AdUnitCallbacks:{adClicked:"SDKController.AdClicked",adVisible:"SDKController.AdVisible",engageEnd:"SDKController.engageEnd"}}},{}],61:[function(e,n,t){n.exports=function(e,n){return{NativeAPI:{init:".initBanner",load:".loadBanner",show:".bannerViewVisible"},ControllerCallbacks:{reset:".reset",isVisible:".isVisible",isInitiated:".isInitiated",cacheReady:".CacheReady",failedToShow:".failedToShow",failedToLoad:".failedToLoad",actionClick:".ActionClick",exhaustedDemandSource:".exhaustedDemandSource",onAdWindowsClosed:".onAdWindowsClosed",noMoreOffers:".NoMoreOffers"},AdUnitCallbacks:{adClicked:"SDKController.AdClicked",adVisible:"SDKController.AdVisible",engageEnd:"SDKController.engageEnd"},ControllerNativeAPI:{adClicked:"adClicked"},ProductName:"Banner",Features:{allowMultiInitCalls:!0,forceNewFeedOnAdClose:!1,allowReloadDuringShow:!0,displayOnAdReady:!0},gatewayDestinationMap:{prod:n.gatewayDestinationMap.BN.production},amountOfInventories:2,shouldResetOnEngageEnd:!0,shouldAvoidHandleFrameClose:!0,allowConsecutiveGatewayRequestsDuringLoad:!1}}},{}],62:[function(o,e,n){e.exports=function(i,r){var a=o("../components/Constants.js");return{create:function(){var e=o("./ProductAdapter.js"),n=o("./AdapterSharedConfig.js"),t=o("./Banner/BannerConfiguration.js")(n,a);return new e(i,r,t,a)}}}},{"../components/Constants.js":7,"./AdapterSharedConfig.js":60,"./Banner/BannerConfiguration.js":61,"./ProductAdapter.js":76}],63:[function(e,n,t){function i(b,h){var S="NativeCallback",y="globals",C="graphicAssets",t=!1,m={},A={mraid:{cache:[]},globals:{cache:[],cacheQueue:[]},BrandConnect:{cache:[],currentAd:0,cacheQueue:[],evaluatedCache:[]},Interstitial:{cache:[],currentAd:0,cacheQueue:[],evaluatedCache:[]},assets:{cache:[],cacheQueue:[]},libs:{cache:[],cacheQueue:[]},graphicAssets:{cache:[],cacheQueue:[]}},D={BrandConnect:{numOfBannersToCache:1},Interstitial:{numOfBannersToCache:1}},I;function o(e){return A[e.cacheBase].currentUser?b.Utils.returnResolvedPromise():h.setFixedUserIdForCache(e.productType).then(function(){A[e.cacheBase].currentUser=h.getFixedUserIdForCache()})}var n=function(e){return 0!==A[e.cacheBase].cache.length?(A[e.cacheBase].currentAd+1)%A[e.cacheBase].cache.length:0},i=function(i){i=i||{},jQuery.each(A,function(e,n){var t=e;A[t].cache&&0!==A[t].cache.length&&b.Utils.isDefined(i)&&i.hasOwnProperty(t)&&A[t].cache.sort(function(e,n){return i[t].indexOf(e.id)<i[t].indexOf(n.id)?-1:1})})},w=function(e){var n,t=e.length;for(n=0;n<t;n++)b.Utils.isDefined(e[n])&&e[n]&&b.PubSub.unsubscribe(e[n])},r=function(e){h.log("cache: "+JSON.stringify(A[e].cache)+" currentAd: "+A[e].currentAd,h.LogLevels.info),h.log("queue: "+JSON.stringify(A[e].cacheQueue),h.LogLevels.info)},L=function(e,n){var t,i=null,r=A[e.cacheBase].cacheQueue.length;for(t=0;t<r;t++)if(A[e.cacheBase].cacheQueue[t].cachingStatus===n){i=A[e.cacheBase].cacheQueue[t];break}return i},P=function(e,n){return e.cacheBase+"/"+n},T=function(e,n){var t=jQuery.map(A[e.cacheBase].evaluatedCache,function(e){return h.AdUtils.getAdId(e)});if(0<t.length){var i=t.indexOf(n.toString());0<=i&&(h.log("Removing ad from evaluatedCache! "+n,h.LogLevels.verbose),A[e.cacheBase].evaluatedCache.splice(i,1))}},O=function(e,n){var t=h.AdUtils.getAdId(n);if(n&&t){var i,r=A[e.cacheBase].cacheQueue.length;for(i=0;i<r;i++)A[e.cacheBase].cacheQueue[i].id==t&&(A[e.cacheBase].cacheQueue[i]=n)}},U=function(t,e){var i=-1;jQuery.each(A[e.cacheBase].cache,function(e,n){return!(b.Utils.isDefined(n.inventoryIndex)&&n.inventoryIndex>t.inventoryIndex||!b.Utils.isDefined(n.inventoryIndex))||(i=e,!1)}),-1===i?A[e.cacheBase].cache.push(t):A[e.cacheBase].cache.splice(i,0,t);var n={};n.cacheBase=e.cacheBase,n.id=t.id,n.inventoryId=t.inventoryId,b.PubSub.publish("Cache.campaignSaved",[n])},F=function(t){jQuery.each(A[t.cacheBase].cacheQueue,function(e,n){if(n.cachingStatus===I.cachingStatus.none&&0===jQuery.grep(A[t.cacheBase].cache,function(e){return h.AdUtils.getAdId(e)===h.AdUtils.getAdId(n)}).length&&0===jQuery.grep(A[t.cacheBase].evaluatedCache,function(e){return h.AdUtils.getAdId(e)===h.AdUtils.getAdId(n)}).length)return A[t.cacheBase].evaluatedCache.push(n),!1})},a=function(e,n){var t=jQuery.map(A[e.cacheBase].cache,function(e){return h.AdUtils.getAdId(e)});if(0<t.length){var i=t.indexOf(n.toString());0<=i&&(h.log("Removing ad from cache array! "+n,h.LogLevels.verbose),A[e.cacheBase].cache.splice(i,1))}},s=function(i,r){return h.getGlobalAppData().then(function(e){e.cachePriorityArray=e.cachePriorityArray||{};var n=e.cachePriorityArray[i.cacheBase];if(n){var t=n.indexOf(r.toString());0<=t&&(h.log("Removing ad from cache array! "+r,h.LogLevels.verbose),n.splice(t,1),e.cachePriorityArray=n)}return h.setGlobalAppData(e)})};function c(o){A[o.cacheBase].evaluatedCache.length;var n,e,t,a,i=A[o.cacheBase].cacheQueue.length,r=(D[o.cacheBase].numOfBannersToCache,null),s=null,c=null,l=null,d=null,u=[],f=[];for(t=jQuery.Deferred(),e=0;e<i;e++)A[o.cacheBase].cacheQueue[e].cachingStatus!==I.cachingStatus.pending&&A[o.cacheBase].cacheQueue[e].cachingStatus!==I.cachingStatus.queued||0;var g=function(){0<A[o.cacheBase].evaluatedCache.length?(h.log("line[182]: evaluatedCache is: "+JSON.stringify(A[o.cacheBase].evaluatedCache),h.LogLevels.verbose),(n=L(o,I.cachingStatus.none))?(n.cachingStatus=I.cachingStatus.pending,T(o,h.AdUtils.getAdId(n)),n.numOfAssetsCached=0,m[o.cacheBase][n.id]=[],f.push(h.AdUtils.getAdId(n)),n.preProcessing().then(function(e){if(!b.Utils.isDefined(e))return b.Utils.returnResolvedPromise();n=q(e),O(o,n)},function(){var e={};e.cacheBase=o.cacheBase,e.id=h.AdUtils.getAdId(n),e.inventoryId=n.inventoryId,b.PubSub.publish("Cache.preProcessingFailed",[e]),u.push(e.id),t.reject(A[o.cacheBase].cache,u)}).then(function(){var e={};e.cacheBase=o.cacheBase,e.id=n.id,b.PubSub.publish("Cache.campaignDownloadStarted",[e]),0===n.assets.length?v(o,h.AdUtils.getAdId(n)):(h.log("campaign "+n.id+" download started",h.LogLevels.info),h.cacheAdUnitAssets(P(o,n.id),n))}),0):(w([r,s,d,c,l]),0===u.length?t.resolve(A[o.cacheBase].cache):t.reject(A[o.cacheBase].cache,u))):(L(o,I.cachingStatus.pending)&&h.log("cache is full but we're waiting for a campaign to finish downloading (probably the last)",h.LogLevels.verbose),w([r,s,d,c,l]),0===u.length?t.resolve(A[o.cacheBase].cache):t.reject(A[o.cacheBase].cache,u))},p=function(e){w([c,l]),e&&(0,g())},v=function(e,n,t){var i,r=[];(i=k(e,n))&&i.id&&m[e.cacheBase][i.id].length===i.assets.length&&(h.log("campaign "+i.id+" download finished!",h.LogLevels.info),a=B(m[e.cacheBase][i.id],function(e){return e.status}),0===i.assets.length&&(a=!0),delete m[e.cacheBase][i.id],a?(i.cachingStatus=I.cachingStatus.queued,0<=A[e.cacheBase].evaluatedCache.length?(M(e,i.id,!1),i.numOfAssetsCached=i.assets.length,U(i,e),r=A[e.cacheBase].cache.map(function(e){return h.AdUtils.getAdId(e)}),b.PubSub.publish("Cache.cacheUpdated",[e,{inventoryId:i.inventoryId}])):h.log("Cache full, could not enter new ad",h.LogLevels.error),0<r.length?(h.log("mappedAds after 'handleCachedAd/pushNewCachedAd' "+r,h.LogLevels.verbose),h.setCachePriorityArrayKey(e,r).always(function(){g()})):g()):(M(e,n,!1),F(e),c=b.PubSub.subscribe(S+".deleteFolderFailed",function(e){h.log("in delete failure from cache next",h.LogLevels.verbose),h.checkRequiredCallbackParams(["path"],e,"deleteFolderFailed").didSucceed&&(h.log("deleting folder failed: "+JSON.stringify(e),h.LogLevels.error),b.Utils.isDefined(e.errCode)&&1==e.errCode?p(!0):p(!1))}),l=b.PubSub.subscribe(S+".deleteFolderSuccess",function(e){h.log("in delete success from cache next",h.LogLevels.verbose),h.checkRequiredCallbackParams(["path"],e,"deleteFolderSuccess").didSucceed&&(h.log("deleting folder success: "+JSON.stringify(e),h.LogLevels.info),p(!0))}),u.push(i.id),h.deleteFolder(t)))};return r=b.PubSub.subscribe(S+".assetCached",function(e,n,t){if(h.checkRequiredCallbackParams(["path","file"],e,"assetCached",t).didSucceed){var i,r=x(e.path),a=decodeURIComponent(e.path);-1!==jQuery.inArray(r.id,f)?b.Utils.isDefined(m[r.type][r.id])&&r.type===o.cacheBase?(h.log("asset cached success: "+r.id+"/"+e.file,h.LogLevels.verbose),m[r.type][r.id].push({file:e.file,status:!0}),i={cacheBase:r.type},k(i,r.id).numOfAssetsCached++,v(i,r.id,a)):h.log("Exiting asset cached. folder:"+r.id+" responses array:"+JSON.stringify(m),h.LogLevels.error):h.log("ad is not recognised in this scope: "+r.id+" adForCaching:"+f,h.LogLevels.info)}}),s=b.PubSub.subscribe(S+".assetCachedFailed",function(e,n,t){if(h.checkRequiredCallbackParams(["path","file"],e,"assetCachedFailed",t).didSucceed){var i,r=x(e.path),a=decodeURIComponent(e.path);-1!==jQuery.inArray(r.id,f)&&(b.Utils.isDefined(m[r.type][r.id])&&r.type===o.cacheBase?(m[o.cacheBase][r.id].push({file:e.file,status:!1}),h.log("asset cached failed: "+r.id+"/"+e.file+" with error: "+e.errMsg,h.LogLevels.error),i={cacheBase:r.type},v(i,r.id,a)):h.log("Exiting asset cached failed. folder:"+r.id+" responses array:"+JSON.stringify(m),h.LogLevels.error))}}),d=b.PubSub.subscribe(S+".preCacheFileFail",function(e,n,t){if(h.checkRequiredCallbackParams(["path","file"],e,"preCacheFileFail",t).didSucceed){var i,r=x(e.path),a=decodeURIComponent(e.path);-1!==jQuery.inArray(r.id,f)&&(b.Utils.isDefined(m[r.type][r.id])&&r.type===o.cacheBase?(m[r.type][r.id].push({file:e.file,status:!1}),h.log("pre cache file fail: "+e.file+" with error: "+e.errMsg,h.LogLevels.error),i={cacheBase:r.type},v(i,r.id,a)):h.log("Exiting preCache file fail. folder:"+r.id+" responses array:"+JSON.stringify(m),h.LogLevels.error))}}),g(),t.promise()}var l=function(e){return parseInt(e)},d=function(e){var n;try{n=parseInt(e)}catch(e){n=0}return n},u=function(e,n){var t,i;for(t in n)if(n.hasOwnProperty(t)){if("userUniqueId"===t||"applicationUserId"===t){e.currentUser=n[t];continue}if("applicationKey"===t){e.currentAppKey=n[t];continue}if("files"===t){e.cache=n[t];continue}if(l(t)){e.cache.push({id:t,numOfAssetsCached:b.Utils.isDefined(n[t].files)?n[t].files.length:0,lastUpdateTime:b.Utils.isDefined(n[t].lastUpdateTime)?d(n[t].lastUpdateTime):0,assets:b.Utils.isDefined(n[t].files)?n[t].files:[]});continue}if("lastUpdateTime"===t)return;i=h.isRootFolder(t)?e:(I.initCacheBase(t),e[t]),u(i,n[t])}},f=function(e){b.Utils.isDefined(e)&&e&&e!=={}?u(A,e):A={mraid:{cache:[]},globals:{cache:[],cacheQueue:[]},BrandConnect:{cache:[],currentAd:0,cacheQueue:[]},RewardedVideo_Premium:{cache:[],currentAd:0,cacheQueue:[]},RewardedVideo_Direct:{cache:[],currentAd:0,cacheQueue:[]},Interstitial:{cache:[],currentAd:0,cacheQueue:[]},assets:{cache:[],cacheQueue:[]},libs:{cache:[],cacheQueue:[]}}},x=function(e){var n=decodeURIComponent(e).split("/");return{type:n[0],id:b.Utils.isDefined(n[1])?n[1]:null}},g=function(e){var n=e.split("#");return 1<n.length?n[n.length-1]:(n=e.split("/"))[n.length-1]},N=function(e,n){var t,i=-1,r=g(n),a=e.length;for(t=0;t<a;t++)if(g(e[t])===r){i=t;break}return i},M=function(e,n,t){var i,r=A[e.cacheBase].cacheQueue,a=[],o=!1;for(i=0;i<A[e.cacheBase].cacheQueue.length;i++)r[i].id!=n?a.push(r[i]):(o&&!t&&a.push(r[i]),o=!0);A[e.cacheBase].cacheQueue=a},p=function(i,e){var n,t,r,a,o=0,s=A[i.cacheBase].cache.length,c=[],l=[],d=jQuery.Deferred(),u=function(e,n){-1!==jQuery.inArray(decodeURIComponent(e.path),c)&&(e.success=n,l.push(e),l.length>=c.length&&(w([r,a]),B(l,function(e){return b.Utils.isDefined(e.success)&&e.success})?d.resolve():d.reject()))};if(a=b.PubSub.subscribe(S+".deleteFolderFailed",function(e){h.checkRequiredCallbackParams(["path"],e,"deleteFolderFailed").didSucceed&&-1!==e.path.indexOf(i.cacheBase)&&(h.log("deleting folder failed: "+JSON.stringify(e),h.LogLevels.error),b.Utils.isDefined(e.errCode)&&1==e.errCode?u(e,!0):u(e,!1))}),r=b.PubSub.subscribe(S+".deleteFolderSuccess",function(e){if(h.checkRequiredCallbackParams(["path"],e,"deleteFolderSuccess").didSucceed&&-1!==e.path.indexOf(i.cacheBase)){h.log("deleting folder success: "+JSON.stringify(e),h.LogLevels.info),u(e,!0);var n=x(e.path);if(null!==n.id){var t={};t.cacheBase=n.type,t.id=n.id,t.inventoryId=n.inventoryId,b.PubSub.publish("Cache.campaignDeleted",[t])}}}),i.cacheBase===y)A[i.cacheBase].cache=[],A[i.cacheBase].cacheQueue=[],c.push(y);else{for(o=0;o<s;o++)b.Utils.isDefined(A[i.cacheBase].cache[0].id)||h.log("something went wrong. len="+s+" cache size= "+A[i.cacheBase].cache.length+" first element="+JSON.stringify(A[i.cacheBase].cache[0]),1),n=A[i.cacheBase].cache[0].id.toString(),b.Utils.isDefined(n)&&-1===jQuery.inArray(n,e)&&(t=i.cacheBase+"/"+n,-1===jQuery.inArray(t,c)&&c.push(t)),A[i.cacheBase].cache.shift();for(s=A[i.cacheBase].cacheQueue.length,o=0;o<s;o++)n=A[i.cacheBase].cacheQueue[0].id,b.Utils.isDefined(n)&&A[i.cacheBase].cacheQueue[0].cachingStatus!==I.cachingStatus.none&&(t=i.cacheBase+"/"+n,-1===jQuery.inArray(t,c)&&c.push(t)),A[i.cacheBase].cacheQueue.shift()}if(0===c.length)w([r,a]),d.resolve();else for(h.log("Removing irrelevant campaigns: "+JSON.stringify(c)),o=0;o<c.length;o++)h.deleteFolder(c[o]);return d.promise()},v=function(e,n){var t,i=null,r=A[e.cacheBase].cache,a=A[e.cacheBase].cache.length;for(t=0;t<a;t++)if(r[t].id==n){i=r[t];break}return i},k=function(e,n){var t,i=null,r=A[e.cacheBase].cacheQueue,a=A[e.cacheBase].cacheQueue.length;for(t=0;t<a;t++)if(r[t].id==n){i=r[t];break}return i},B=function(e,n){var t,i=e.length,r=!0;for(t=0;t<i;t++)r=r&&n(e[t]);return r},E=function(){b.PubSub.subscribe(S+".printCache",function(e){b.Utils.isDefined(e.type)&&r(e.type)})},e=function(t,i,e){var r=0,a=!1;return jQuery.each(A[e.cacheBase].cache,function(e,n){if(0<jQuery.grep(t,function(e){return h.AdUtils.getAdId(e)===h.AdUtils.getAdId(n)}).length&&i<=++r)return!(a=!0)}),a},V=function(n,e,t,i){var r,a=n.slice(0,e),o=[];for(A[i.cacheBase].evaluatedCache=[],r=0;r<a.length;r++)0===jQuery.grep(A[i.cacheBase].cache,function(e){return h.AdUtils.getAdId(e)===h.AdUtils.getAdId(a[r])&&R(e,a[r])}).length&&A[i.cacheBase].evaluatedCache.push(a[r]);for(r=0;r<a.length;r++)0===jQuery.grep(A[i.cacheBase].cache,function(e){return h.AdUtils.getAdId(e)===h.AdUtils.getAdId(a[r])&&!R(e,a[r])}).length&&o.push(a[r]);for(r=e;r<n.length;r++)0<jQuery.grep(A[i.cacheBase].cache,function(e){return h.AdUtils.getAdId(e)===h.AdUtils.getAdId(n[r])&&R(e,n[r])}).length&&o.push(n[r]);var s,c=n.length;for(r=0;r<A[i.cacheBase].cache.length;r++)0===jQuery.grep(n,function(e){return h.AdUtils.getAdId(e)===h.AdUtils.getAdId(A[i.cacheBase].cache[r])}).length&&(A[i.cacheBase].cache[r].inventoryIndex=++c,o.push(((s=A[i.cacheBase].cache[r]).adId=s.id,s.staticContent=s.assets,s)));return A[i.cacheBase].mergedAds=o.slice(0,t),A[i.cacheBase].mergedAds},R=function(e,n){if(!e||!n)return h.log("line[750]: entering isCachedAdStillUpdated with no ad",h.LogLevels.verbose),!1;var t=G(e.assets),i=G(n.staticContent);return h.log("cachedAdNumOfUniqueAssets: "+t+", newAdNumOfUniqueAssets:"+i,h.LogLevels.verbose),t===i&&(K(n)||e.lastUpdateTime==n.lastUpdateTime)},K=function(e){return e&&"0"!==e.creativeId},j=function(e,n){return A[n]&&-1<A[n].cache.indexOf(e)},W=function(e,n,t){var i=v(e,n);i&&(i.inventoryIndex=t)},G=function(e){var t,i=[];return e?(jQuery.each(e,function(e,n){t=g(n),-1===N(i,t)&&i.push(t)}),i.length):(h.log("cannot extract unique assets count",h.LogLevels.error),-1)},q=function(e){var n={id:h.AdUtils.getAdId(e),assets:e.staticContent||[],lastUpdateTime:b.Utils.isDefined(e.lastUpdateTime)?e.lastUpdateTime:0,numOfAssetsCached:0,cachingStatus:I.cachingStatus.none,preProcessing:e.preProcessing||b.Utils.returnResolvedPromise};return b.Utils.isDefined(e.credits)&&(n.credits=e.credits),b.Utils.isDefined(e.inventoryIndex)&&(n.inventoryIndex=e.inventoryIndex),n},H=function(e,n){for(var t=0;t<n.length;t++)if(-1!==n[t].indexOf(e))return n[t];return!1},J=function(e,n,t,i){return{productType:e,file:n,currentRetryAttempt:t,totalRetryAttempts:i}},Q=function(e,n,t,i,r,a){var o=!0,s=H(n,i),c=a.adunitRetryAttempts,l=a.adunitRetryInterval,d=a.productType;return t[n].isSuccessfullyCached?0<r&&t[n].isSuccessfullyCached&&b.PubSub.publish("Cache.adunitAssetRetrySuccess",[J(d,s,r,c)]):r<c?(o=!1,setTimeout(function(){h.cacheAsset(e,s)},1e3*l)):b.PubSub.publish("Cache.adunitAssetRetryFailed",[J(d,s,r,c)]),o},_={init:function(e,n){return I=this,t||(f(e),E(),t=!0),i(n),t},initCacheBase:function(e){A[e]||(A[e]={cache:[],currentAd:0,cacheQueue:[]}),m[e]||(m[e]={})},setAdInventoryIndex:W,cacheNext:function(e){return h.log("line[707]: recalling cache next",h.LogLevels.verbose),F(e),c(e)},incrementNextCampaign:function(e){A[e.cacheBase].currentAd=n(e)},isNextAvailable:function(e,n){return I.getCurrentAd(e,n)},setSettings:function(e,n){D[e.cacheBase]=n},getCacheSizeByType:function(e){return A[e.cacheBase].cache.length},cacheGlobalAssets:function(e,n){return I.cacheFilesByFolder("globals",e,n)},cacheGraphicAssets:function(e,n){return I.cacheFilesByFolder("graphicAssets",e,n)},cacheFilesByFolder:function(i,r,a){var e,o,s,c,l,d=r.length,u=[],f=0,g={};if(!A.hasOwnProperty(i))return b.Utils.returnResolvedPromise();o=jQuery.Deferred();var p=A[i].cache,t=A[i].cacheQueue,v=function(e,n){if((!n||g[e])&&((t=a).adunitRetryAttempts&&t.adunitRetryInterval)){if(g[e]={isSuccessfullyCached:n},!Q(i,e,g,r,f,a))return void f++;f=0}var t;u.push({file:e,status:n}),m(e),u.length>=d&&(w([s,c,l]),B(u,function(e){return e.status})?(p=jQuery.map(r,function(e){return e.replace(/^.*[\\\/]/,"")}),o.resolve(p)):o.reject())},m=function(e){var n=t.indexOf(e);-1<n&&t.splice(n,1)};for(s=b.PubSub.subscribe(S+".assetCached",function(e,n,t){h.checkRequiredCallbackParams(["path","file"],e,"assetCached",t).didSucceed&&(e.path!==y&&e.path!==C||(h.log("asset cached success: "+e.file,h.LogLevels.verbose),v(e.file,!0)))}),c=b.PubSub.subscribe(S+".assetCachedFailed",function(e,n,t){h.checkRequiredCallbackParams(["path","file"],e,"assetCachedFailed",t).didSucceed&&(e.path!==y&&e.path!==C||(h.log("asset cached failed: "+e.file+" with error: "+e.errMsg,h.LogLevels.error),v(e.file,!1)))}),l=b.PubSub.subscribe(S+".preCacheFileFailed",function(e,n,t){h.checkRequiredCallbackParams(["path","file"],e,"preCacheFileFail",t).didSucceed&&(e.path!==y&&e.path!==C||(h.log("failed to request to save file:"+e.file+" with error "+e.errMsg,h.LogLevels.error),v(e.file,!1)))}),e=0;e<d;e++)-1===N(p,r[e])?(-1===N(t,r[e])?t.push(r[e]):m(r[e]),h.cacheAsset(i,r[e])):-1!==N(p,r[e])&&v(r[e],!0);return 0===d&&w([s,c,l]),o.promise()},cacheLibsAsset:function(e){var n=jQuery.Deferred(),t=e.replace(/^.*[\\\/]/,"");return A.libs.cacheQueue.push(t),h.cacheAsset("libs",e).then(function(){!function(e){A.libs.cache.push(t);var n=A.libs.cacheQueue.indexOf(e);-1!==e&&A.libs.cacheQueue.splice(n,1)}(e),n.resolve(A.libs.cache)},function(){n.reject("Libs asset cache failed: "+e)}),n.promise()},cacheAds:function(e,n,t){var i,r=t.length;for(A[e.cacheBase].currentAppKey=n,i=0;i<r;i++){var a=q(t[i]);A[e.cacheBase].cacheQueue.push(a)}return o(e).then(c.bind(null,e))},cacheSingleAd:function(e,n){A[e.cacheBase].cacheQueue.splice(0,0,q(n)),I.cacheNext(e)},clearCacheByType:function(e,n){var t,i,r=n.length,a=[],o=null,s=[],c=jQuery.Deferred();if(0===A[e.cacheBase].cache.length&&0===A[e.cacheBase].cacheQueue.length)return c.resolve(A[e.cacheBase].cache),c.promise();for(t=0;t<r;t++)i=h.AdUtils.getAdId(n[t]),o=v(e,i),R(o,n[t])&&(s.push(i),b.Utils.isDefined(n[t].credits)&&!b.Utils.isDefined(o.credits)&&(o.credits=n[t].credits),a.push(o));return jQuery.when(p(e,s)).then(function(){A[e.cacheBase].cache=a,c.resolve(A[e.cacheBase].cache)},function(){h.log("error in clear cache by type",h.LogLevels.error),c.reject()}),c.promise()},getCurrentAd:function(n,e){var i=null;return n&&n.cacheBase&&e?(jQuery.each(e,function(e,t){return jQuery.each(A[n.cacheBase].cache,function(e,n){return!(i=h.AdUtils.getAdId(n)===h.AdUtils.getAdId(t)?n:i)}),!i}),i):null},getNextAvailableAd:function(){return{}},getAppKeyByType:function(e){return b.Utils.isDefined(A[e.cacheBase].currentAppKey)?A[e.cacheBase].currentAppKey:null},getCacheByType:function(e){return A[e.cacheBase]},isAdInCache:function(e,n){var t,i=A[e.cacheBase].cache.length,r=!1;for(t=0;t<i;t++)if(A[e.cacheBase].cache[t].id==n){r=!0;break}return r},getAdStatusInQueue:function(e,n){var t=k(e,n);return t?t.cachingStatus:null},setAppData:function(e){return h.setGlobalAppData(e)},getAppData:function(){return h.getGlobalAppData()},deleteCachedAsset:function(e,n){return h.deleteAsset(e,n)},deleteCachedListOfAssets:function(e,n){var t,i=new jQuery.Deferred,r=[],a=0;if(0===n.length)return i.resolve(0),i.promise();for(t=0;t<n.length;t++)r.push(h.deleteAsset(e,n[t]));return jQuery.when.apply(null,r).always(function(){var e=arguments;for(t in e)e[t]&&a++;i.resolve(a)}),i.promise()},deleteCachedCampaign:function(e,n){var t=e.cacheBase+"/"+n;return h.deleteFolder(t),a(e,n),s(e,n)},isAssetInCache:j,mergeCampaigns:V,areCampaignsAvailable:e,getFileIndexInCache:N,cachingStatus:{none:0,pending:1,queued:2}};return _}n.exports=i},{}],64:[function(i,e,n){e.exports=function(e,n){var t=i("../../components/Constants.js");return{productType:e.productType,demandGroupName:n.demandGroupName||n.demandSourceName,demandSourceName:n.demandSourceName,demandType:n.demandType||t.demandSourceType.demandSource,isProgrammatic:n.isProgrammatic}}},{"../../components/Constants.js":7}],65:[function(i,e,n){e.exports=function(e){var n,t=i("../../components/Constants.js");return n={initAd:{name:"initAd",id:1},initAdFail:{name:"initAdFail",id:2},initAdToAdReady:{name:"initAdToAdReady",id:226},adReady:{name:"adReady",id:3},adReadyToAdShow:{name:"adReadyToAdShow",id:227},showAd:{name:"showAd",id:4},showAdFail:{name:"showAdFail",id:5},showAdSuccess:{name:"showAdSuccess",id:26},showAdToAdVisible:{name:"showAdToAdVisible",id:229},adVisible:{name:"adVisible",id:8},videoStarted:{name:"videoStarted",id:9},videoCompleted:{name:"videoCompleted",id:10},endCardDisplayed:{name:"endCardDisplayed",id:11},clickDownloadNow:{name:"clickDownloadNow",id:12},endCardDisplayedToClickDownload:{name:"endCardDisplayedToClickDownload",id:200},campaignSavedCache:{name:"campaignSavedCache",id:106},campaignsAvailableFromCache:{name:"campaignsAvailableFromCache",id:107},noMoreOffers:{name:"noMoreOffers",id:105},clickReplay:{name:"clickReplay",id:111},clickVideoSound:{name:"clickVideoSound",id:112},adVisibleToClose:{name:"adVisibleToClose",id:222},adUnitRetrySuccess:{name:"adUnitRetrySuccess",id:170},adUnitRetryFail:{name:"adUnitRetryFail",id:171},adLoaded:{name:"adLoaded",id:6},adLoadedError:{name:"adLoadedError",id:7},userAlert:{name:"userAlert",id:113},backFill:{name:"backFill",id:115},campaignFailedToCache:{name:"campaignFailedToCache",id:109},campaignDeletedCache:{name:"campaignDeletedCache",id:108},hybridFallback:{name:"hybridFallback",id:118},hybridFlowFail:{name:"hybridFlowFail",id:120},loadAd:{name:"loadAd",id:21},loadAdFailed:{name:"loadAdFailed",id:22},loadAdFailedForOnHoldInstance:{name:"loadAdFailedOnHoldInstance",id:31},loadAdFailedForExhaustedInstance:{name:"loadAdFailedExhaustedInstance",id:32},loadAdIgnored:{name:"loadAdIgnored",id:24},loadAdSuccess:{name:"loadAdSuccess",id:23},bannerLoaded:{name:"bannerLoaded",id:27},bannerVisible:{name:"bannerVisible",id:28},bannerClicked:{name:"bannerClicked",id:29},getInventory:{name:"getInventory",id:158},getInventoryFailed:{name:"getInventoryFailed",id:159},bannerDestroyed:{name:"bannerDestroyed",id:30},bannerLoadToLoadSuccess:{name:"bannerLoadToLoadSuccess",id:248},bannerLoadSuccessToVisible:{name:"bannerLoadSuccessToVisible",id:249},bannerVisibleToClick:{name:"bannerVisibleToClick",id:250},bannerReloadDuringLoad:{name:"bannerReloadDuringLoad",id:251},bannerLoadedDuringShow:{name:"bannerLoadedDuringShow",id:232},initBeforeLoad:{name:"initBeforeLoad",id:128},loadAdToAdReady:{name:"loadAdToAdReady",id:230},loadAdToShowAd:{name:"loadAdToShowAd",id:231},fallbackToNonPrecache:{name:"fallbackToNonPrecache",id:154},parseVastSuccess:{name:"parseVastSuccess",id:240},parseVast:{name:"parseVast",id:-1},parseVastFail:{name:"parseVastFail",id:241},dialogBoxExit:{name:"dialogBoxExit",id:155},dialogBoxResume:{name:"dialogBoxResume",id:156},parseVastInfo:{name:"parseVastInfo",id:157},refreshInterval:{name:"refreshInterval",id:164},attemptToBringNewFeed:{name:"attemptToBringNewFeed",id:163}},e===t.IS&&(n.noMoreOffers={}),n}},{"../../components/Constants.js":7}],66:[function(e,n,t){n.exports={direct:{serverResponseTimeoutInMilis:1e4,http:{method:"GET",dataType:"jsonp"}},programmatic:{}}},{}],67:[function(e,n,t){n.exports=function(t){var i=e("./FetchDemandConst.js");return{fetchFeed:function(e,n){return t({url:e,data:n,type:i.direct.http.method,dataType:i.direct.http.dataType,timeout:i.direct.serverResponseTimeoutInMilis})}}}},{"./FetchDemandConst.js":66}],68:[function(e,n,t){n.exports=function(i,r,a,t){var o=t.productType,n=t.demandSourceName,s=t.demandGroupName,c=0,l=!1;function d(e){return i.extend(e,{demandSource:n,impressionsCount:c}),a.Utils.returnResolvedPromise(e)}function u(e){var n=r.getApiData({fpf:0});return l&&n&&i.extend(e,{fpf:n.fpf}),a.Utils.returnResolvedPromise(e)}function f(e){var n=r.getApiData({segmentId:0}),t=r.getApiData({segmentName:0});return n&&t&&i.extend(e,{segmentId:n.segmentId,segmentName:t.segmentName}),a.Utils.returnResolvedPromise(e)}function g(n){var e=new i.Deferred;return r.shouldExtendApiDataWithDebugData()?r.getSDKDebugParams().then(function(e){return i.extend(n,e),a.Utils.returnResolvedPromise(n)}).always(function(){e.resolve(n)}):e.resolve(n),e.promise()}function p(e){if(!r.blacklistService.isEmpty(o,s)){var n=r.blacklistService.getBlacklistedCampaigns(o,s);i.extend(e,{blacklistedCampaigns:n.join(",")})}return a.Utils.returnResolvedPromise(e)}function v(e){return r.log("payloadBuilder | built payload for "+o+" | payload "+JSON.stringify(e)),a.Utils.returnResolvedPromise(e)}return{createPayload:function(e,n){return c=e,l=n,r.getApplicationInfo(r.DemandUtils.extendCallbackParamsWithParentProductConfig(t,{})).then(r.getAPIRequiredData).then(d).then(u).then(f).then(g).then(p).then(v)}}}},{}],69:[function(e,n,t){n.exports=function(o,s){var c=!0;function e(e){c=!!e}return{canPreloadCandidateAd:function(e,n,t,i,r){if(!c)return s.log("Can not preload next ad right now",s.LogLevels.verbose),!1;if(e&&!n)return s.log("Skipping preload on capped demand",s.LogLevels.verbose),!1;var a=o.VastUtils.isVastCampaign(t);return n||r&&!a||i?(s.log("line[1390]:preload ad "+s.AdUtils.getAdId(t),s.LogLevels.verbose),!0):(s.log("line[1393]:skipping preload with "+s.AdUtils.getAdId(t),s.LogLevels.verbose),!1)},preloadAdFinished:function(){e(!1)},setCanPreloadFlag:e,reset:function(){e(!0)}}}},{}],70:[function(yt,e,n){function t(u,f,g,e,c,n){"use strict";var l,t=!1,d=e.demandSourceName,p=f.adUnitUrl,v=f.jQuery(),i,m=new(yt("./../../components/MultipleInventories.js")),b=new(yt("./PreloadAdManager"))(u,f),r=new(yt("../../patches/PublisherPatchEasybrain.js"))(f.getConfigurationHelper()),h=new(yt("./../../components/sdkPluginType/SDKPluginTypeHandler.js"))(f),S=c.eventicsCategories,y={},a=v.extend({},c.precacheConfig),C=c.displayMode,A=!1,s=0,o=null,D=null,I=null,w=!1,L=!1,P,T=[],O,U={},F,x=g.closeButtonStates,N=!1,M=[],k=null,B=null,E=null,V=null,R=g.CB,K=null,j=0,W={},G=f[c.productType],q=new(yt("../DemandSource/DemandInstanceBuilder.js"))(c,e),H=n||oe(),J=f.DemandUtils,Q=new(yt("./../RewardedVideo/dsTaskManager.js"))(u,f,q,g),_=yt("../../components/VastService.js")(u,f),z=new(yt("./../RewardedVideo/availabilityReporter.js"))(u,f,c,q,Q),X=new(yt("./../RewardedVideo/availabilityManager.js"))(u,f,z,c,H),$=yt("../../components/CampaignsFilter.js")(u,f).factory(q.productType),Y=new(yt("./PayloadBuilder.js"))(v,f,u,q),Z,ee=!0,ne=1,te=!1,ie=f.getExternalContainer(),re=function(){M.push(u.PubSub.subscribe("PrecacheManager.cacheUpdatedCallback",function(e){if(J.shouldReceiveMessage(q,e)){var n,t,i;f.log("globals ready: "+A+" initSuccess in settings: "+y.numOfBannersToInitSuccess+" adUnits: "+m.size(e.inventoryId),f.LogLevels.verbose);var r=Z.getCacheSizeByType(q.productType),a=Be.bind(null,e.inventoryId);if(0===y.numOfBannersToInitSuccess)t=1,n=Z.areCampaignsAvailable(We(e.inventoryId).slice(0,t),t);else{var o=Ge(e.inventoryId);t=o.length;var s=Ne(m.getOffers(e.inventoryId),y.numOfBannersToInitSuccess);i=s<=t?s:t,n=Z.areCampaignsAvailable(o,i)}f.log("PM | cacheUpdatedCallback cache updated areCampaignsAvailable: "+n,f.LogLevels.verbose),X.cacheUpdate(r,A,n,a)}})),M.push(u.PubSub.subscribe("PrecacheManager.campaignDeletedCallback",function(e){if(J.shouldReceiveMessage(q,e)){var n,t=-1,i={};u.Utils.isDefined(e.id)&&(n=Ke(e.id,e.inventoryId),i=f.AdUtils.updateEventWithAdParams(y,n,i),t=n&&u.Utils.isDefined(n.inventoryIndex)?n.inventoryIndex:-1),H.trackEvent(S.campaignDeletedCache,{inventoryIndex:t},i)}})),M.push(u.PubSub.subscribe("PrecacheManager.campaignSavedCallback",function(e){if(J.shouldReceiveMessage(q,e)){var n,t=-1,i=null,r={};u.Utils.isDefined(e.id)&&(n=Ke(e.id,e.inventoryId),i=e.id,t=n&&u.Utils.isDefined(n.inventoryIndex)?n.inventoryIndex:-1,r=f.AdUtils.updateEventWithAdParams(y,n,r)),v.extend(r,{eNameStart:{name:S.campaignSavedCache.name+(i||"")},inventoryIndex:t}),H.trackTimingStop(S.campaignSavedCache,r)}})),M.push(u.PubSub.subscribe("PrecacheManager.campaignDownloadStartedCallback",function(e){if(J.shouldReceiveMessage(q,e)){var n=v.extend({},S.campaignSavedCache);n.name=n.name+(e.id||""),H.trackTimingStart(n)}})),M.push(u.PubSub.subscribe("PrecacheManager.cacheAdsSuccessCallback",function(e){J.shouldReceiveMessage(q,e)&&f.log("RV cacheAdsSuccessCallback "+JSON.stringify(e),f.LogLevels.verbose)})),M.push(u.PubSub.subscribe("PrecacheManager.cacheNextFail",function(r){J.shouldReceiveMessage(q,r)&&r.deletedAds&&0<r.deletedAds.length&&v.each(r.deletedAds,function(e,n){var t=Ke(n,r.inventoryId),i=f.AdUtils.updateEventWithAdParams(y,t,{});H.trackEvent(S.campaignFailedToCache,{},i),Ve(n,r.inventoryId)})})),M.push(u.PubSub.subscribe("PrecacheManager.fallbackToNonPrecache",function(e){J.shouldReceiveMessage(q,e)&&(u.PubSub.publish(c.productType+".fallbackToNonPrecache",[e]),H.trackEvent(S.fallbackToNonPrecache))})),M.push(u.PubSub.subscribe("PrecacheManager.cacheAdsFailedCallback",function(e){if(J.shouldReceiveMessage(q,e)){f.log("RV cacheAdsFailedCallback "+JSON.stringify(e),f.LogLevels.verbose);for(var n,t,i,r=e.deletedOffers.length,a=e.deletedOffers,o=0;o<r;o++){var s=a[o],c=Ke(s,e.inventoryId),l=f.AdUtils.updateEventWithAdParams(y,c,{});H.trackEvent(S.campaignFailedToCache,{},l),Ee(s,e.inventoryId)}if(0===y.numOfBannersToInitSuccess)t=1,n=Z.areCampaignsAvailable(We(e.inventoryId).slice(0,t),t);else{var d=Ge(e.inventoryId);t=d.length;var u=Ne(m.getOffers(e.inventoryId),y.numOfBannersToInitSuccess);i=u<=t?u:t,n=Z.areCampaignsAvailable(d,i)}X.cacheAdsFailed(A,n,e.errorLog,Be.bind(null,e.inventoryId))}})),M.push(u.PubSub.subscribe("PrecacheManager.preProcessingFailedCallback",function(e){if(J.shouldReceiveMessage(q,e)){f.log("PM | preProcessingFailedCallback "+e,f.LogLevels.verbose);var n=e.id,t=Ke(n,e.inventoryId);Te(t)&&(J.extendCallbackParamsWithProductConfig(q,t),f.addAdToLoadedCreatives(t),ke(),ge(t))}})),M.push(u.PubSub.subscribe("Cache.adunitAssetRetrySuccess",function(e){if(e.productType===c.productType&&e.file&&e.currentRetryAttempt&&e.totalRetryAttempts){var n=e.file+"["+e.currentRetryAttempt+" of "+e.totalRetryAttempts+"]";H.trackEvent(S.adUnitRetrySuccess,{generalMessage:n.substring(0,250)})}})),M.push(u.PubSub.subscribe("Cache.adunitAssetRetryFailed",function(e){if(e.productType===c.productType&&e.file&&e.currentRetryAttempt&&e.totalRetryAttempts){var n=e.file+"["+e.currentRetryAttempt+" of "+e.totalRetryAttempts+"]";H.trackEvent(S.adUnitRetryFail,{generalMessage:n.substring(0,250)})}})),M.push(u.PubSub.subscribe("SDKController.AdTracked",function(e){J.shouldReceiveMessage(q,e)&&(e=f.AdUtils.formatParamsToAdId(e),f.callSDKFunction("adCredited",J.extendCallbackParamsWithParentProductConfig(q,{credits:Ke(f.AdUtils.getAdId(e),e.inventoryId).credits}),"adCreditedSuccess","adCreditedFailed"))})),M.push(u.PubSub.subscribe("SDKController.AdStarted",function(e){if(J.shouldReceiveMessage(q,e)&&f.RingerSwitchService.isInitiated()){var n={},t=Cn();t&&t.ext&&(n=et(I.ext)),f.RingerSwitchService.startListener(n),f.log("Ringer | startListener ringer status from AdStarted.",f.LogLevels.info)}})),M.push(u.PubSub.subscribe("SDKController.Analytics",function(e){if(J.shouldReceiveMessage(q,e)&&e&&e.action){var n=e.action,t=e.eventParam;"fireEvent"===n?H.trackEvent(t.eName,t.label,t.data):"startTiming"===n?H.trackTimingStart(t.eName,t.data):"stopTiming"===n?H.trackTimingStop(t.eName,t.data):"setCustomData"===n&&H.updateBaseData(t.data)}})),M.push(u.PubSub.subscribe("SDKController.AdLoaded",function(e){if(J.shouldReceiveMessage(q,e)){var n=f.AdUtils.getAdId(e),t=Ke(n,e.inventoryId),i=e.inventoryId;clearTimeout(P),f.log("ad loaded with params: "+JSON.stringify(e),f.LogLevels.verbose),t&&H.updateBaseData({rvPlayMethod:t.displayMode});var r=0;if(u.VastUtils.isVastCampaign(t)&&(r=u.VastUtils.getVastViewCount(t)),u.Utils.isDefined(e.errMsg)){Q.publish("AdErrorState",[J.extendCallbackParamsWithDemandConfig(q,{error:!0})]),f.log("Error in loading ad: "+e.errMsg,f.LogLevels.error);var a={generalMessage:e.errMsg,vastViewCount:u.VastUtils.getVastViewCountForEvent(r)};return a=f.AdUtils.updateEventWithAdParams(y,t,a),H.trackEvent(S.adLoadedError,{},a),t.ext.isHybridFlow&&t.ext.viewUniqueId&&(f.HybridService.clearAppPage(t.ext.viewUniqueId),u.PubSub.publish("HybridService.closeHybridFlow",[{viewUniqueId:t.ext.viewUniqueId}])),u.VastUtils.setMaxVastCount(t),bn(t),void ge(e)}y.viewType===g.viewTypes.externalView&&H.incrementSessionNumber(),H.trackEvent(S.adLoaded,{vastViewCount:u.VastUtils.getVastViewCountForEvent(r)}),u.Utils.isDefined(e.enableBackButton)&&f.setBackButtonState(e.enableBackButton),e=f.AdUtils.formatParamsToAdId(e),f.onAdLoaded(Ke(f.AdUtils.getAdId(e),e.inventoryId)),X.adLoadedSuccessfully(m.size(i),Re(i))}})),M.push(u.PubSub.subscribe("SDKController.AdLoadError",function(e){J.shouldReceiveMessage(q,e)&&(X.adLoadError(),f.unloadFramesByProduct(q),st&&On())})),M.push(u.PubSub.subscribe("SDKController.AdError",function(e){J.shouldReceiveMessage(q,e)&&f.log("SDKController.AdError:"+JSON.stringify(e),f.LogLevels.verbose)})),M.push(u.PubSub.subscribe("SDKController.dialogBoxResume",function(e){J.shouldReceiveMessage(q,e)&&H.trackEvent(S.dialogBoxResume)})),M.push(u.PubSub.subscribe("SDKController.dialogBoxExit",function(e){J.shouldReceiveMessage(q,e)&&H.trackEvent(S.dialogBoxExit)})),M.push(u.PubSub.subscribe("SDKController.adClosed",function(e){J.shouldReceiveMessage(q,e)&&H.updateBaseData({rvPlayMethod:null})})),M.push(u.PubSub.subscribe(c.productType+".GetConfig",function(t){if(J.shouldReceiveMessage(q,t)){var e=Cn();if(!e)return void f.log("line[331]:get config with no loaded ad",f.LogLevels.verbose);u.VastUtils.isVastCampaign(e)&&B?B.then(function(e,n){ce(n||e,t)}):(f.HybridService.isHybridCampaign(e,y)&&ae(e),ce(e,t))}})),M.push(u.PubSub.subscribe(c.productType+".isVisible",function(e){if(J.shouldReceiveMessage(q,e)){var n=Cn(),t=f.getCurrentDisplayedAd();if(f.isAdDisplayed(n))return;n&&(t&&f.getCurrentDisplayedAdType()!==c.productType?H.trackEvent(S.bannerLoadedDuringShow):(f.setCurrentDisplayedAd(n),f.getCurrentDisplayedAdType()===g.BN&&ie.shouldReportAdVisible()&&f.onAdVisible()))}}))};function ae(e){e.ext.shouldInitHybridFlow=!0}function oe(){var e={productChance:(f.getEnv(),1),baseData:{productType:q.productType,demandSourceName:q.demandSourceName}};return u.Eventics.createEventic(e)}function se(){return H}function ce(e,n){var t=Ke(f.AdUtils.getAdId(e),e.inventoryId);return t?(u.VastUtils.isVastCampaign(e)||le(t),f.MOATService.containsMOATData(e)&&f.MOATService.enableTracking(),me(t),n&&n.callback&&n.callback.call(null,t)):f.log("line[456]: no current available ad",f.LogLevels.verbose),t}function le(e){y.requestID&&(e.requestID=y.requestID);var n=de(f.getApiData({scdn:1,protocol:0,defaultProtocol:1}).scdn);return v.extend(!0,e,f.getFormattedDeviceData(),ue(n))}function de(e){var n=f.decideUrlProtocolAccordingToHTTPSCompliance()+"//"+e;return"prod"!==f.getEnv()&&(n=f.api()+"/users/staging/"+SuperSonicGlobalConfig.mobileSDKSettings.env),n}function ue(e){return{settings:{protocol:f.decideUrlProtocolAccordingToHTTPSCompliance(),urltocdn:e,appKey:f.getSDKDataByKey(g.requiredSDKDataKeys.applicationKey),appOrientation:f.getSDKDataByKey(g.requiredSDKDataKeys.appOrientation),deviceLanguage:f.getSDKDataByKey(g.requiredSDKDataKeys.deviceLanguage),bundleId:f.getSDKDataByKey(g.requiredSDKDataKeys.bundleId),deviceId:f.getDeviceId()}}}function fe(){k=E=B=null}function ge(e){var n=f.AdUtils.getAdId(e);Ve(n,e.inventoryId);var t=Q.getStatus().duringEngage;An(n,e.inventoryId),fe();var i=l.getNextAd(t,e.inventoryId),r=function(){f.log("DemandSource | adLoaded with error - removing and moving to next offer",f.LogLevels.verbose),yn(null),f.removeAdUnit(Ke(n,e.inventoryId))};if(t&&!i){var a=m.getBackfillOffer(e.inventoryId);if(a){Dn();var o=f.AdUtils.updateEventWithAdParams(y,a,{rvPlayMethod:a.displayMode});H.trackEvent(S.backFill,{},o),r()}else{f.log("RV adLoaded with error | no offers for user - show dialog",f.LogLevels.verbose),f.setCloseButtonState({productType:c.productType,demandSourceName:d,state:x.close});var s={productType:c.productType,message:O&&O.noOffers?O.noOffers:g.labels.noOffers,yes:"close",alwaysClose:!0};f.alert(s),H.trackEvent(S.userAlert,{inventoryIndex:e.inventoryIndex||-1})}}else r()}function pe(e){return e&&e.displayMode?e.displayMode:C.softprecache}function ve(){var e=m.getActiveInventoryId();H.incrementSessionNumber();var n=Cn()||qe(e);n||(n=He(!0,e));var t=f.AdUtils.updateEventWithAdParams(y,n,{});t.rvPlayMethod=pe(n),H.updateBaseData(t)}function me(e){var n=e.displayMode!=C.softprecache&&Z.isPrecache();void 0===e.productType&&(e.productType=q.productType),void 0===e.demandSourceName&&(e.demandSourceName=q.demandSourceName),e.settings.precache=n,e.settings.sessionDepth=ne,e.settings.sValue=f.getSValue(),e.settings.viewType=y.viewType,u.AdAssets.isAdAbleToCache(e)&&(e.settings.ableToCache=e.ext.ableToCache,delete e.ext.ableToCache),f.MOATService.containsMOATData(e)&&f.MOATService.isTrackingEnabled()&&(e.settings.moatData=f.MOATService.extractMoatDataFromAd(e))}var be=function(e){var n="AttemptToBringNewAds | ";if(f.log(n),H.trackEvent(S.attemptToBringNewFeed,{generalMessage:Q.getStatusMsg()}),N)f.log(n+"Cannot bring feed attemptToBringNewAdsInProcess="+N);else{if(N=!0,!Q.allowExternalCallToApi())return f.log(n+"Cannot bring feed: "+Q.getStatusMsg()),void(D=setTimeout(function(){N=!1,f.log(n+"2 minutes delay finished"),be(e)},c.timerLengths.riDelay));X.inventoryEmpty(e),setTimeout(function(){f.log(n+"Can bring feed"),he(y.refreshInterval),f.unloadFramesByProduct(q),N=!1,On()},0)}},he=function(e){f.log("setting refresh interval to: "+e,f.LogLevels.info),o&&clearInterval(o),e&&0!==e&&!ot()?o=setInterval(function(){H.trackEvent(S.refreshInterval),Q.canEngage()?(clearInterval(o),Q.canInitCallToApi().then(be)):(f.log("setDuringRefreshInterval(true)",f.LogLevels.info),ft(!0))},e*c.timeUnit):f.log("No Refresh interval is needed")};function Se(e){F=e.labels,e.templateid==c.customDialog?F.confirmCloseMsg[g.confirmCloseMsgMap[0]].alwaysClose=!0:O=e.labels}var ye=function(e){var n=e.seatbid.ext;n.shouldStartMuted=f.AdUtils.isCampaignShouldStartMuted(f.getConfig().controllerConfig,c.productType),v.extend(n,c.overrideFeedSettings),v.extend(n,f.getApplicationExternalConfig().getABTestConfiguration(Ce(),n.landingId)),o&&clearInterval(o),Nn()&&he(n.refreshInterval),f.isLegacy(f.featureMap.rvPortraitOrientation)&&(n.orientation=g.appInfo.orientation.landscape),c.productType===g.BN&&(n.numOfBannersToInitSuccess=0,n.numOfBannersToCache=0),y=n},Ce=function(){return q.demandSourceName===g.RIS?g.RIS:G.getProductType()},Ae=function(e){v.each(e,function(e,n){n.inventoryIndex=e,Z.isPrecache()&&Z.setAdInventoryIndex(f.AdUtils.getAdId(n),e)})};function De(){v.each(M,function(e,n){u.PubSub.unsubscribe(n)})}function Ie(){D&&clearTimeout(D),o&&clearInterval(o)}function we(e){var n,t=!!e&&e.engaged;De(),Ie(),n=v.extend({},q,{engaged:t}),u.PubSub.publish(c.productType+".exhaustedDemandSource",[n])}function Le(e){var n,t=[];for(n=0;n<e.length;n++)Z.isAdInCache(f.AdUtils.getAdId(e[n]))||t.push(e[n]);return t}var Pe=function(e){var t=[];return v.each(e,function(e,n){n.ext&&n.ext.appData&&n.ext.appData.adAssets&&(n.ext.appData.appImages=n.ext.appData.adAssets,delete n.ext.appData.adAssets),t.push(n)}),t},Te=function(e){return Z.isPrecache()&&u.VastUtils.isVastCampaign(e)&&e.ext.precacheVasts},Oe=function(e){return 1===e.length&&Te(e[0])&&(L=!0),u.Utils.returnResolvedPromise()},Ue=function(e){return tn(u.VastUtils.isVastCampaign(e)),e.inventoryId&&ln(),en(e).then(function(e,n){return f.AdUtils.formatVastAdForPrecache(n,Ue.bind(null,e))})},Fe=function(e){var n=[];return L?n.push(f.AdUtils.formatVastAdForPrecache(e[0],Ue.bind(null,e[0]))):n=f.AdUtils.formatAdsForPrecache(e),n},xe=function(a,o){var s,c,e,l=Z.isPrecache();if(0===a.length)return X.inventoryEmpty("Got 0 campaigns in inventory"),void we();a=Pe(a),Ae(a);var d=m.setOffers(a.slice(0),o);s=Fe(a),c=Ne(a,y.numOfBannersToCache);var n=function(){if(u.VastUtils.isThereVastCampaign(We(d))&&X.setAMSettings({reportOnAdunitReady:!1},!0),l){var e=Ne(a,y.numOfBannersToInitSuccess),n=Z.areCampaignsAvailable(s.slice(0,e),e);f.log("DemandSource | updateCurrentAds areCampaignsAvailable "+n,f.LogLevels.verbose);var t=Be.bind(null,d);X.preCacheMode(n,c,t,u.VastUtils.areAllCampaignTypesAreVast(We(d)),sn.bind(null,d),m.size(d),Re(d),u.VastUtils.isVastCampaign(a[0]));var i=Le(s),r={cacheTimeoutSuccessCallback:function(){xe(a,o)},cacheTimeoutFailCallback:Me,applicationUserId:f.getSDKDataByKey(g.requiredSDKDataKeys.applicationUserId),applicationKey:f.getSDKDataByKey(g.requiredSDKDataKeys.applicationKey),newAdsToEnterCache:i,inventoryId:d};Z.handleCacheAds(r)}else X.notPreCacheMode(Be.bind(null,d))};l&&(e=Z.mergeCampaigns(s,c),f.log("DemandSource | updateCurrentAds after merge "+JSON.stringify(e),f.LogLevels.verbose)),!l||y.purgeCacheOnInit?(f.log("DemandSource | already purged cache so go strait to adding the new ads",f.LogLevels.verbose),n()):Z.clearCacheByType(e).always(n)},Ne=function(e,n){for(var t=e.length<n?e.length:n,i=n,r=0;r<t;r++)e[r].isCacheable||i--;return i},Me=function(e){X.cacheTimeoutFail(e)},ke=function(){Q.publish("InitiatedAPICall",[J.extendCallbackParamsWithProductConfig(q,{duringInit:!1})])},Be=function(e){f.log("ProductInstance | handlePossibleAdUnitsReady",f.LogLevels.verbose);var n=qe(e);if(n){var t=u.VastUtils.isVastCampaign(n);if(L&&tn(t,e))cn(e);else{var i=m.size(e),r=Re(e),a=u.VastUtils.areAllCampaignTypesAreVast(We(e));X.canReportAvailable(i,r,a,t)}ie&&q.productType===g.BN?ht(y,q,U):l.attemptToPreloadAd(!1,e)}},Ee=function(e,n){m.removeOfferById(e,n)&&!m.isEmpty(n)&&Z.incrementNextCampaign()},Ve=function(e,n){if(!In()){var t=m.getOfferById(e,n);t?t.toRemove=!0:f.log("Error in mark current ad to be removed:"+e,f.LogLevels.error),V=null}},Re=function(e){for(var n=0,t=m.getOffers(e),i=m.size(e),r=0;r<i;r++)n+=t[r].credits;return n},Ke=function(e,n){var t=m.getOfferById(e,n);if(!t){if(In())return m.getBackfillOffer(n);f.log("Error in getAdUnitById, id "+e+" not found in "+JSON.stringify(m.getOffers(n)),1)}return t},je=function(e,n,t){return m.replaceOfferById(e,n,t)},We=function(e){return v.grep(m.getOffers(e),function(e){return!(u.Utils.isDefined(e.toRemove)&&e.toRemove)})},Ge=function(e){var n=We(e);return v.grep(n,function(e){return e.isCacheable})},qe=function(e){var n,t=Ke(f.AdUtils.getAdId(ze(e)),e);return n=Z.isPrecache()&&t&&t.isCacheable?(t=Ke(f.AdUtils.getAdId(_e(e)),e),C.precache):C.nonprecache,t&&!t.displayMode&&Je(t,n),t},He=function(e,n){if(!e)return null;var t=Qe(n);return t?Ke(f.AdUtils.getAdId(t),n):null},Je=function(e,n){e&&(e.displayMode=n)},Qe=function(e){return 0<We(e).length?We(e)[0]:null},_e=function(e){return 0===y.numOfBannersToInitSuccess?Z.getCurrentAd(We(e).slice(0,1)):Z.getCurrentAd(We(e))},ze=function(e){return m.getCurrentOffer(e)},Xe=function(e){var n=f.AdUtils.getAdId(e);Q.publish("Engaged",[J.extendCallbackParamsWithProductConfig(q,{duringEngage:!1})]),yn(null),fe();var t=Ke(n,e.inventoryId);clearTimeout(P),t?(f.log("onEngageEnd with params: "+JSON.stringify(t),f.LogLevels.verbose),An(n,t.inventoryId),u.Utils.isDefined(t)&&t.toRemove&&(f.log("removing ad id: "+n,f.LogLevels.verbose),Ee(n,t.inventoryId))):f.log("Tried to end engage with no ad",f.LogLevels.error)},$e=function(e){var n=f.AdUtils.getAdId(e),t=Ke(n,e.inventoryId);u.Utils.isDefined(t)&&t.toRemove&&(f.log("removing ad id: "+n,f.LogLevels.verbose),Ee(n,t.inventoryId))};function Ye(e){k&&"pending"===k.state()&&(u.Utils.isDefined(e)?(f.log("handleVastAvailability - VAST failed to load with reason: "+e,f.LogLevels.verbose),k.reject()):(f.log("handleVastAvailability - VAST verified - resolve",f.LogLevels.verbose),k.resolve()))}function Ze(e){var n="";return u.Utils.isDefined(q.demandSourceName)&&(n=q.demandSourceName),n+=q.productType+e}function en(r){var a=f.AdUtils.getAdId(r),o=an(r),s=r.inventoryId;if(r.ext.videoData.isVast&&V){var e=u.VastUtils.getVastViewCount(r),n=r.settings.preload,t=r.displayMode;V=u.VastUtils.setVastViewCount(V,e),(r=V).settings.preload=n,r.displayMode=t}else(r=u.VastUtils.setVastViewCount(r,0)).ext.vastExhaustIndex&&1<r.ext.vastExhaustIndex&&(V=r);return le(r),B=new v.Deferred,r.vastIframeId=Ze(a),H.trackTimingStart(S.parseVast),_.parseVast(r,Z.isPrecache(),y).then(function(e){if(null!==B){if(H.trackTimingStop(S.parseVastSuccess,{generalMessage:o,eNameStart:S.parseVast}),!u.Utils.isDefined(r.toRemove)||!r.toRemove){e.ext.videoData.isVast=!0,u.Utils.isDefined(r.displayMode)&&(e.displayMode=r.displayMode),u.VastUtils.incrementVastViewCount(e),Ye(e.errMsg);var n=r;return u.VastUtils.incrementVastViewCount(n),je(r=e,f.AdUtils.getAdId(r),s),B.resolve(n,e)}_.removeIframe(Ze(a))}},function(e){if(null!==B){var n={generalMessage:o,eNameStart:S.parseVast};if(n=f.AdUtils.updateEventWithAdParams(y,r,n),e.isTimeLimitReached&&(n.callFailReason="timeout"),H.trackTimingStop(S.parseVastFail,n),!u.Utils.isDefined(r.toRemove)||!r.toRemove){var t=u.VastUtils.incrementVastViewCount(r);Ye(e.errMsg),Q.publish("AdErrorState",[J.extendCallbackParamsWithProductConfig(q,{error:!0})]),f.log("Error in loading ad: "+e.errMsg,f.LogLevels.error);var i={generalMessage:e.errMsg,vastViewCount:u.VastUtils.getVastViewCountForEvent(t)};return i=f.AdUtils.updateEventWithAdParams(y,r,i),H.trackEvent(S.adLoadedError,{},i),u.VastUtils.setMaxVastCount(r),bn(Ke(a,s)),B.reject()}_.removeIframe(Ze(a))}})}function nn(e){return E=new v.Deferred,e.ext.viewUniqueId=f.HybridService.createHybridId(e,q),f.HybridService.loadHybridCampaign(f.AdUtils.getStoreAppId(e),e.ext.viewUniqueId).then(function(){if("resolved"!==E.state())return e.ext.forceOrientation="portrait",e.ext.isHybridFlow=!0,E.resolve()},function(){if("resolved"!==E.state())return H.trackEvent(S.hybridFlowFail,{callFailReason:"Store load fail"}),e.ext.isHybridFlow=!1,E.resolve()})}function tn(e,n){return rn(e)||on(n)}function rn(e){return y.preFetchAllVasts&&e}function an(e){var n;return rn(u.VastUtils.isVastCampaign(e))?n="preFetchAllVasts":on(e.inventoryId)&&(n="vastAvailabilityValidation"),n}function on(e){return Z.isPrecache()&&u.VastUtils.areAllCampaignTypesAreVast(We(e))}function sn(e){f.log("handleVastAvailability",f.LogLevels.verbose),ln(),cn(e),ke()}function cn(e){v.when(k).then(function(){X.allVastPromiseResolved(m.size(e),Re(e))})}function ln(){k&&"pending"===k.state()||(k=new v.Deferred)}var dn=function(){return Q.canInitCallToApi().then(function(){},function(){return f.log(c.errors.init[1001]+Q.getStatusMsg(),f.LogLevels.error),c.errors.init[1001]}).then(function(){Q.publish("InitiatedAPICall",[J.extendCallbackParamsWithProductConfig(q,{duringInit:!0})]);var e=new(yt("./FetchDemand/FetchDirect.js"))(v.ajax);return s++,u.Utils.decodeValues(i),g.BN===c.productType&&H.trackEvent(S.getInventory),e.fetchFeed(G.getDestination(d),i)}).then(un).then(fn,function(e,n){var t,i=new v.Deferred;switch(t=c.errors.init[1005],typeof e){case"object":e.responseText&&""!==e.responseText?t=e.responseText:e.errorMessage&&""!==e.errorMessage&&(t=e.errorMessage);break;case"string":""!==e&&(t=e)}return ke(),"timeout"===n?i.reject(c.errors.load.timeout):i.reject(t),i.promise()})},un=function(e){var n=new v.Deferred;if(u.Utils.isDefined(e.response)&&u.Utils.isDefined(e.response.errorCode)){ke();var t=u.Utils.isDefined(e.response.errorMessage)&&e.response.errorMessage?e.response.errorMessage:c.errors.init[1003];n.reject(t)}else u.Utils.isDefined(e.seatbid)&&u.Utils.isDefined(e.seatbid.bid)&&u.Utils.isDefined(e.seatbid.ext)&&u.Utils.isDefined(e.seatbid.ext.labels)?n.resolve(e):(ke(),n.reject(c.errors.init[1004]));return n.promise()},fn=function(e){return function(e){Q.setConnection(!0);var t=e.seatbid.bid,n=e.seatbid.ext;G.getAmountOfSupportedInventories()===g.DEFAULT_AMOUNT_OF_INVENTORIES&&m.reset();var i=m.getAvailableInventoryId();if(H.updateBaseData({landingId:n.landingId,strategyId:n.strategyId}),e.seatbid.backfill){var r=e.seatbid.backfill;r.id=f.AdUtils.getAdId(r),Je(r,C.softprecache),i=m.setBackfillOffer(r,i)}return v.when(ye(e),Se(n)).then($.filterByAppInstalled.bind(null,t,y,c.filterDisableTypes)).then(function(e){for(var n=e&&e.length||0,t="",i=0;i<n;i++)t+=f.AdUtils.getAdType(e[i],y),i<n-1&&(t+=", ");return H.updateBaseData({feedSize:n,feedCampaignOrder:t}),u.Utils.returnResolvedPromise()}.bind(null,t)).then(Z.decidePrecacheStatus.bind(null,{numOfCampaigns:t.length,settings:y})).then(function(){return X.setAMSettings({preFetchAllVasts:y.preFetchAllVasts,shouldRefreshInventory:xn(y),isPreCache:Z.isPrecache(),numOfBannersToInitSuccess:y.numOfBannersToInitSuccess,reportOnAdunitReady:y.reportOnAdunitReady}),t&&0<t.length?(A=!1,Un(),f.adUnitGlobals.updateAdUnitGlobals(Z.isPrecache(),Mn(),W)):u.Utils.returnRejectedPromise("We did not receive any campaigns in inventory")}).then(function(){return v.when(Bn(t)?f.adUnitLibsManager.manageDownloadLibsFileByFiletype(c.libsCacheFiles.dapi):u.Utils.returnResolvedPromise(),(n=t,Z.isPrecache()&&En(n)?f.adUnitLibsManager.manageDownloadLibsFileByFiletype(c.libsCacheFiles.externalObfuscation).then(function(e){Vn(n,e)}):u.Utils.returnResolvedPromise()));var n}).then(Z.handleCacheClear).then(Oe(t)).then(function(){return A=!0,xe(t,i)}).fail(function(e){var n=e||"Fail parse adUnit info from api response";m.removeInventory(i),g.BN===c.productType&&H.trackEvent(S.getInventoryFailed,{generalMessage:n}),wn(),e&&f.log(e,f.LogLevels.error),X.inventoryEmpty(e||n),q.demandType===g.demandSourceType.instance&&we()}),(new v.Deferred).resolve(v.extend({},e.seatbid.ext,{numOfAdUnits:e.seatbid.bid.length}))}(e)},gn=function(){v.each(T,function(e,n){clearTimeout(n)}),T=[]};function pn(){Q.publish("Engaged",[J.extendCallbackParamsWithProductConfig(q,{duringEngage:!0})])}function vn(){var e;e={productType:c.productType,message:O&&O.noInternet?O.noInternet:g.labels.noInternet,yes:"close",alwaysClose:!0},f.alert(e)}var mn=function(e,n,t){var i,r=f.AdUtils.getAdId(e);f.log("Error in loading ad - timeout in "+r,f.LogLevels.error),i=t?S.showAdFail:S.adLoadedError;var a={isprecache:Z.isPrecache()};a=f.AdUtils.updateEventWithAdParams(y,e,a),H.trackEvent(i,{callFailReason:"Error in loading ad - timeout"},a),J.extendCallbackParamsWithProductConfig(q,e),u.VastUtils.isVastCampaign(e)&&bn(e),Ve(r,e.inventoryId),yn(null),fe(),_.removeIframe(Ze(r)),y.viewType===g.viewTypes.externalView?f.removeAdUnitFromExternal(e):f.removeAdUnit(e)},bn=function(e){In()||(e&&e.cid?f.blacklistService.addToBlacklistedCampaigns(q.productType,q.demandGroupName,e.cid):f.log("DemandSource | cannot add to blacklist with no ad",f.LogLevels.error))},hn=function(){var e={errMsg:"",didSucceed:!0};return u.Utils.isDefined(y.allowMultiInitCalls)&&!y.allowMultiInitCalls?(e.errMsg=c.errors.init.multi,e.didSucceed=!1):Q.allowExternalCallToApi()?r.shouldFail(f.getConfig())&&(e.errMsg=c.errors.init.deviceOsIsNotSupported,e.didSucceed=!1):(e.errMsg="Already attempting to initiate",e.didSucceed=!1),e},Sn=function(){D&&clearTimeout(D)},yn=function(e){I=e},Cn=function(){return I},An=function(e,n){var t=m.getBackfillOffer(n);t&&e==t.id&&(w=!1)},Dn=function(){w=!0},In=function(){return!0===w},wn=function(){yn(null),fe(),X.reset(),b.reset()},Ln=function(){m.reset(),Q.publish("InitiatedTimeoutAttempt",[J.extendCallbackParamsWithProductConfig(q,{duringAPITimeoutAttempts:!1})]),wn()},Pn=function(){var e=!1;if(q.productType===g.BN&&m){var n=m.getActiveInventoryId();n&&(e=m.isNextOfferAvailable(n))}return e},Tn=function(){var e=m.getActiveInventoryId();if(e){var n=qe(e);m.removeOfferById(n.id,e),Be(e)}};function On(i,r,a){var e=function(e){if(!o){s=0,Q.publish("InitiatedTimeoutAttempt",[J.extendCallbackParamsWithProductConfig(q,{duringAPITimeoutAttempts:!1})]),e=e||c.errors.init[1002],g.BN===c.productType&&(H.trackEvent(S.getInventoryFailed,{generalMessage:e}),ie.resetExternalAdViewsIdentifiers());try{if("string"==typeof e){var n=parseInt(e);1001<n&&n<1006&&(e=c.errors.load.invalid)}}catch(e){}var t=J.extendCallbackParamsWithDemandConfig(q,{errMsg:e});f.callSDKFunction(a,t),u.PubSub.publish(c.productType+".failedToLoad",[t]),q.demandType===g.demandSourceType.instance&&we()}};if(wn(),Pn())Tn();else{var o=!1;(T.push(setTimeout(function(){e(c.errors.load.timeout),o=!0},7*c.timeUnit)),(new v.Deferred).resolve()).then(Sn).then(at).then(dn).always(gn).then(function(e){o||(s=0,Q.publish("InitiatedTimeoutAttempt",[J.extendCallbackParamsWithProductConfig(q,{duringAPITimeoutAttempts:!1})]),ee=!1,f.callSDKFunction(r,J.extendCallbackParamsWithDemandConfig(q,e)))},function(e){var n=new v.Deferred,t=G.doesAllowConsecutiveGatewayRequestsDuringLoad();return o||(e===c.errors.load.timeout&&t&&s<c.maxNumOfAttemptsToCallAPI?(Q.publish("InitiatedTimeoutAttempt",[J.extendCallbackParamsWithProductConfig(q,{duringAPITimeoutAttempts:!0})]),setTimeout(function(){On(i,r,a)},c.timerLengths.initAttemptsDelay),n.resolve()):n.reject(e)),n.promise()}).then(null,e)}}function Un(){W={productType:c.productType,adunitRetryAttempts:y.adunitRetryAttempts,adunitRetryInterval:y.adunitRetryInterval}}function Fn(e,n,i){if(e&&e.adm&&e.demandSourceName===d){f.log("loadAdWithAdm | resetting last response to none",f.LogLevels.verbose),f.unloadFramesByProduct(q),wn();(Q.publish("InitiatedAPICall",[J.extendCallbackParamsWithProductConfig(q,{duringInit:!0})]),u.Utils.returnResolvedPromise(e.adm)).then(un).then(fn,function(e){var n;switch(n=c.errors.init[1005],typeof e){case"object":e.responseText&&""!==e.responseText?n=e.responseText:e.errorMessage&&""!==e.errorMessage&&(n=e.errorMessage);break;case"string":""!==e&&(n=e)}return ke(),u.Utils.returnRejectedPromise(n)}).then(function(e){f.callSDKFunction(n,J.extendCallbackParamsWithDemandConfig(q,e))},function(e){try{if("string"==typeof e){var n=parseInt(e);1001<n&&n<1006&&(e=c.errors.load.invalid)}}catch(e){}var t=J.extendCallbackParamsWithDemandConfig(q,{errMsg:e});f.callSDKFunction(i,t),u.PubSub.publish(c.productType+".failedToLoad",[t]),q.demandType===g.demandSourceType.instance&&we()})}}function xn(e){return!(e.singleInventoryPerSession&&!0===e.singleInventoryPerSession)}function Nn(){return!ot()}function Mn(){return y.purgeAdunitLibsFile}function kn(){U.isVersionedAdunit=!0,f.adUnitGlobals.isUsingAdunitGraphicAssetsCacheFolder()&&(U.isUsingAdunitGraphicAssetsCacheFolder=!0)}function Bn(e){for(var n=0;n<e.length;n++){var t=e[n].ext.layoutData;if(u.Utils.isDefined(t)&&u.Utils.isDefined(t.html)&&0<t.html.length)return!0}return!1}function En(e){for(var n=!1,t=0;t<e.length;t++)if(f.AdUtils.isPlayablePrecachedAd(e[t])){n=!0;break}return n}function Vn(e,n){for(var t=0;t<e.length;t++)f.AdUtils.isPlayablePrecachedAd(e[t])&&(e[t].ext.ableToCache="success"===n)}function Rn(e){var n=y.numOfBannersToCache,t=We(e).slice(0,n),i=!0;return v.each(t,function(e,n){return!f.AdUtils.isCacheableAd(n)||Te(n)||Z.isAdInCache(f.AdUtils.getAdId(n))||Z.getAdStatusInQueue(f.AdUtils.getAdId(n))===Z.cachingStatus.pending||(i=!1),i}),i}function Kn(e){Z.isPrecache()&&!Rn(e.inventoryId)?Z.updateCache():L&&u.VastUtils.isVastCanPlayAgain(e)&&Z.cacheSingleAd(f.AdUtils.formatVastAdForPrecache(e,Ue.bind(null,e)))}function jn(e,n){if(f.log("engageEnd",f.LogLevels.verbose),J.shouldReceiveMessage(q,e))if(e.productType!==g.BN){Gn(e);var t=qn(y.supportManualLoad);Wn(Q)?e.engaged?t.handlePrefetchFailedOnVisible(e):t.handlePrefetchFailedOnBackground(e):e.engaged?t.handleAdClosed(e):t.handlePrefetchFailedOnBackground(e),(u.Utils.isFunction(n)?n:function(){})()}else $e(e)}function Wn(e){f.log("getAndResetErrorStateFromTaskManager",f.LogLevels.verbose);var n=e.getStatus().adErrorState;return e.publish("AdErrorState",[J.extendCallbackParamsWithProductConfig(q,{error:!1})]),n}function Gn(e){f.log("_resetPreloadedAd",f.LogLevels.verbose),Xe(e),H.resetBaseData(g.baseDataKeys),b.setCanPreloadFlag(!0)}function qn(e){return e?Hn:Jn}var Hn={handleCappingOnAdClosed:function(e){f.log("_handleCappingOnAdClosed | ManuelLoad",f.LogLevels.verbose),this.publishNoMoreOffers(g.noMoreOffersReason.noMoreOffersToShowInFeed),we(e)},handlePrefetchFailedOnBackground:function(e){f.log("_backgroundPrefetchFailed | ManualLoad",f.LogLevels.verbose),l.getNextAd(!1,e.inventoryId,!0)?Kn(e):(ot()&&rt(),this.publishNoMoreOffers(g.noMoreOffersReason.noMoreOffersToShowInFeed))},handlePrefetchFailedOnVisible:function(e){f.log("handlePrefetchFailedOnVisible | manuel load",f.LogLevels.verbose),Kn(e)},handleAdClosed:function(e){f.log("handleAdClosed | manuel load",f.LogLevels.verbose),l.isDemandCapped()?this.handleCappingOnAdClosed(e):this.bringTheNextAd(e)},bringTheNextAd:function(e){f.log("bringNextAd | ManualLoad",f.LogLevels.verbose),ot()?rt():this.shouldBringNewFeedInAdClosed(e)&&(m.removeInventory(e.inventoryId),be())},shouldBringNewFeedInAdClosed:function(e){return!e.forceNewFeedOnAdClose||e.forceNewFeedOnAdClose},publishNoMoreOffers:function(e){f.log("publishNoMoreOffers | ManualLoad",f.LogLevels.verbose);var n=J.extendCallbackParamsWithDemandConfig(q,{errorMsg:e||g.noMoreOffersReason.noMoreOffersToShowInFeed});u.PubSub.publish(c.productType+".NoMoreOffers",[n])}},Jn={handleCappingOnAdClosed:function(e){f.log("_handleCappingOnAdClosed | AutomaticLoad",f.LogLevels.verbose),X.instanceReachCapping(g.noMoreOffersReason.noMoreOffersToShowInFeed,we.bind(null,e))},handlePrefetchFailedOnBackground:function(e){f.log("_backgroundPrefetchFailed | AutomaticLoad",f.LogLevels.verbose),l.getNextAd(!1,e.inventoryId,!0)?this.bringNextAdFromExistingFeed(e):xn(y)?this.bringNextAdFromNewFeed():this.endSessionOnInstance(e)},handlePrefetchFailedOnVisible:function(e){f.log("handlePrefetchFailedOnVisible | automatic load",f.LogLevels.verbose),Kn(e)},handleAdClosed:function(e){(f.log("handleAdClosed | automatic load",f.LogLevels.verbose),l.isDemandCapped())?this.handleCappingOnAdClosed(e):l.getNextAd(!0,e.inventoryId,!0)?gt()&&xn(y)?(m.removeInventory(e.inventoryId),this.bringNextAdFromNewFeed(gt())):this.bringNextAdFromExistingFeed(e):xn(y)?(m.removeInventory(e.inventoryId),this.bringNextAdFromNewFeed()):this.endSessionOnInstance(e)},bringNextAdFromNewFeed:function(e){f.log("bringNextAdFromNewFeed | AutomaticLoad",f.LogLevels.verbose),ft(!1);var n=e?g.noMoreOffersReason.refreshFeedAfterClosingAd:g.noMoreOffersReason.noMoreOffersToShowInFeed;be(n)},bringNextAdFromExistingFeed:function(e){f.log("bringNextAdFromExistingFeed | AutomaticLoad",f.LogLevels.verbose),Kn(e),X.adClosedMovingToNextAd(u.VastUtils.areAllCampaignTypesAreVast(We(e.inventoryId)),g.noMoreOffersReason.noMoreOffersToShowInFeed)},endSessionOnInstance:function(e){f.log("endSessionOnInstance | AutomaticLoad",f.LogLevels.verbose),X.sessionOver(g.noMoreOffersReason.noMoreOffersToShowInFeed,we.bind(null,e))}};function Qn(e){if(J.shouldReceiveMessage(q,e)){var n=f.AdUtils.getAdId(e),t=Ke(n,e.inventoryId);Q.publish("Engaged",[J.extendCallbackParamsWithParentProductConfig({duringEngage:!0})]);t.displayMode;if(u.VastUtils.isVastCampaign(t)){var i=u.VastUtils.getVastViewCount(t);H.trackTimingStop(S.adVisible,{vastViewCount:u.VastUtils.getVastViewCountForEvent(i),eNameStart:S.showAd}),u.VastUtils.isVastCanPlayAgain(t)||Ve(n,e.inventoryId)}else H.trackTimingStop(S.adVisible,{eNameStart:S.showAd,sValue:f.getSValue()}),Ve(n,e.inventoryId);ne++,rt(),H.trackTimingStart(S.adVisibleToClose)}}function _n(e,n,t){return new(yt("../../components/precacheManager.js"))(e,n,zn(t))}function zn(e){var n,t=q.productType+"_"+q.demandSourceName;return n=q.productType===g.IS?q.productType:g.BC,a.cacheBase=e?n:t,a.precachePath="../"+a.cacheBase+"/",v.extend(a,q),a}function Xn(e){return q[e]}function $n(e,n,t){e&&e.demandSourceName===d&&at().then(function(e){n({payload:e,eventics:H})})}function Yn(e,n,t){if(f.log("in load ad with params: "+JSON.stringify(e),f.LogLevels.verbose),e&&e.demandSourceName===d){var i=hn();if(i.didSucceed)f.unloadFramesByProduct(q),f.log("resetting last response to none",f.LogLevels.verbose),On(e,n,t);else{var r=f.isRewardedAdBeforeInitLoadShow(c.productType)?S.initAdFail:S.loadAdFailed;H.trackEvent(r,{callFailReason:i.errMsg,demandSourceName:d}),f.callSDKFunction(t,J.extendCallbackParamsWithDemandConfig(q,{errMsg:i.errMsg}))}}else H.trackEvent(S.loadAdIgnored,{callFailReason:c.errors.general.dsNameNotValid})}function Zn(e,n,t){var i=qe(m.getActiveInventoryId());f.RingerSwitchService.isInitiated()&&i&&(f.RingerSwitchService.startListener(et(i.ext)),f.log("Ringer | startListener from DS.",f.LogLevels.info)),f.isLegacy(f.featureMap.demandState)||ct(),l.preload(!0,m.getActiveInventoryId()).then(function(){return l.show(Cn())}).then(function(){tt(n)},function(e){f.log("Cannot engage at this time "+Q.getStatusMsg(),f.LogLevels.error),Q.getStatus().isConnected||vn(),it(t,e)})}function et(e){return e?{ringerUpdateDelay:y.ringerUpdateDelay,shouldSetRingerUpdateDelay:f.AdUtils.isPlayableCampaign(e)||f.AdUtils.isMRAIDCampaign(e)||f.AdUtils.isExternalCampaign(e)}:{}}function nt(){X.instanceOnHold()}function tt(e){H.trackTimingStop(S.showAdSuccess,{eNameStart:S.showAd}),f.callSDKFunction(e,J.extendCallbackParamsWithDemandConfig(q))}function it(e,n){var t="Cannot engage offer at this time";u.PubSub.publish(c.productType+".failedToShow",[{errMsg:t}]);var i=n||t;i!==g.errors.showAdFailedReasons.preloadNoAd&&i!==g.errors.showAdFailedReasons.showNoAd&&(i=i+". "+Q.getStatusMsg()),H.trackEvent(S.showAdFail,{callFailReason:i}),f.callSDKFunction(e,J.extendCallbackParamsWithDemandConfig(q,{errMsg:t}))}function rt(){ot()&&at().then(function(e){u.PubSub.publish(c.productType+".payloadUpdated",[{payload:e,demandSourceName:d,isProgrammatic:ot()}])})}function at(){return Y.createPayload(ne-1,ee).then(function(e){return i=e})}function ot(){return e&&e.isProgrammatic}function st(){return!ot()}function ct(){K=new v.Deferred;var n=u.PubSub.subscribe(R+".getDemandSourceStateSuccess",function(e){J.shouldReceiveMessage(q,e)&&(u.PubSub.unsubscribe(n),u.PubSub.unsubscribe(t),"resolved"!==K.state()&&(j=e&&e.state||j,K.resolve(e)))}),t=u.PubSub.subscribe(R+".getDemandSourceStateFail",function(e){J.shouldReceiveMessage(q,e)&&(u.PubSub.unsubscribe(t),u.PubSub.unsubscribe(n),"resolved"!==K.state()&&K.resolve())}),e=J.extendCallbackParamsWithParentProductConfig(q);f.callSDKFunction("getDemandSourceState",e,"getDemandSourceStateSuccess","getDemandSourceStateFail")}function lt(){return F&&F.confirmCloseMsg[g.confirmCloseMsgMap[0]]}function dt(e){var n=f.AdUtils.getAdId(e),t=a.precachePath+n+"/";u.AdAssets.updateAdunitPrecachePath(e,t,f.AdUtils.isPlayablePrecachedAd(e))}function ut(e,n,t){var i=!1;return e&&!n&&(f.AdUtils.isPlayablePrecachedAd(t)?u.AdAssets.isAdAbleToCache(t)&&(i=!0):u.VastUtils.isVastCampaign(t)&&!Te(t)||(i=!0)),i}function ft(e){te=e}function gt(){return te}function pt(e,n,t){var i=c.timerLengths.loadAdTimeout;clearTimeout(P),P=setTimeout(function(){mn(e,n,t)},i)}function vt(e){!L&&u.VastUtils.isVastCampaign(e)&&(null!==B||u.Utils.isDefined(e.toRemove)&&e.toRemove||en(e).then(null,ge.bind(null,e)))}function mt(e){var n=v.extend({name:"hybridCampaignStatusChange"},e);f.postAdUnitEvent(JSON.stringify(n),!0)}function bt(e){mt({viewUniqueId:e.ext.viewUniqueId,status:e.ext.isHybridFlow?"success":"fail"}),f.HybridService.isHybridCampaign(e,y)&&null!==E&&"pending"===E.state()&&(E.resolve(),H.trackEvent(S.hybridFallback),f.HybridService.clearAppPage(e.ext.viewUniqueId),u.PubSub.publish("HybridService.closeHybridFlow",[{viewUniqueId:e.ext.viewUniqueId}]))}function ht(r,a,o,s){ie.checkStatusOfAdView().then(function(e){var n=qe(s);f.AdUtils.setViewType(r,n,g.viewTypes.externalView);var t=f.AdUtils.updateEventWithAdParams(r,n,{});H.updateBaseData(t),yn(n),kn(),o.shouldBuildAdUnitUrlForExternal=!0;var i=p.getAdunitUrl(!1,a,o);e.isExternalAdViewInitiated?(ce(n),ie.updateAdInAdView(i,n,a,r)):(pt(n,i,!1),ie.createAdUrlInAdView(i,n,a,r)),f.addAdToLoadedCreatives(n)})}var St={name:d,init:function(){l=this,t||(wn(),Z=_n(u,f,J.isLegacy(q)),re(),Z.init(),Q.init(),f.initEventics(J.extendCallbackParamsWithParentProductConfig(q,{})),t=!0)},isNextAvailable:function(e){if(Z.isPrecache()){var n=We(e);return Z.isNextAvailable(n)||n&&n[0]&&!n[0].isCacheable}return m.isNextOfferAvailable(e)||u.VastUtils.isVastCanPlayAgain(qe(e))},isDemandCapped:function(){return j===g.demandSourceStates.cappedPerSession&&u.Utils.isDefined(q.demandSourceName)&&f.log("isDemandCapped | demandSource "+q.demandSourceName+" is capped"),j===g.demandSourceStates.cappedPerSession},prepareAdToEngageEnd:function(e){return Te(e)?Z.deleteCachedCampaign(f.AdUtils.getAdId(e)):u.Utils.returnResolvedPromise()},getNextAd:function(e,n,t){var i=l.isNextAvailable(n);return Z.isPrecache()&&!i&&(i=He(t||e,n)),!i&&In()&&(i=m.getBackfillOffer(n)),i},attemptToPreloadAd:function(e,n){if(!l.isDemandCapped()||e){var t=l.isDemandCapped(),i=We(n),r=qe(n),a=rn(u.VastUtils.isVastCampaign(r))||u.VastUtils.areAllCampaignTypesAreVast(i),o=Z.isPrecache();X.preLoadNext(u.VastUtils.areAllCampaignTypesAreVast(i),sn.bind(null,n),u.VastUtils.isVastCampaign(r)),b.canPreloadCandidateAd(t,e,r,a,o)&&l.preloadAd(e,n)}else f.log("Skipping preload on capped demand",f.LogLevels.verbose)},preloadAd:function(e,n){l.preload(e,n).then(function(){e&&l.show(Cn())})},preload:function(e,n){var t,i=new v.Deferred;return Q.canPreload()?(t=Cn()||qe(n))||(t=He(e,n),Je(t,C.softprecache),t)?(v.extend(!0,t,q),f.isContainerLoaded(t)?i.resolve():f.MOATService.vastContainsMOATData(t)||f.MOATService.containsMOATData(t)?setTimeout(function(){l.preloadFlow(t,e,i)},0):l.preloadFlow(t,e,i),i.promise()):(f.log("Cannot preload with no offer",f.LogLevels.error),u.Utils.returnRejectedPromise(g.errors.showAdFailedReasons.preloadNoAd)):(f.log("Cannot preload at this time, "+Q.getStatusMsg(),f.LogLevels.error),u.Utils.returnRejectedPromise(g.errors.showAdFailedReasons.taskManagerPreload))},preloadFlow:function(e,n,t){b.preloadAdFinished();var i=!1,r=Z.isPrecache(),a={preload:!n};e.displayMode==C.softprecache&&(i=!0),ut(r,i,e)&&dt(e),f.log("line[1019]: preload with "+JSON.stringify(e),f.LogLevels.verbose);var o=f.AdUtils.updateEventWithAdParams(y,e,{});H.updateBaseData(o),yn(e),kn();var s=i?p.getAdunitUrl(!1,q,U):p.getAdunitUrl(r,q,U);pt(e,s,n),v.extend(y,a),f.AdUtils.setViewType(y,e),!f.HybridService.isHybridCampaign(e,y)||null!==E||n||u.Utils.isDefined(e.toRemove)&&e.toRemove||nn(e),h.shouldShowInStandAloneView(f.getConfig())&&f.AdUtils.extendSettingsWithStandaloneViewSupport(y),e=f.StoreKitService.updateAdWithStoreAppId(e,y),f.loadAdUnitUrl(e,s,q,y),vt(e),t.resolve()},show:function(e){return e?Q.canEngage()?(pn(),bt(e),f.displayAdUnitFrame(e),u.Utils.returnResolvedPromise()):u.Utils.returnRejectedPromise(g.errors.showAdFailedReasons.taskManagerEngage):u.Utils.returnRejectedPromise(g.errors.showAdFailedReasons.showNoAd)},getConfirmCloseMsg:lt,getDSEventics:se,adVisible:Qn,engageEnd:jn,initProduct:$n,instanceOnHold:nt,loadAd:Yn,updateEventicsWithAdData:ve,showAd:Zn,onShowAdFailed:it,getProperty:Xn,isProgrammaticInstance:ot,loadAdWithAdm:Fn,reset:Ln};return l=St,St}e.exports=t},{"../../components/CampaignsFilter.js":6,"../../components/VastService.js":39,"../../components/precacheManager.js":46,"../../patches/PublisherPatchEasybrain.js":104,"../DemandSource/DemandInstanceBuilder.js":64,"./../../components/MultipleInventories.js":23,"./../../components/sdkPluginType/SDKPluginTypeHandler.js":50,"./../RewardedVideo/availabilityManager.js":82,"./../RewardedVideo/availabilityReporter.js":83,"./../RewardedVideo/dsTaskManager.js":84,"./FetchDemand/FetchDirect.js":67,"./PayloadBuilder.js":68,"./PreloadAdManager":69}],71:[function(e,n,t){n.exports=function(e,n,t){return{initiated:!1,overrideFeedSettings:t,productType:e,errors:{init:{missingData:"Failed to get required parameters",multi:"Multiple Init calls not allowed",1001:"Trying to call API while during an un-finished process",1002:"1002",1003:"1003",1004:"Invalid API response",1005:"1005",deviceOsIsNotSupported:"Device OS is not Supported"},load:{noMoreOffers:"Failed to load "+e+" ad",duringLoad:"Load "+e+" is already in progress",duringShow:"Can not Load "+e+" when showing ad",timeout:"API request timeout",invalid:"Invalid API response",instanceExhausted:"Instance already exhausted",inStateVisibleOrInShowingProcess:"in state visible or inShowingProcess",inLoadingStateOrWaitingToLoad:"in state waitingToLoad or internalLoadingProcess",instanceOnHold:"Instance on Hold"},show:{isConnected:"no internet connection",duringEngage:"already engaged with an offer",notLoaded:"ad was not loaded, try to load before calling to show",duringLoad:e+" load is in progress",visible:e+" is already showing",instanceExhausted:"Can not show - Instance already exhausted"},vast:{noOffers:"empty"},general:{dsNotSet:"trying to call demandSource function, but demandSource object is not set",dsNameNotValid:"demand source name is not valid"}},displayMode:{nonprecache:"nonprecache",precache:"precache",softprecache:"softprecache"},libsCacheFiles:{dapi:"dapi",externalObfuscation:"externalObfuscation"},responseTypesWithReason:{none:0,ready:1,notReady:2},precacheConfig:{maxCachedCampaigns:10,nonPrecacheFallback:3e5,cacheBase:null,precachePath:null},timeUnit:6e4,timerLengths:{initAttemptsDelay:1e4,apiResponseTimeout:1e4,riDelay:12e4,loadAdTimeout:16e3},customDialog:4,filterDisableTypes:[],maxNumOfAttemptsToCallAPI:3,eventicsCategories:n}}},{}],72:[function(Sn,e,n){function t(c,l){"use strict";var t=Sn("../components/Constants.js"),d=Sn("./DemandSource/EventCategories.js")(t.IS),r,i=!1,a,e=l.MRAID,u=l.adUnitUrl,f,g="Interstitial",n="NativeCallback",o="TaskManager",s="PrecacheManager",p={videoIS:"videoInterstitial",imageIS:"imageInterstitial"},v=2,m={productType:g,maxCachedCampaigns:10,cacheBase:null,precachePath:null,nonPrecacheFallback:5*t.timeunit},b={productType:g},h={init:{missingData:"Failed to get required parameters",multi:"Multiple Init calls not allowed",invalid:"Invalid API response",timeout:"API request timeout"},load:{isConnected:"no internet connection",duringEngage:"already engaged with an offer",adState:{0:"not initiated yet",1:"not ready yet",5:"error loading ad"}},show:{isConnected:"no internet connection",duringEngage:"already engaged with an offer",available:"ad not available"}},S={1e3:"Ad not available",1001:"Not initiated yet",1002:"Multiple Init calls not allowed",1003:"Failed to get required parameters or they are invalid",1004:"Invalid API response",1005:"API request timeout",1006:"Already engaged with an offer",1007:"Not ready yet",1008:"Not ready",1009:"No internet connection",1010:"Failed to pre-load creative assets",1011:"Failed to load interstitial ad",1012:"Already engaged with another offer",1013:"Failed to init interstitial",1014:"Failed to load interstitial ad",1015:"Failed to show interstitial ad",1020:"Ad state error",1021:"Trying to call API while during an un-finished process",1022:"Failed on get inventory",1023:"No offers on prepare ad unit assets",1024:"Failed updating ad unit assets",1025:"No more offers",1026:"Cannot load at this time"},y={initISSuccess:null,initISFailure:null,loadISSuccess:null,loadISFailure:null,showISSuccess:null,showISFailure:null},C={none:0,ready:1,noOffers:2,noOffersRI:3},A={initial:0,notready:1,initiated:2,pending:3,loaded:4,error:5,opened:6},D=null,I=6e4,w={initAttemptsDelay:1e4,apiResponseTimeout:1e4,loader:5e3,riDelay:2*I,loadedState:30*I,p:5e3,np:12e3,buffer:2*I},L={},P="",T={},O={},U=!1,F=!1,x=!0,N=[],M=0,k=0,B="about:blank",E=A.initial,V=C.none,R,K=null,j=null,W=!1,G=!1,q,H=null,J=null,Q=null,_=null,z=null,X={seatbid:{}},$,Y,Z=1,ee=l.Cache,ne=l.adUnitGlobals,te=Sn("../components/CampaignsFilter.js")(c,l).factory(g),ie=(re=!1,ae=!1,oe=!1,se=!1,ce=!1,le=!0,{init:function(){re||(c.PubSub.subscribe(o+".Engaged",function(e){c.Utils.isDefined(e.duringEngage)&&(c.Utils.isDefined(e.productType)&&e.productType!==g?oe=e.duringEngage:ae=e.duringEngage),l.log("line[191]: IS engaged "+ae+", other engaged: "+oe,l.LogLevels.verbose)}),c.PubSub.subscribe(o+".CacheUpdateStatus",function(e){c.Utils.isDefined(e.duringCacheUpdate)&&c.Utils.isDefined(e.productType)&&e.productType===g&&(se=e.duringCacheUpdate)}),c.PubSub.subscribe(o+".AdStatusChange",function(e){c.Utils.isDefined(e.state)&&c.Utils.isDefined(e.productType)&&e.productType===g&&(l.log("Ad state changed from "+E+" to "+e.state,l.LogLevels.verbose),E=e.state)}),c.PubSub.subscribe(n+".enterBackground",function(){ce=!0}),c.PubSub.subscribe(n+".enterForeground",function(){ce=!1}),c.PubSub.subscribe(n+".viewableChange",function(e){}),c.PubSub.subscribe(n+".deviceStatusChanged",function(e){c.Utils.isDefined(e.connectionType)&&(le="none"!==e.connectionType&&"notReachable"!==e.connectionType)}),re=!0)},canLoad:function(){return(E===A.error||E===A.initiated)&&!ae&&le},canEngage:function(){return!ae&&!l.getCurrentDisplayedAd()&&le},canForceEngage:function(){return!ae&&!l.getCurrentDisplayedAd()&&le},canInitCallToApi:function(){return W?!se&&le:!(ae&&l.getCurrentDisplayedAdType()===g)&&!ce&&!se&&le},setConnection:function(e){le=e},getStatusMsg:function(){return"duringEngage:"+ae+" duringCacheUpdate:"+se+" appInBackground:"+ce+" isConnected:"+le+" ad state:"+E},getStatus:function(){return{duringEngage:ae,duringCacheUpdate:se,appInBackground:ce,isConnected:le,adState:E}},publish:function(e,n){return c.PubSub.publish(o+"."+e,n)},subscribe:function(e,n){return c.PubSub.subscribe(o+"."+e,n)},unsubscribe:function(e){return c.PubSub.unsubscribe(e)}}),re,ae,oe,se,ce,le,de=function(e){l.log("on creative opened",3),Y.trackTimingStart(d.adVisibleToClose),Y.trackEvent(d.adVisible),ie.publish("AdStatusChange",[{state:A.opened,productType:g}]),F=!0,Ke(e),je(e)},ue=function(){var e=Re();return e&&(l.log("pre load on get config is: "+O.preload,3),e.settings=e.settings||{},e.settings.preload=O.preload),e},fe=function(e){var n,t=l.getApiData({scdn:1,protocol:0,defaultProtocol:1}),i=l.decideUrlProtocolAccordingToHTTPSCompliance(),r=t.scdn;return n="prod"!==l.getEnv()?l.api()+"/users/staging/"+SuperSonicGlobalConfig.mobileSDKSettings.env:i+"//"+r,a.extend(!0,e,{settings:{protocol:i,urltocdn:n,precache:f.isPrecache()}})},ge=function(){c.PubSub.subscribe(s+".cacheUpdatedCallback",function(e){if(!e||e.productType===g){l.log("IS |  cacheUpdatedCallback "+JSON.stringify(e),l.LogLevels.verbose);var n=N.length,t=f.getCacheSizeByType(g),i=O.numOfBannersToInitSuccess<=n?O.numOfBannersToInitSuccess:n,r=f.areCampaignsAvailable(N,i);0===t?Te("Cache updated with zero campaigns"):U&&r&&Ue()}}),c.PubSub.subscribe(s+".campaignSavedCallback",function(e){if(!e||e.productType===g){l.log("IS campaignSavedCallback "+JSON.stringify(e),l.LogLevels.verbose);var n,t=-1,i={};c.Utils.isDefined(e.id)&&(n=Ve(e.id),t=c.Utils.isDefined(n.inventoryIndex)?n.inventoryIndex:-1,i=l.AdUtils.updateEventWithAdParams(O,n,{})),a.extend(i,{eNameStart:{name:d.campaignSavedCache.name+""},inventoryIndex:t}),Y.trackTimingStop(d.campaignSavedCache,i)}}),c.PubSub.subscribe(s+".campaignDownloadStartedCallback",function(e){if(!e||e.productType===g){var n=a.extend({},d.campaignSavedCache);n.name=n.name+(e.id||""),Y.trackTimingStart(n)}}),c.PubSub.subscribe(s+".campaignDeletedCallback",function(e){if(!e||e.productType===g){var n={};if(c.Utils.isDefined(e.id)){var t=Ve(e.id);n=l.AdUtils.updateEventWithAdParams(O,t,{})}l.log("IS campaignDeletedCallback "+JSON.stringify(e),l.LogLevels.verbose),Y.trackEvent(d.campaignDeletedCache,n)}}),c.PubSub.subscribe(s+".cacheAdsSuccessCallback",function(e){e&&e.productType!==g||l.log("IS cacheAdsSuccessCallback "+JSON.stringify(e),l.LogLevels.verbose)}),c.PubSub.subscribe(s+".cacheAdsFailedCallback",function(e){if(!e||e.productType===g){l.log("IS cacheAdsFailedCallback "+JSON.stringify(e),l.LogLevels.verbose);for(var n=e.deletedOffers.length,t=e.deletedOffers,i=0;i<n;i++){var r=Ve(t[i]),a=l.AdUtils.updateEventWithAdParams(O,r,{});Y.trackEvent(d.campaignFailedToCache,a),je(t[i])}var o=N.length,s=O.numOfBannersToInitSuccess<=o?O.numOfBannersToInitSuccess:o,c=f.areCampaignsAvailable(N,s);U&&c?Ue():Te(e.errorLog)}}),c.PubSub.subscribe("SDKController.AdVideoEnded",function(e){e.productType===g&&l.log("Got AdVideoEnded in IS",l.LogLevels.info)}),c.PubSub.subscribe("SDKController.engageEnd",function(e,n){e.productType===g&&(Qe(),c.Utils.isFunction(n)&&n.call())}),c.PubSub.subscribe(g+".GetConfig",function(e){if(e.productType===g){var n=ue();n&&fe(n),e.callback&&e.callback.call(null,n),clearTimeout(q),E!==A.error&&c.Utils.isDefined(e.errMsg)&&qe(e)}}),c.PubSub.subscribe("SDKController.AdLoaded",function(e){e.productType===g&&E!==A.error&&E!==A.loaded?Ge(e):l.log("Controller | IS | try to load when error or already loaded. adState: "+E,l.LogLevels.info)}),c.PubSub.subscribe("SDKController.AdError",function(e){e.productType===g&&(clearTimeout(q),c.Utils.isDefined(e.errMsg)&&qe(e))}),c.PubSub.subscribe("SDKController.AdPlaying",function(e){}),c.PubSub.subscribe("SDKController.AdPaused",function(e){}),c.PubSub.subscribe("SDKController.AdStarted",function(e){e.productType===g&&l.log("Got AdStarted in IS",l.LogLevels.info)}),c.PubSub.subscribe("SDKController.AdClicked",function(e){e.productType===g&&l.callSDKFunction("adClicked",{productType:g})}),c.PubSub.subscribe("SDKController.AdVisible",function(e){ve(e)}),c.PubSub.subscribe("SDKController.onAdWindowsClosed",function(e){e.productType!==g&&E===A.error&&We()}),ie.subscribe("AdStatusChange",function(e){e.productType===g&&_e(e)}),c.PubSub.subscribe("SDKController.Analytics",function(e){if(e.productType===g&&e&&e.action){var n=e.action,t=e.eventParam;"fireEvent"===n?Y.trackEvent(t.eName,t.label,t.data):"startTiming"===n?Y.trackTimingStart(t.eName,t.data):"stopTiming"===n?Y.trackTimingStop(t.eName,t.data):"setCustomData"===n&&Y.updateBaseData(t.data)}}),c.PubSub.subscribe(n+".initInterstitial",function(e,n,t){var i=tn();return y.initISSuccess=n,y.initISFailure=t,l.initEventics(b),Y.trackEvent(d.initAd),i.allowed?E===A.pending||E===A.loaded?($e(),void c.PubSub.publish(g+".CacheReady",[{productType:g,numOfAdUnits:N.length}])):(V=C.none,l.log("IS - resetting last response to none",l.LogLevels.verbose),void r.initInterstitial(e).then($e,ze)):(Xe(),void ze(i.errMsg))}),c.PubSub.subscribe(n+".loadInterstitial",function(e,n,t){y.loadISSuccess=n,y.loadISFailure=t,r.loadInterstitial(e).then(Ze,Ye)}),c.PubSub.subscribe(n+".showInterstitial",function(e,n,t){pe(e,n,t)}),c.PubSub.subscribe(n+".forceShowInterstitial",function(e,n,t){pe(e,n,t)}),c.PubSub.subscribe(g+".ActionClick",function(e){l.OpenURLService.open(e)||l.log(g+" failed to perform ActionClick",l.LogLevels.info)})};function pe(e,n,t){y.showISSuccess=n,y.showISFailure=t,r.showInterstitial(e).then(nn,en)}var ve=function(e){e.productType!==g?(ie.publish("Engaged",[{duringEngage:!0,productType:e.productType}]),E!==A.pending&&E!==A.loaded||l.log("line[456]: IS on engage with another offer",l.LogLevels.verbose)):(E===A.loaded&&(e?(l.log("creative open from ad visible",l.LogLevels.verbose),de(e.crid)):l.log("opened with no current ad",l.LogLevels.error)),Z++)},me=function(e){var n="Cannot load Interstitial ad: ";return e.isConnected||(n+=h.load.isConnected),e.duringEngage?n+=h.load.duringEngage:c.Utils.isDefined(h.load.adState[e.adState])&&(n+=h.load.adState[e.adState]),n},be=function(e){var n="Cannot engage interstitial ad: ";return D||(n+=h.show.available),e.isConnected||(n+=h.show.isConnected),e.duringEngage?n+=h.show.duringEngage:l.getCurrentDisplayedAd()&&(n+=S[1012]),n},he=function(){var e=ie.canInitCallToApi();return l.log("can init again?"+e+ie.getStatusMsg(),l.LogLevels.info),e?(Te(),Se(O.refreshInterval),l.log("Resetting last response to no offers RI",l.LogLevels.verbose),V=C.noOffersRI,r.initInterstitial()):j=setTimeout(function(){he()},w.riDelay),e},Se=function(e){l.log("setting refresh interval to: "+e,l.LogLevels.info),K&&clearInterval(K),0!==e&&(K=setInterval(function(){he()||clearInterval(K)},e*I))},ye=function(e){var n=e.ext||{};a.extend(n,l.getApplicationExternalConfig().getABTestConfiguration("Interstitial",n.landingId)),K&&clearInterval(K),c.Utils.isDefined(n.refreshinterval)&&0!==n.refreshinterval&&Se(n.refreshinterval),n.numOfBannersToCache=1,n.numOfBannersToInitSuccess=1,O=n},Ce=function(e){return!J||"pending"!==J.state()&&"resolved"!==J.state()?J=f.decidePrecacheStatus(e).then(function(){return U=!1,0<e.numOfCampaigns?ne.updateAdUnitGlobals(f.isPrecache()):(N=[],c.Utils.returnRejectedPromise("We did not receive any campaigns in inventory",1023))}).then(f.handleCacheClear).then(function(){return U=!0,c.Utils.returnResolvedPromise()},function(e){return Oe(),c.Utils.returnRejectedPromise(e,1024)}):J},Ae=function(e,n){var t,i=[];for(t=0;t<e.length;t++)f.isAdInCache(l.AdUtils.getAdId(n[t]))||i.push(n[t]);return i},De=function(e){var n={};return n.id=l.AdUtils.getAdId(e),n.bannerID=l.AdUtils.getBannerId(e),n.creativeId=l.AdUtils.getCreativeId(e),n.title="",n.staticContent=c.AdAssets.extractStaticFiles(e),n.lastUpdateTime=c.Utils.isDefined(e.lastUpdateTime)?e.lastUpdateTime:0,n},Ie=function(e){var n=[];return a.each(e,function(){n.push(De(this))}),n},we=function(e){a.each(e,function(e,n){n.inventoryIndex=e,f.isPrecache()&&f.setAdInventoryIndex(l.AdUtils.getAdId(n),e)})},Le=function(e){var t=[];return a.each(e,function(e,n){n.ext&&n.ext.appData&&n.ext.appData.adAssets&&(n.ext.appData.appImages=n.ext.appData.adAssets,delete n.ext.appData.adAssets),t.push(n)}),t},Pe=function(t){var i,e,r=f.isPrecache(),a=t.length;t=Le(t),we(t),i=Ie(t);var n=function(){if(0!==a)if(N=t.slice(0),r){if(f.areCampaignsAvailable(i,O.numOfBannersToInitSuccess))return Y.trackEvent(d.campaignsAvailableFromCache),void Ue();var e=Ae(t,i),n={cacheTimeoutSuccessCallback:function(){Pe(t)},cacheTimeoutFailCallback:Te,applicationUserId:T.applicationUserId,applicationKey:T.applicationKey,newAdsToEnterCache:e};f.handleCacheAds(n)}else Ue();else Te()};r&&(e=f.mergeCampaigns(i),l.log("IS | updateCurrentAds after merge "+JSON.stringify(e),l.LogLevels.verbose)),!r||O.purgeCacheOnInit?(l.log("already purged cache so go strait to adding the new ads",l.LogLevels.verbose),n()):f.clearCacheByType(e).always(n)},Te=function(){ie.publish("AdStatusChange",[{state:A.notready,productType:g}]),_&&_.reject("load Intertitial failed",1025),Fe(!1)};function Oe(){E!==A.initial&&ie.publish("AdStatusChange",[{state:A.error,productType:g}]),Fe(!1)}var Ue=function(){(V===C.none||V===C.noOffers||V===C.noOffersRI||W)&&(ie.publish("AdStatusChange",[{state:A.initiated,productType:g}]),W||(c.PubSub.publish(g+".CacheReady",[{productType:g,numOfAdUnits:N.length}]),V=C.ready),G?r.loadInterstitial():un())},Fe=function(e){"boolean"==typeof e?D!==e&&(D=e,l.log("available: "+e,l.LogLevels.verbose),l.callSDKFunction("interstitialAvailability",{available:e})):l.log("IS available param is not a boolean",l.LogLevels.error)},xe=function(e){var n=null;return c.Utils.isDefined(e)&&(c.Utils.isDefined(e.applicationUserId)&&""!==e.applicationUserId?n=e.applicationUserId:c.Utils.isDefined(e["deviceIds[IFA]"])&&""!==e["deviceIds[IFA]"]?n=e["deviceIds[IFA]"]:c.Utils.isDefined(e["deviceIds[IDFV]"])&&""!==e["deviceIds[IDFV]"]?n=e["deviceIds[IDFV]"]:c.Utils.isDefined(e["deviceIds[AID]"])&&""!==e["deviceIds[AID]"]&&(n=e["deviceIds[AID]"])),n};function Ne(){if(ie.canInitCallToApi())return c.Utils.returnResolvedPromise();var e="trying to call API while during an un-finished process";return l.log(e+ie.getStatusMsg(),l.LogLevels.error),c.Utils.returnRejectedPromise(e,1021)}function Me(e){var n=new a.Deferred;return(T=e).impressionsCount=Z-1,l.shouldExtendApiDataWithDebugData()?l.extendApiDataWithDebugParams(T).then(function(e){n.resolve(e)}):n.resolve(T),n.promise()}function ke(e,n){J=null,(H=e.seatbid.bid||e.seatbid[0]&&e.seatbid[0].bid)&&1<H.length&&(H=[H[0]]);var t=e.seatbid.ext||e.seatbid[0]&&e.seatbid[0].ext;if(Y.updateBaseData({landingId:t.landingId,strategyId:t.strategyId}),G){var i=Ce({numOfCampaigns:H.length,settings:O});return i.then(Pe.bind(null,H)),i}return c.Utils.returnResolvedPromise()}var Be=function(){var t=new a.Deferred;return k++,c.Utils.decodeValues(T),$.getInventory(T).then(function(e){t.resolve(e)},function(e){var n;e&&(n=e.errorMessage),n&&-1!==n.indexOf("timeout")&&k<3?setTimeout(function(){Be().then(function(e){t.resolve(e)},t.reject)},w.initAttemptsDelay):t.reject(n,1022)}).always(function(){ie.setConnection(!0)}),t.promise()},Ee=function(){k=0;var t=xe(T);return Be().then(function(e){ye(e.seatbid.ext?e.seatbid:e.seatbid[0]);var n=e.seatbid.bid||e.seatbid[0].bid;return n&&1<n.length&&(n=[n[0]]),te.filterByAppInstalled(n,O).then(function(){return c.Utils.returnResolvedPromise(e,t)})}).then(ke)},Ve=function(e){var n,t=null,i=N.length;for(n=0;n<i;n++)if(l.AdUtils.getAdId(N[n])==e){t=N[n];break}return t||l.log("Error in getCreativeById, id "+e+" not found in "+JSON.stringify(N),1),t},Re=function(){return N&&0<N.length?a.extend(!0,N[M],l.getFormattedDeviceData()):null},Ke=function(){return!0},je=function(e){var n,t=N.length;if(l.log("removing current creative",l.LogLevels.verbose),O.preload)for(n=0;n<t;n++)if(l.AdUtils.getAdId(N[n])==e){N.splice(n,1);break}We()},We=function(){l.log("self initiating call to API",l.LogLevels.verbose),Fe(!1),r.initInterstitial(R,!0).then(null,function(e){return Oe(),c.Utils.returnRejectedPromise(e)})},Ge=function(e){clearTimeout(q),c.Utils.isDefined(e.errMsg)?qe(e):(ie.publish("AdStatusChange",[{state:A.loaded,productType:g}]),l.onAdLoaded(Re()),c.Utils.isDefined(e.enableBackButton)&&l.setBackButtonState(e.enableBackButton))},qe=function(e){var n="Ad loaded with error: "+e.errMsg;Y.trackEvent(d.adLoadedError,{generalMessage:e.errMsg}),Je(e,n)},He=function(e){Je(e,"Timeout in loading ad")};function Je(e,n){var t=e.crid;ie.publish("AdStatusChange",[{state:A.error,errMsg:n,productType:g}]),l.log(n,l.LogLevels.error),Ke(t),je(t),e.productType=g,l.removeAdUnit(e)}var Qe=function(){ie.publish("Engaged",[{duringEngage:!1,productType:g}]),Y.unsetParamFromBaseData("landingId"),G&&r.loadInterstitial()},_e=function(e){e&&e.state&&(e.state===A.error?(clearTimeout(q),h.load.adState[A.error]=e.errMsg,_&&_.reject(e.errMsg,1020),Fe(!1)):e.state===A.loaded&&_&&_.resolve())};function ze(e){e=e||S[1013],Y.trackEvent(d.initAdFail,{callFailReason:e}),l.callSDKFunction(y.initISFailure,{errMsg:e})}function Xe(){!l.isLegacy(l.featureMap.loadIS)&&l.isSupportedOsVersion(g)||(E=E.error)}function $e(){x=!1,l.callSDKFunction(y.initISSuccess)}function Ye(e){e=e||S[1014],l.callSDKFunction(y.loadISFailure,{errMsg:e})}function Ze(){l.callSDKFunction(y.loadISSuccess)}function en(e){e=e||S[1015],Y.trackEvent(d.showAdFail,{callFailReason:e}),l.callSDKFunction(y.showISFailure,{errMsg:e})}function nn(){l.callSDKFunction(y.showISSuccess),Y.trackEvent(d.showAdSuccess)}function tn(){var e={allowed:!0};return l.isLegacy(l.featureMap.loadIS)?(e.allowed=!1,e.errMsg="SDK version "+l.getApiData({SDKVersion:1}).SDKVersion+" is not supported"):l.isSupportedOsVersion(g)?x?l.isLimitedDeviceModel()&&(e.errMsg="Device is not supported",e.allowed=!1):(e.allowed=!1,e.errMsg=h.init.multi):(e.allowed=!1,e.errMsg="Operating system version "+l.getApiData({deviceOSVersion:1}).deviceOSVersion+" is not supported"),e}function rn(){return j&&(clearTimeout(j),j=null),c.Utils.returnResolvedPromise()}function an(){return Ne().then(l.getAPIRequiredData).then(Me).then(Ee).then(function(){H&&0<H.length?ie.publish("AdStatusChange",[{state:A.initiated,productType:g}]):Te()})}function on(e,n){if(Q&&"pending"===Q.state())return Q;W=n;var t=l.getApplicationInfo(b,e).then(rn);return Q=t,(G||n)&&(Q=t.then(an)),Q}function sn(e){var n=l.getApiData({deviceOs:1}).deviceOs;O.standaloneView=e.type===p.imageIS&&e.templateid==v&&n===t.deviceOs.ios,O.translucentView=e.type===p.imageIS&&e.templateid==v&&n===t.deviceOs.android}function cn(){return E===A.initial&&!G&&Q&&"resolved"===Q.state()?an():E===A.error?c.Utils.returnRejectedPromise(null,1020):c.Utils.returnResolvedPromise()}function ln(){return Y.trackEvent(d.loadIS),Y.trackTimingStart(d.loadAdToAdReady),Y.trackTimingStart(d.loadAdToShowAd),cn().then(r.load).then(Fe.bind(null,!0)).then(function(){Y.trackTimingStop(d.loadAdSuccess,{eNameStart:d.loadAdToAdReady})},function(e,n){n=n||"1014",Y.trackTimingStop(d.loadAdFailed,{eNameStart:d.loadAdToAdReady,callFailReason:S[n]}),c.Utils.returnRejectedPromise(e)}).always(function(){_=null})}function dn(){var e,n;return _&&"pending"===_.state()?_.promise():(_||(_=new a.Deferred),E===A.loaded||D?_.resolve():ie.canLoad()?(Q&&"rejected"===Q.state()&&We(),a.when(Q).then(function(){return te.filterByAppInstalled(H,O).then(function(){return 0<H.length?c.Utils.returnResolvedPromise(H):(Te(),c.Utils.returnRejectedPromise(me(ie.getStatus()),1025))})}).then(function(){a.extend(O,{preload:!0}),ie.publish("AdStatusChange",[{state:A.pending,productType:g}])}).then(function(){return G?(un(),c.Utils.returnResolvedPromise(H)):Ce({numOfCampaigns:H.length,settings:O}).then(function(){return Pe(H),c.Utils.returnResolvedPromise(H)})}.bind(null,H)).then(null,_.reject)):(n=ie.getStatus(),e=me(n),l.log(e,l.LogLevels.error),G&&((E!==A.initial||Q&&"pending"===Q.state())&&E!==A.notready||(Y.trackEvent(d.initBeforeLoad),We())),_.reject(e,1026)),_.promise())}function un(){var e,n,t=f.isPrecache();if(e=Re()){var i=Ve(l.AdUtils.getAdId(e)),r=l.AdUtils.updateEventWithAdParams(O,i,{});if(Y.updateBaseData(r),t){var a=l.AdUtils.getAdId(e),o=m.precachePath+a+"/";e=c.AdAssets.updateAdunitPrecachePath(e,o)}B=u.getAdunitUrl(t,b),sn(e.ext);var s=w.np;clearTimeout(q),q=setTimeout(function(){He(e)},s),l.loadAdUnitUrl(e,B,b,O)}else n="No available creative in load attempt",l.log(n,l.LogLevels.error),ie.publish("AdStatusChange",[{state:A.notready,productType:g}]),_.reject(n)}function fn(){return r.show().always(function(){z=null})}function gn(){var e;if(z&&"pending"===z.state())return z.promise();if(z||(z=new a.Deferred),l.log(ie.getStatusMsg(),l.LogLevels.verbose),!ie.canEngage())return e=be(ie.getStatus()),z.reject(e),z.promise();Y.trackTimingStop(d.showAd,{eNameStart:d.loadAdToShowAd});var n=Re();ie.publish("Engaged",[{duringEngage:!0,productType:g}]);return l.loadAdUnitUrl(n,B,b,{preload:!1}),l.displayAdUnitFrame(n),z.resolve(),z.promise()}var pn=function(){var e=l.getProtocol();L={dev:e+t.gatewayDestinationMap.IS.production,stage:e+t.gatewayDestinationMap.IS.production,prod:e+t.gatewayDestinationMap.IS.production}},vn=function(e){return L[e]||L.prod};function mn(){m.cacheBase=b.productType,m.precachePath="../"+m.cacheBase+"/",a.extend(m,b)}function bn(){return m}var hn={init:function(){r=this,a=l.jQuery(),pn();var e=vn(l.getEnv());if(f=new(Sn("../components/precacheManager.js"))(c,l,bn()),$=new(Sn("../components/FetcherService.js"))(e,X,w.apiResponseTimeout),!i){N=[];var n={productChance:(l.getEnv(),1),baseData:{productType:g}};Y=c.Eventics.createEventic(n),mn(),ie.init(),ge(),f.init(),P=ne.getStaticGlobalsUrl(),G=l.isLegacy(l.featureMap.selfLoadingIS),i=!0}},getCurrentAd:function(){return a.extend(Re(),{type:g})},isNextAvailable:function(){return!1},initInterstitial:on,loadInterstitial:ln,showInterstitial:fn,load:dn,show:gn,className:g};return hn}e.exports=t},{"../components/CampaignsFilter.js":6,"../components/Constants.js":7,"../components/FetcherService.js":11,"../components/precacheManager.js":46,"./DemandSource/EventCategories.js":65}],73:[function(e,n,t){n.exports=function(e,n){return{NativeAPI:{init:".initInterstitial",load:".loadInterstitial",show:".showInterstitial"},ControllerCallbacks:e.ControllerCallbacks,AdUnitCallbacks:e.AdUnitCallbacks,ControllerNativeAPI:e.NativeAPI,DemandName:"InterstitialDS",ProductName:"Interstitial",Features:{allowMultiInitCalls:!0,reportOnAdunitReady:!0,forceNewFeedOnAdClose:!0,supportManualLoad:!0,preFetchAllVasts:!0},gatewayDestinationMap:{prod:n.gatewayDestinationMap.IS.production},amountOfInventories:1,allowConsecutiveGatewayRequestsDuringLoad:!0}}},{}],74:[function(a,e,n){e.exports=function(t,i){var r=a("../components/Constants.js");return{create:function(){if(i.isLegacy(i.featureMap.MDS[r.RV]))return new(a("./Interstitial.js"))(t,i);var e=a("./AdapterSharedConfig.js"),n=a("./InterstitialDemandSource/AdConfiguration.js")(e,r);return new(a("./ProductAdapter.js"))(t,i,n,r)}}}},{"../components/Constants.js":7,"./AdapterSharedConfig.js":60,"./Interstitial.js":72,"./InterstitialDemandSource/AdConfiguration.js":73,"./ProductAdapter.js":76}],75:[function(Mn,e,n){function t(c,o){"use strict";var i=Mn("../components/Constants.js"),r,t=!1,n=10,a=6e4,s="https://guc-api.sonic-us.supersonicads.com/api/v1/guc.php?format=json",l="https://guc-api.sonic-us.supersonicads.com/api/v1/myOffers",d="openRTB",u=i.OW,f="TaskManager",g=i.CB,p=window.jQuery,e,v={},m,b={},h={},S={productType:u},y=i.confirmCloseMsgMap,C={missingData:"Failed to get required parameters",invalid:"Invalid API response",appInfo:"Failed to retrieve application info",timeout:"API request timeout",server:"Server error",engaged:"Already engaged with OfferWall product",adunitAssetsTimeout:"Timeout in loading ad unit static assets",closeBeforeVisible:"User closed before ad loaded",missingDeviceIds:"Missing deviceIds",preconditions:"Failed to initiated OW, preconditions did not pass"},A={adunit:"adunit",inventory:"inventory",inventoryInBackground:"inventoryInBackground",preConditions:"preConditions",close:"close"},D={v:1,controllerId:1,applicationKey:0,applicationUserId:0,debug:0,language:0,maxVideoLength:0,itemName:0,itemCount:0,timestamp:0,localTime:1,timezoneOffset:1,itemSignature:0,disableCache:0,showDeliveryLimitationsLog:0,disableSession:0,minimumOfferCommission:0,minimumOfferCommissionSignature:0,applicationUserGender:0,applicationUserAgeGroup:0,applicationUserCreationDate:0,applicationUserCreationDateSignature:0,demoCampaigns:0,appOrientation:1,mobileCarrier:0,connectionType:1,iphoneAppOnIpadDevice:0,deviceOs:1,SDKVersion:1,deviceOSVersion:1,deviceOEM:0,deviceVolume:0,immersiveMode:0,"deviceIds[OpenUDID]":0,"deviceIds[IFA]":0,"deviceIds[IDFV]":0,"deviceIds[SERIAL]":0,"deviceIds[AndroidID]":0,"deviceIds[IMEI]":0,"deviceIds[AID]":0,deviceWidthDP:0,deviceHeightDP:0,deviceLanguage:0,deviceModel:0,diskFreeSize:1,country:0,pageSize:0,page:0,landingId:0,customParams:0,admin:0,useClientSideCallbacks:0,isLimitAdTrackingEnabled:0,SDKPluginType:0,bundleId:0,jb:0,gpi:0,allowArbitraryLoads:0,allowArbitraryLoadsInWebContent:0,mcc:0,mnc:0,appVersion:0,batteryLevel:0,deviceScreenScale:0,androidIsVersion:0,cdnCn:0,sdkAbName:0,segmentId:0,segmentName:0,consent:0,moatSupported:0},I={settings:{},textData:{},offers:[]},w={SDKVersion:1},L={id:0,url:""},P={openAppStoreSheet:!0,preload:!1},T={osNotSupported:"Sorry, your operating system version is not supported.",dialogErrorMessage:"Sorry, we were unable to display the wall at the moment. Please try again later.",noOffers:"Sorry, we currently have no offers to display. Please try again later.",noInternet:"No internet connection. Please connect and try again."},O={showOWCalled:{name:"showOWCalled",id:16},showOWFail:{name:"showOWFail",id:17},inventoryGetToReceived:{name:"inventoryGetToReceived",id:233},initControllerToShowOWCalled:{name:"initControllerToShowOWCalled",id:234},showOWCalledToOwVisible:{name:"showOWCalledToOwVisible",id:235},adVisibleToClose:{name:"adVisibleToClose",id:222},initOW:{name:"initOW",id:13},initOWFail:{name:"initOWFail",id:14},initOWSuccess:{name:"initOWSuccess",id:127},staticAssetsLoaded:{name:"staticAssetsLoaded",id:126},dialogBoxExit:{name:"dialogBoxExit",id:155},dialogBoxResume:{name:"dialogBoxResume",id:156}},U={initOWSuccess:null,initOWFailure:null},F=0,x,N={},M,k,B,E,V,R=!1,K=!1,j=null,W=null,G=o.adUnitGlobals,q="#/?productType="+u+"&mode=msdkctrl",H=null,J=null,Q=null,_=null,z=null,X=!1,$=null,Y,Z={adUnitAssetsTimeout:6e4,pollAPITimeout:1e4},ee={offers:[],settings:{},textData:{noOffers:T.noOffers},ext:{emptyOWReason:"default empty OW reason"}},ne={precache:!1,getInventoryOnInit:!1,refreshInterval:0},te=Mn("../components/CampaignsFilter.js")(c,o).factory(u),ie,re,ae,oe=(se=!1,ce=!1,le=!1,de=!0,ue=!1,{init:function(){se||(c.PubSub.subscribe(f+".Engaged",function(e){c.Utils.isDefined(e.duringEngage)&&(ce=e.duringEngage)}),c.PubSub.subscribe(g+".enterBackground",function(){le=!0}),c.PubSub.subscribe(g+".enterForeground",function(e){le=!1,!me()||e&&c.Utils.isDefined(e.active)&&!e.active||(o.log("poll on CPI offer closed/external browser offer closed (iOS flow)",o.LogLevels.verbose),K=!1,De())}),c.PubSub.subscribe(g+".viewableChange",function(e){e&&c.Utils.isDefined(e.isViewable)&&(!ue||!e.isViewable||c.Utils.isDefined(e.webview)&&"main"!==e.webview||(ue=!1,o.postAdUnitEvent(JSON.stringify({name:"OfferClosed"}))),me()&&e.isViewable&&c.Utils.isDefined(e.webview)&&"main"===e.webview&&(o.log("poll on CPI offer closed/external browser offer closed (Android flow)",o.LogLevels.verbose),K=!1,De()))}),c.PubSub.subscribe(g+".deviceStatusChanged",function(e){c.Utils.isDefined(e.connectionType)&&(de="none"!==e.connectionType&&"notReachable"!==e.connectionType)}),se=!0)},canEngage:function(){if(ce||!de)return!1;var e=o.getCurrentDisplayedAd();return!e||e.productType===i.BN},isConnected:function(){return de},setConnection:function(e){de=e},setAdOpened:function(e){ue=e},getStatusMsg:function(){return" duringEngage:"+ce+" appInBackground:"+le+" isConnected:"+de},getStatus:function(){return{duringEngage:ce,appInBackground:le,isConnected:de,isAdOpened:ue}},duringEngage:function(){return ce},publish:function(e,n){c.PubSub.publish(f+"."+e,n)},waitUntilAppInForeground:function(){var e=p.Deferred();return le?(o.log("Waiting for app to be in foreground",o.LogLevels.verbose),c.PubSub.subscribeOnce(g+".enterForeground",function(){e.resolve()})):e.resolve(),e.promise()},waitUntilConnected:function(){var n=p.Deferred();if(de)n.resolve();else{o.log("Waiting for internet connection",o.LogLevels.verbose);var t=c.PubSub.subscribe(g+".deviceStatusChanged",function(e){c.Utils.isDefined(e.connectionType)&&(de="none"!==e.connectionType&&"notReachable"!==e.connectionType)&&(c.PubSub.unsubscribe(t),n.resolve())})}return n.promise()}}),se,ce,le,de,ue,fe=function(){c.PubSub.subscribe(u+".ActionClick",function(e){o.OpenURLService.openForOW(e)||o.log(u+" failed to perform ActionClick",o.LogLevels.info)}),c.PubSub.subscribe("SDKController.AdClosed",function(e){if(e.productType===u){var n="ios"===o.getApiData({deviceOs:1}).deviceOs;oe.getStatus().isAdOpened&&n&&(o.postAdUnitEvent(JSON.stringify({name:"OfferClosed"})),oe.setAdOpened(!1),me()&&(o.log("poll on ad closed",o.LogLevels.verbose),De()))}}),c.PubSub.subscribe("SDKController.AdOpened",function(e){e.productType===u&&(oe.setAdOpened(!0),R&&Se(e.bannerId,!0))}),c.PubSub.subscribe("SDKController.engageEnd",function(e,n){e.productType===u&&(R&&(o.log("poll on engageEnd(OW closed)",o.LogLevels.verbose),De()),oe.publish("Engaged",[{duringEngage:!1,productType:u}]),ie.unsetParamFromBaseData("landingId"),c.Utils.isFunction(n)&&n.call(),X&&"pending"===J.state()&&Ee("User closed before visible"),H&&H.always(function(){H=null;Me(!0)}))}),c.PubSub.subscribe("SDKController.adLoaded",function(e){e.adType===u&&(o.log("received OW ad loaded event",o.LogLevels.verbose),o.onAdLoaded(L))}),c.PubSub.subscribe("SDKController.AdVisible",function(e){e.productType===u&&(o.log("line[324]: OW Ad Visible",o.LogLevels.verbose),ie.trackTimingStop(O.owVisible,{eNameStart:O.showOWCalledToOwVisible}),ie.trackTimingStart(O.adVisibleToClose))}),c.PubSub.subscribe("SDKController.Analytics",function(e){if(e.productType===u&&e&&e.action){var n=e.action,t=e.eventParam;"fireEvent"===n?ie.trackEvent(t.eName,t.label,t.data):"startTiming"===n?ie.trackTimingStart(t.eName,t.data):"stopTiming"===n?ie.trackTimingStop(t.eName,t.data):"setCustomData"===n?ie.updateBaseData(t.data):"unsetCustomData"===n&&(t&&t.data&&"bannerId"===t.data?ie.resetBaseData(i.baseDataKeys):ie.unsetParamFromBaseData(t.data))}}),c.PubSub.subscribe(g+".initOfferWall",function(e,n,t){o.log("OfferWall.js | CB.init called",o.LogLevels.verbose),o.getApplicationInfo(S).then(ve,function(e){o.callSDKFunction(t,{errMsg:e||C.appInfo})}).then(hn).then(function(){return o.callSDKFunction(n),c.Utils.returnResolvedPromise()},function(e){return o.callSDKFunction(t,{errMsg:e}),c.Utils.returnResolvedPromise()}).then(Fe).then(function(){R&&De()})}),c.PubSub.subscribe(g+".showOfferWall",function(e,n,t){e&&o.AppOrientationManager.updateAppOrientationByNewRestriction(e.orientationRestriction),r.showOfferWall().then(function(){o.callSDKFunction(n,{placementId:nn()})},function(e){o.callSDKFunction(t,{errMsg:e})}).always(function(){Dn(An())&&(H=null)})}),c.PubSub.subscribe(g+".getUserCredits",function(e,n,t){if(o.checkRequiredCallbackParams(["applicationKey","applicationUserId","productType"],e,"getOfferWallCredits",t).didSucceed&&e.productType===u){if(c.Utils.decodeValues(e),Pn(e)&&oe.duringEngage()){var i="Could not provide credits, user provided is different from current user";return o.callSDKFunction(t,{errMsg:i}),void o.log(i,o.LogLevels.error)}Fe(!0,e).then(function(){De(e,t)},function(e){o.log(e,o.LogLevels.error),o.callSDKFunction(t,{errMsg:"Failed to initiate client side callbacks"})})}}),c.PubSub.subscribe("SDKController.OWOfferClicked",function(e){o.getCurrentDisplayedAdType()===u&&be(e)}),c.PubSub.subscribe("SDKController.videoOfferClosed",function(){o.RingerSwitchService.isInitiated()&&(o.RingerSwitchService.stopListener(),o.log("Ringer | stop detecting ringer status changes from OW videoOfferClosed event.",o.LogLevels.info)),me()&&(K=!1,De())}),c.PubSub.subscribe("SDKController.dialogBoxResume",function(e){pe(e)&&ie.trackEvent(O.dialogBoxResume)}),c.PubSub.subscribe("SDKController.dialogBoxExit",function(e){pe(e)&&ie.trackEvent(O.dialogBoxExit)}),c.PubSub.subscribe(u+".GetCompletionOffers",function(e){if(c.Utils.isDefined(e.productType)){var n=qe();ae.getInventory(n.data,l,"json").then(ge.bind(null,e),ge.bind(null,e))}})};function ge(e,n){ae.isValidResponseStructure(n)&&(n=on(n)),e&&e.callback&&e.callback.call(null,n)}function pe(e){return e&&e.productType===S.productType}function ve(){return o._getApplicationConfigurationFromServer().then(function(){return ne=p.extend(!0,ne,o.getOfferWallConfiguration()),c.Utils.returnResolvedPromise(ne)},function(e){return o.log(e,o.LogLevels.error),c.Utils.returnResolvedPromise(ne)})}function me(){return R&&K}function be(e){o.log("Marked offer clicked for CSC with type "+e.type,o.LogLevels.verbose),K=!0}function he(e){return x=e&&e.placementId||F,o.log("Updated placement to "+x,o.LogLevels.verbose),x}var Se=function(e,n){V&&"pending"===V.state()&&p.when(V).always(function(){Se(e,n)}),(N[e]=n)?M++:M--,p.when(E).always(function(){o.log("poll counter set to: "+M,o.LogLevels.verbose),V=o.setUserData(b.applicationKey,b.applicationUserId,{counter:M}),p.when(V).always(function(){V=null})})},ye=function(){var e=new p.Deferred,n={counter:0,timestamp:0};return p.when(E,V).always(function(){p.when(o.getUserData(W,j)).then(function(e){M=n.counter=c.Utils.isDefined(e.counter)?e.counter:0,k=n.timestamp=c.Utils.isDefined(e.timestamp)?e.timestamp:0}).always(function(){p.when(o.setUserData(W,j,n)).then(function(){o.log("initiation done with resolve",o.LogLevels.verbose),e.resolve()},function(){o.log("initiation done with reject",o.LogLevels.error),e.reject()})})}),e.promise()};function Ce(){if(!re){re=!0,o.initEventics(S);var e={owPageNumber:0,isPrecache:ne.precache};ie.updateBaseData(e)}}var Ae=function(e){var n,t;if(E){if("pending"===E.state())return E.promise()}else E=new p.Deferred;return n=c.PubSub.subscribe(g+".adCreditedSuccess",function(){k=e.timestamp,E.resolve(),o.clearHandlers([n,t])}),t=c.PubSub.subscribe(g+".adCreditedFailed",function(e){E.reject(e.errMsg),o.clearHandlers([n,t])}),p.when(V).always(function(){o.callSDKFunction("adCredited",e,"adCreditedSuccess","adCreditedFailed")}),E.promise()},De=function(n,t){var i={},r=[];if(o.log("In poll with counter "+M,o.LogLevels.verbose),!c.Utils.isDefined(n)&&M<=0||B&&"pending"===B.state())o.log("Exit poll, p:"+(B?B.state():null)+" a:"+(E?E.state():null),o.LogLevels.verbose);else{var e=o.getApiData(w),a=0;if(c.Utils.isDefined(e.errMsg)||!c.Utils.isDefined(W)||!c.Utils.isDefined(j))return o.log(e.errMsg,o.LogLevels.error),void(c.Utils.isDefined(n)&&c.Utils.isDefined(t)&&o.callSDKFunction(t,{errMsg:"Failed to make polling request, missing data"}));c.Utils.decodeValues(e),B=p.ajax({url:s,data:{aid:W,auid:j,SDKVersion:e.SDKVersion,timestamp:k},timeout:Z.pollAPITimeout,type:"GET",dataType:"jsonp"}),p.when(B).then(function(e){if(o.log("Received poll data",o.LogLevels.verbose),!(c.Utils.isDefined(e.rewardsData)&&c.Utils.isDefined(e.sig)&&c.Utils.isDefined(e.rewardsSummary)))return o.log("Poll data error",o.LogLevels.error),void(c.Utils.isDefined(n)&&c.Utils.isDefined(t)&&o.callSDKFunction(t,{errMsg:"Failed to retrieve user completion data, data error"}));!c.Utils.isEmptyObject(e.rewardsData)||c.Utils.isDefined(n)?(o.log(a,o.LogLevels.verbose),i={productType:u,credits:e.rewardsFromTime,total:e.rewardsSummary,signature:e.sig,timestamp:e.latestCompletionTime,externalPoll:c.Utils.isDefined(n),totalCreditsFlag:0===k},p.when(E).always(function(){E=null,p.when(Ae(i)).then(function(){p.each(e.rewardsData,function(){this.b&&N[this.b]&&Se(this.b,!1),r.push(this.id),a+=this.r?this.r:0}),0<r.length&&p.ajax({url:e.callbackURL,type:"GET",dataType:"jsonp",data:{vt:r.join(","),applicationKey:W,applicationUserId:j},success:function(){o.log("successfully updated server on csc",o.LogLevels.verbose)},error:function(e){o.log("failed to update server on csc",o.LogLevels.error)}})}).always(function(){E=null})})):o.log("no new completions",o.LogLevels.verbose)},function(e){o.log("Error retrieve user completion data",o.LogLevels.verbose),c.Utils.isDefined(n)&&c.Utils.isDefined(t)&&o.callSDKFunction(t,{errMsg:"Failed to retrieve user completion data"})})}};function Ie(){return oe.canEngage()?c.Utils.returnResolvedPromise():oe.isConnected()?c.Utils.returnRejectedPromise(C.engaged):c.Utils.returnRejectedPromise(T.noInternet)}function we(){return"&isVersionedAdunit="+!0,"&isVersionedAdunit=true"}function Le(e){e&&(v=e)}function Pe(e){return e in v?v[e]:null}function Te(e,n){var t;return t=e?n:b=o.getApiData(D),c.Utils.returnResolvedPromise(t)}function Oe(e){return R=e&&("true"===e.useClientSideCallbacks||"boolean"==typeof e.useClientSideCallbacks&&e.useClientSideCallbacks),c.Utils.returnResolvedPromise(e)}function Ue(e){var n=Pn(e);return c.Utils.returnResolvedPromise(n,e)}function Fe(t,e){return Te(t,e).then(Oe).then(Ue).then(function(e,n){return e&&(R||t)?(o.log("Initiating CSC",o.LogLevels.verbose),Tn(n),ye()):c.Utils.returnResolvedPromise()})}function xe(){return Ie().then(o.getApplicationInfo.bind(o,S)).then(function(){return he(o.getApiData({placementId:1})),Fe()})}function Ne(){o.log("In Refresh Interval",o.LogLevels.verbose),oe.duringEngage()?o.log("Refresh Interval Popped, but during engage - ignore",o.LogLevels.verbose):oe.waitUntilAppInForeground().then(oe.waitUntilConnected).then(function(){o.log("Refresh Interval Popped, calling refreshOfferWall",o.LogLevels.verbose),o.unloadFramesByProduct(S),Me()})}function Me(e){Re(),oe.isConnected()&&($e(),ne.precache?pn():e&&!ne.getInventoryOnInit||Ve())}function ke(){$=setTimeout(function(){o.log("Adunit static assets timer popped",o.LogLevels.verbose),Ee(C.adunitAssetsTimeout)},Z.adUnitAssetsTimeout)}function Be(e){clearTimeout($),o.log("Resolve adunit static assets promise",o.LogLevels.verbose),J.resolve(e)}function Ee(e){clearTimeout($),o.log("Reject adunit static assets promise - "+JSON.stringify(e),o.LogLevels.verbose),J.reject.apply(J.reject,arguments)}function Ve(){var e=qe();e.errMsg||fn(e).always(Sn)}function Re(){_=z=Q=null}function Ke(){var e=c.PubSub.subscribe(u+".GetConfig",function(e){o.log("Received event OW getConfig",o.LogLevels.verbose),Be(e)});return function(){c.PubSub.unsubscribe(e)}}function je(){var e=c.PubSub.subscribe(f+".Engaged",function(e){e.productType===u&&(X=!0)});return function(){c.PubSub.unsubscribe(e)}}function We(){J=new p.Deferred,ie.trackTimingStart(O.staticAssetsLoaded);var e=Ke();return p.when(m?(o.log("Using cached adunit url: "+m,o.LogLevels.verbose),c.Utils.returnResolvedPromise({html:m})):G.getGlobalAssetsJSON()).then(function(e){if(m||(G.setAdunitVersion(e),m=G.getAdunitGlobalsHTML()),X)Ee("User closed before visible");else if("rejected"===Q.state())Ee("Finished when flow already failed");else{var n=G.getStaticGlobalsUrl()+m+q+we();setTimeout(function(){o.updateAdUnitUrl(L,n,S,{preload:!0,forceCreation:!0})},0),ke()}},Ee),J.promise().then(function(e){return ie.trackTimingStop(O.staticAssetsLoaded),e}).always(function(){e()})}function Ge(){var e={pass:!0,reason:"ok"};return oe.isConnected()?o.isSupportedOsVersion(u)?o.isLimitedDeviceModel()&&(e.reason="Device is not supported",e.pass=!1):(e.pass=!1,e.reason="Operating system version "+o.getConfigurationHelper().getDeviceOsVersion()+" is not supported"):(e.pass=!1,e.reason=T.noInternet),e}function qe(){var e={data:null,errMsg:null},n=o.getApiData(D);return c.Utils.isDefined(n.errMsg)?e.errMsg=n.errMsg:n==={}?e.errMsg=C.missingData:(n.format=d,c.Utils.decodeValues(n),e.data=n,b=n),e}function He(e){if(Q&&"pending"===Q.state()){var n={eNameStart:O.initOW,callFailReason:e.errMsg};e.errCode&&(n.errorCode=e.errCode),e.failFlow!=A.preConditions&&ie.trackTimingStop(O.initOWFail,n),o.log("Rejecting Init OW flow - "+e.errMsg,o.LogLevels.verbose),Q.reject(e)}}function Je(e,n){return{failFlow:e,errMsg:n}}function Qe(){return Je(A.close,"User closed before visible",!0)}function _e(e,n,t){var i=Je(e,n);return i.errCode=t||0,i}function ze(){return H&&"pending"===H.state()}function Xe(){return Q&&"pending"===Q.state()}function $e(){Y&&(clearTimeout(Y),Y=null)}function Ye(){var e=o.getApiData({scdn:1,protocol:0,defaultProtocol:1}),n=o.decideUrlProtocolAccordingToHTTPSCompliance(),t=e.scdn;return{protocol:n,urltocdn:"prod"!==o.getEnv()?o.api()+"/users/staging/"+SuperSonicGlobalConfig.mobileSDKSettings.env:n+"//"+t,preload:ne.precache,sValue:o.getSValue(),isIphoneX:o.getPatchesIphoneXObj().isIphoneX()}}function Ze(e,n){ie.trackTimingStop(O.initOWSuccess,{eNameStart:O.initOW});var t=ze(),i=e.offers&&0<e.offers.length;if(t||i)return T.confirmCloseMsg=e.textData.confirmCloseMsg,p.extend(e.settings,Ye(),o.getFormattedDeviceData()),en(e),tn(e).then(function(e){n.callback.call(null,e)});var r=Je(A.inventoryInBackground,"Empty Inventory");return o.log("No inventory available while preloading in background - Remove iframe",o.LogLevels.verbose),o.unloadFramesByProduct(S),He(r),c.Utils.returnRejectedPromise(r)}function en(e){if(e.settings.allowPopup)for(var n=e.offers,t=0;t<n.length;t++)if(3669653==n[t].campaignId){n[t].isPopup=!0;var i=o.decideUrlProtocolAccordingToHTTPSCompliance();return void(n[t].assets.banner=i+"//static.ssacdn.com/operations/1280x800_hs_image001_nb_en_32584/1280x800_hs_image001_nb_en.jpg")}}function nn(){return x||F}function tn(e){var n=new p.Deferred;if(!e.settings.placementsFlow)return n.resolve(on(e));if(ze())n.resolve(sn(e));else{o.log("Waiting for show before resolving getConfig",o.LogLevels.verbose);var t=c.PubSub.subscribe(g+".showOfferWall",function(){c.PubSub.unsubscribe(t),o.getApplicationInfo(S).then(function(){he(o.getApiData({placementId:1})),n.resolve(sn(e))})})}return n.promise()}function rn(e,n){if(!e)return!1;if(e.offers&&0<e.offers.length){var t=e.offers[0];return t.rewards&&t.rewards[n]}return!!e.settings.currency&&e.settings.currency[n]}function an(e,n){if(!e.intermediateData||!e.intermediateData.text)return e;var t=e.currency||n,i=e.intermediateData.text.actionButton,r=e.intermediateData.text.instructionDescription,a=e.intermediateData.text.instructions,o={"{{rewardCount}}":e.rewards,"{{currencyName}}":t};if(0<i.length&&(e.intermediateData.text.actionButton=c.Utils.replacePlaceHolder(i,o)),0<r.length&&(e.intermediateData.text.instructionDescription=c.Utils.replacePlaceHolder(r,o)),0<a.length)for(var s=0;s<a.length;s++)a[s]=c.Utils.replacePlaceHolder(a[s],o);return e}function on(e){for(var n=e.offers,t=0;t<n.length;t++)n[t]=an(n[t],e.settings.currency);return e}function sn(e){var n=e.offers,t=nn();rn(e,t)||(t=he({placementId:F})),e.settings.placementId=t;for(var i=0;i<n.length;i++)n[i].textData=n[i].textData[t],n[i].rewards=n[i].rewards[t],n[i]=an(n[i],e.settings.currency[t]);try{e.settings.currency=e.settings.currency[t],e.settings.doublePromotionData=e.settings.doublePromotionData[t],e.settings.linksData.contactSupport.label=e.settings.linksData.contactSupport.label[t],e.textData.header=e.textData.header[t]}catch(e){o.log("Failed to interpolate inventory response",o.LogLevels.error)}return e}function cn(e,t){t.failFlow!==A.close?(ze()?t.failFlow===A.inventory&&e.then(function(e){var n=p.extend({},ee);n.ext.emptyOWReason=t.errMsg,e.callback.call(null,n)}):(t.failFlow===A.inventory&&(t=Je(A.inventoryInBackground,"Failed to get Inventory"),o.log("Inventory failed while preloading in background - Remove iframe",o.LogLevels.verbose)),o.unloadFramesByProduct(S)),He(t)):He(t)}function ln(e){return o.log("Get Inventory",o.LogLevels.verbose),ae.getInventory(e.data,o.getBaseServerUrl()).then(function(e){if(X){var n=Qe();return c.Utils.returnRejectedPromise(n)}return e},function(e){return X?Qe():_e(A.inventory,e.errorMessage,e.errorCode)}).then(function(e){return te.filterByAppInstalled(e.offers,e.settings).then(function(){return c.Utils.returnResolvedPromise(e)})})}function dn(){return o.log("Load Adunit",o.LogLevels.verbose),We().then(null,function(e){return X?Qe():Je(A.adunit,e)})}function un(){if(o.log("OfferWall.js | _handlePreConditions",o.LogLevels.verbose),_&&"pending"===_.state())return o.log("OfferWall.js | _handlePreConditions already has deferred "+_.state(),o.LogLevels.verbose),_;var e;_=new p.Deferred,X=!1,Ce(),ie.trackEvent(O.initOW),ie.trackTimingStart(O.initOW),$e();var n=!0,t=Ge();t.pass||(He(e=Je(A.preConditions,t.reason)),n=!1);var i=qe();return i.errMsg&&(He(e=Je(A.preConditions,i.errMsg)),n=!1),n?_.resolve(i):_.reject(e),_.promise()}function fn(e){return o.log("OfferWall.js | _getInventoryWithPromise",o.LogLevels.verbose),z&&"rejected"!==z.state()?(o.log("OfferWall.js | _getInventoryWithPromise already has deferred "+z.state(),o.LogLevels.verbose),z):z=ln(e).then(function(e){e.settings=e.settings||{};var n=e.settings;return n.shouldStartMuted=o.AdUtils.isCampaignShouldStartMuted(o.getConfig().controllerConfig,i.OW),Le(p.extend(n,o.getApplicationExternalConfig().getABTestConfiguration("Offerwall",e.settings.templateId))),gn({feedSize:e.offers.length,landingId:e.settings.templateId,strategyId:e.settings.strategyId}),c.Utils.returnResolvedPromise(e)})}function gn(e){ie.updateBaseData(e)}function pn(){return o.log("OfferWall.js | _initOfferWall",o.LogLevels.verbose),Q&&"rejected"!==Q.state()?o.log("OfferWall.js | _initOfferWall using cached promise in Init OW flow",o.LogLevels.verbose):(Q=new p.Deferred,mn().then(function(){Q.resolve()})),Q.promise()}function vn(n){var t=new p.Deferred;return o.shouldExtendApiDataWithDebugData()?o.extendApiDataWithDebugParams(n.data).then(function(e){n.data=e,t.resolve(n)}):t.resolve(n),t.promise()}function mn(){var n=null;return un().then(function(e){return vn(e)}).then(function(e){return n=dn(),p.when(fn(e),n)}).then(function(e,n){return Ze(e,n)},function(e){return cn(n,e)}).always(Sn)}function bn(){return un().then(fn,function(e){return e&&e.errMsg||(e={errMsg:C.preconditions}),o.log("OfferWall.js | CB.init preConditionsFailed "+JSON.stringify(e),o.LogLevels.verbose),c.Utils.returnRejectedPromise(e.errMsg)}).then(null,function(e){return o.log("OfferWall.js | CB.init getInventoryPromise fail",o.LogLevels.verbose),e=e||C.server,c.Utils.returnRejectedPromise(e)}).always(Sn)}function hn(){return ne.precache?(pn(),c.Utils.returnResolvedPromise()):ne.getInventoryOnInit?bn():c.Utils.returnResolvedPromise()}function Sn(){if(!Y&&(ne.precache||ne.getInventoryOnInit)&&!Dn(An())){var e=isNaN(ne.refreshInterval)||0===ne.refreshInterval?n:ne.refreshInterval;o.log("Setting OW refresh interval - "+e+" minutes",o.LogLevels.verbose),Y=setTimeout(Ne,e*a)}}function yn(){X&&c.Utils.returnRejectedPromise(Qe().errMsg)}function Cn(e){"object"!=typeof e&&(e={errMsg:e});var n=e.errMsg||"Generic error on ShowOfferWall";return X?n:e.failFlow===A.adunit?(ie.trackEvent(O.showOWFail,{callFailReason:n}),Un(n),n):e.failFlow===A.preConditions?(Un(n),n):(o.log("Empty OfferWall error",o.LogLevels.verbose),Ln(),c.Utils.returnResolvedPromise())}function An(){var e,n=Pe("standaloneOfferWallData");if(n&&n.url){var t=n.url,i=nn();c.Utils.isDefined(i)&&(t=c.Utils.replacePlaceHolder(t,{"{{PlacementId}}":i})),-1===t.indexOf("openOWInStandalone")&&(t+="&openOWInStandalone=true"),e=p.extend({},n,{url:t})}return e}function Dn(e){return e&&e.openInStandaloneOfferWall&&e.url}function In(){return H&&"rejected"!==H.state()?(o.log("line[354]: Recalling showOW before resolving previous flow",o.LogLevels.error),ie.trackEvent(O.showOWFail,{callFailReason:"Recalling showOW before resolving previous flow"}),H):(H=new p.Deferred,Ce(),ie.incrementSessionNumber(),ie.trackTimingStart(O.initControllerToShowOWCalled,o.getApiData({controllerTimeLoaded:1}).controllerTimeLoaded),ie.trackTimingStop(O.showOWCalled,{eNameStart:O.initControllerToShowOWCalled}),xe().then(function(){if(Dn(t=An()))return c.Utils.returnResolvedPromise();var e=pn();return n=je(),wn(e),e.then(yn,Cn)},function(e){return Un(e),e}).always(function(){n&&n()}).then(function(){if(Dn(t)){var e={url:t.url,method:"external_browser"};o.openUrl(e)}else Ln();o.log("Resolving ShowOfferWall",o.LogLevels.verbose),H.resolve.apply(this,arguments)},function(e){o.log("Rejecting ShowOfferWall",o.LogLevels.verbose),H.reject(e)}),H.promise());var n,t}function wn(e){if(L.url=null,"resolved"!==e.state()||!ne.precache){var n=!!Pe(i.offerWallSetting.immersive)&&Pe(i.offerWallSetting.immersive);o.loadAdUnitUrl(L,L.url,S,{preload:!1,immersive:n,OLXD:Pe(i.offerWallSetting.OLXD)}),o.displayAdUnitFrame(L)}}function Ln(){o.loadAdUnitUrl(L,L.url,S,{preload:!1}),o.displayAdUnitFrame(L)}var Pn=function(e){var n=e.applicationUserId,t=e.applicationKey;return n!==j||t!==W},Tn=function(e){j=e.applicationUserId,W=e.applicationKey};function On(e){return T.dialogErrorMessage}function Un(e){o.log("No OfferWall dialog error",o.LogLevels.verbose);var n={productType:u,message:On(e),alwaysClose:!0,yes:"close",no:"OK"};o.alert(n)}function Fn(){var e=o.getProtocol();h={dev:e+i.gatewayDestinationMap.OW.production,stage:e+i.gatewayDestinationMap.OW.production,prod:e+i.gatewayDestinationMap.OW.production}}function xn(e){return h[e]||h.prod}var Nn={init:function(){r=this,p=o.jQuery(),Fn();var e=xn(o.getEnv());if(!t){var n={productChance:(o.getEnv(),1),baseData:{productType:u}};"android"===o.getConfig().mobileSDKSettings.deviceOs&&(D.deviceApiLevel=0),ie=c.Eventics.createEventic(n),ae=new(Mn("../components/FetcherService.js"))(e,I),oe.init(),fe(),t=!0}},getNextBtnText:function(){return c.Utils.isDefined(T.next)?T.next:"Next"},getConfirmCloseMsg:function(){return T.confirmCloseMsg&&T.confirmCloseMsg[y[0]]},showOfferWall:In,isNextAvailable:function(){return!1},getBack:function(){return L.url}};return p.extend(Nn,{_promisedCanEngage:Ie,_initiateClientSideCallbacks:Fe,_preShowOfferWall:xe,_refreshInterval:Ne,_refreshOfferWall:Me,_setAdunitAssetsTimer:ke,_resolveAdunitAssetsPromise:Be,_rejectAdunitAssetsPromise:Ee,_subscribeGetConfig:Ke,_subscribeCloseDuringShow:je,_loadAdunitToIframe:We,_verifyRestrictions:Ge,_getAPIRequiredData:qe,_rejectInitWithReason:He,_generateErrorObject:Je,_generateCloseBeforeVisibleErrorObject:Qe,_isDuringShow:ze,_isDuringInit:Xe,_clearRefreshInterval:$e,_handleDependenciesResolve:Ze,_handleDependenciesReject:cn,_getInventory:ln,_loadAdunit:dn,_handleInitOfferWallError:Cn,_showLoaderIfNeeded:wn,_initOfferWallByConfig:hn,_displayOfferWall:Ln,_getInventoryAndPreload:mn,_initOfferWall:pn,_setOfferWallSettings:Le,_getOfferWallSetting:Pe}),Nn}e.exports=t},{"../components/CampaignsFilter.js":6,"../components/Constants.js":7,"../components/FetcherService.js":11}],76:[function(f,e,n){e.exports=function(b,h,S,y){"use strict";var r,t,C=new(f("./DemandSource/EventCategories.js"))(S.ProductName),A=new(f("./DemandSource/dsConfig.js"))(S.ProductName,C,S.Features),o=new(f("./prdTaskManager.js"))(b,h,S.ProductName,y),a={},s={},n=!1,D=h.DemandUtils,i=[],I={loadSuccess:null,loadFailure:null},c=function(){b.PubSub.subscribe(y.CB+S.NativeAPI.init,function(n,e,t){var i=O(n);U(n).trackEvent(C.initAd,{demandSourceName:i});var r=h.getSDKLimitationData(S.ProductName);if(!r.didSucceed)return U(n).trackEvent(C.initAdFail,{},{callFailReason:r.errMsg,demandSourceName:i}),void h.callSDKFunction(t,{errMsg:r.errMsg,demandSourceName:i});var a=T(n);a&&(a.initProduct(n,function(e){u(n)&&e&&e.payload&&d(i,e.payload,S.ProductName)},void 0),a.statesManager&&a.statesManager.init(e))}),b.PubSub.subscribe(y.CB+S.NativeAPI.load,function(e,n,t){var i,r=O(e);if(I.loadSuccess=n,I.loadFailure=t,h.log("productAdapter - load",h.LogLevels.verbose),U(e).trackEvent(C.loadAd,{demandSourceName:r}),w(r))!function(e,n){var t=A.errors.load.instanceExhausted;e.productType=S.ProductName;var i=D.extendCallbackParamsWithDemandConfig(e,{errMsg:t});U(e).trackEvent(C.loadAdFailedForExhaustedInstance,{},i),h.callSDKFunction(n,i)}(e,t);else{if(P(r)||T(e),!(i=P(r))||!i.statesManager)return U(e).trackEvent(C.loadAdFailed,{callfailreason:A.errors.general.dsNotSet}),void h.callSDKFunction(t,{errMsg:A.errors.general.dsNotSet});if(e&&i.isProgrammaticInstance()&&(e.adm=b.Utils.parseJSON(decodeURIComponent(e.adm)),b.Utils.isEmptyObject(e.adm))){var a="unable to parse adm from native SDK";return U(e).trackEvent(C.loadAdFailed,{callfailreason:a}),void h.callSDKFunction(t,{errMsg:a})}if(e&&e.productType===y.BN){if(o=e,h.getConfig().mobileSDKSettings.deviceOs===y.deviceOs.ios&&!o.isViewControllerSet)return U(e).trackEvent(C.loadAdFailed,{callfailreason:"Missing Parameter : View Controller"}),void h.callSDKFunction(I.loadFailure,D.extendCallbackParamsWithDemandConfig(e,{errMsg:"Missing Parameter : View Controller"}));h.addExternalAdViewIdAndSetStatus(e)}var o,s,c,l,d,u,f,g,p,v=(l=e,d=n,u=t,L(c=i).bind(null,(s=c).isProgrammaticInstance()?s.loadAdWithAdm:s.loadAd,d,u,c.readyStateParams,l)),m=(g=n,p=t,L(f=i).bind(null,f.statesManager.instanceLoadFailedOnHold.bind(null,p,A.errors.load.instanceOnHold),g,p,f.readyStateParams));h.instancesManager.initiateDemandInstanceWithDependency(S.ProductName,r,v,m)}}),b.PubSub.subscribe(y.CB+S.NativeAPI.show,function(e,n,t){var i,r=O(e);if(U(e).trackEvent(C.showAd),e&&h.AppOrientationManager.updateAppOrientationByNewRestriction(e.orientationRestriction),w(r)){var a={errMsg:A.errors.show.instanceExhausted,demandSourceName:r};return U(e).trackEvent(C.showAdFail,{callfailreason:A.errors.show.instanceExhausted}),void h.callSDKFunction(t,a)}if(!(i=P(r)))return U(e).trackEvent(C.showAdFail,{callfailreason:A.errors.general.dsNotSet}),void h.callSDKFunction(t,{errMsg:A.errors.general.dsNotSet});o.canEngage()?(U(e).trackTimingStart(C.showAd),i.statesManager&&i.statesManager.show(i.showAd,n,t)):i.onShowAdFailed(t)})};function l(e){return e&&e.productType===S.ProductName}function w(e){return-1!==i.indexOf(e)}function L(e){return e.isProgrammaticInstance()?e.statesManager.loadWithADM:e.statesManager.load}function d(e,n,t){var i=f("../components/programmatic/TokenBuilder.js")(h,y).build(y.HTTPMethods.GET,t,n),r={demandSourceName:e,payload:JSON.stringify(i),productType:t};h.callSDKFunction(S.ControllerNativeAPI.readyForBid,r)}function P(e){return e?r[e]:null}function T(e){return function(e){var n=e.demandSourceName;if(r[n])return r[n];h.log("initiating "+S.ProductName+" demand source with configuration "+JSON.stringify(e),h.LogLevels.verbose);var t={productChance:1,baseData:{productType:S.ProductName,demandSourceName:n}},i=b.Eventics.createEventic(t);return r[n]=new(f("./DemandSource/ProductInstance.js"))(b,h,y,e,A,i),r[n].statesManager=new(f("./ProductAdapter/ProductStatesManager.js"))(b,h,e,A,y,r[n].getDSEventics(),S.NativeAPI),r[n].init(),r[n]}(h.instancesManager.createUninitializedDemandInstance(S.ProductName,O(e),u(e)))}function u(e){var n=!1;return e&&e.isProgrammatic&&"true"===e.isProgrammatic.toLowerCase()&&(n=!0),n}function O(e){return e&&e.demandSourceName?e.demandSourceName:S.DemandName}function U(e){var n=r[O(e)];return n&&n.getDSEventics()?n.getDSEventics():t}return{init:function(){if(r=this,!n){var e={productChance:1,baseData:{productType:S.ProductName}};t=b.Eventics.createEventic(e),function(){var e=h.getProtocol();a={dev:e+S.gatewayDestinationMap.prod,stage:e+S.gatewayDestinationMap.prod,prod:e+S.gatewayDestinationMap.prod};var n,t,i=h.getApiData({destinationMap:0});if(i&&i.destinationMap)for(n in s=i.destinationMap)t=s[n],s[n]&&0<s[n].length&&-1===s[n].indexOf(e)&&(s[n]=e+t)}(),c(),b.PubSub.subscribe(S.AdUnitCallbacks.engageEnd,function(e,n){if(l(e)){var t=P(e.demandSourceName);if(!t||!t.statesManager)return;(e&&e.engaged||S.shouldResetOnEngageEnd)&&t.statesManager.engageEnd(),t.engageEnd(e,function(){o.publish("Engaged",[{duringEngage:!1,productType:S.ProductName}]),b.Utils.isFunction(n)&&n()})}}),b.PubSub.subscribe(S.AdUnitCallbacks.adClicked,function(e){if(l(e)){var n=h.getCurrentDisplayedAd();n&&h.callSDKFunction(S.ControllerNativeAPI.adClicked,D.extendCallbackParamsWithProductConfig(n,{}))}}),b.PubSub.subscribe(S.AdUnitCallbacks.adVisible,function(e){if(l(e)){var n=P(e.demandSourceName);n?(n.adVisible(e),n.statesManager&&n.statesManager.adVisible()):h.log(S.AdUnitCallbacks.adVisible+" called without an active demand source name",h.LogLevels.verbose)}}),b.PubSub.subscribe(S.ProductName+S.ControllerCallbacks.payloadUpdated,function(e){e&&e.isProgrammatic&&d(e.demandSourceName,e.payload,S.ProductName)}),b.PubSub.subscribe(S.ProductName+S.ControllerCallbacks.cacheReady,function(e){var n=P(e.demandSourceName);n&&n.statesManager&&(n.readyStateParams=e,n.statesManager.cacheReady(I.loadSuccess,e))}),b.PubSub.subscribe(S.ProductName+S.ControllerCallbacks.allOffersVast,function(e){var n=P(e.demandSourceName);n&&n.statesManager&&n.statesManager.allOffersVast(I.loadFailure,e.errorMsg)}),b.PubSub.subscribe(S.ProductName+S.ControllerCallbacks.noMoreOffers,function(e){var n=P(e.demandSourceName);n&&n.statesManager&&n.statesManager.noMoreOffers(I.loadFailure,e.errorMsg)}),b.PubSub.subscribe(S.ProductName+S.ControllerCallbacks.failedToShow,function(e){var n=P(e.demandSourceName);n&&n.statesManager&&(h.log(S.ProductName+" failed to show - can not engage ad",h.LogLevels.error),n.statesManager.failedToShow())}),b.PubSub.subscribe(S.ProductName+S.ControllerCallbacks.failedToLoad,function(e){var n=P(e.demandSourceName);n&&n.statesManager&&(h.log(S.ProductName+" failed to load",h.LogLevels.error),U(e).trackEvent(C.loadAdFailed,{callFailReason:e.errMsg}),n.statesManager.failedToLoad())}),b.PubSub.subscribe(S.ProductName+S.ControllerCallbacks.actionClick,function(e){h.OpenURLService.open(e)||h.log(S.ProductName+" failed to perform ActionClick",h.LogLevels.info)}),b.PubSub.subscribe(S.ProductName+S.ControllerCallbacks.exhaustedDemandSource,function(e){if(h.log("exhaustedDemandSource: "+e.demandSourceName,h.LogLevels.verbose),l(e)){var n,t=O(e);(n=P(t))&&(n.exhausted=!0),h.instancesManager.exhaustedDemandSource(S.ProductName,e),i.push(t),e&&e.engaged||(h.log("Demand source deleted in BG: "+e.demandSourceName,h.LogLevels.verbose),delete r[t])}}),b.PubSub.subscribe(S.ProductName+S.ControllerCallbacks.fallbackToNonPrecache,function(e){if(l(e)){var n=P(e.demandSourceName);n&&n.statesManager&&n.statesManager.noMoreOffers(I.loadFailure,"failed due to fallbackToNonPrecache flow on manual load")}}),b.PubSub.subscribe("SDKController"+S.ControllerCallbacks.onAdWindowsClosed,function(e){if(l(e)){var n=P(e.demandSourceName);n&&n.exhausted&&(h.log("Demand source deleted: "+e.demandSourceName,h.LogLevels.verbose),delete r[e.demandSourceName])}}),b.PubSub.subscribe("ProductStatesManager.stateResolved",function(e){h.instancesManager.onStateResolve(e.productType,e.demandSourceName,e.response)}),S.ControllerCallbacks.reset&&b.PubSub.subscribe(S.ProductName+S.ControllerCallbacks.reset,function(e){var n=P(e.demandSourceName);if(n)return h.getExternalContainer().resetReportAdVisibilityFlags(),U(e).trackEvent(C.bannerDestroyed),n.statesManager.resetAdState(),void n.reset();h.log("Reset called without an active demand source name",h.LogLevels.verbose)}),o.init(),n=!0}},getProductType:function(){return S.ProductName},getDestination:function(e){return s&&s[e]?s[e]:a[h.getEnv()]},getAmountOfSupportedInventories:function(){return S.amountOfInventories},shouldAvoidHandleFrameClose:function(){return S.shouldAvoidHandleFrameClose},doesAllowConsecutiveGatewayRequestsDuringLoad:function(){return S.allowConsecutiveGatewayRequestsDuringLoad},getProductTM:function(){return o},getConfirmCloseMsg:function(e){return r[e]?r[e].getConfirmCloseMsg():null},className:"ProductAdapter"}}},{"../components/programmatic/TokenBuilder.js":47,"./DemandSource/EventCategories.js":65,"./DemandSource/ProductInstance.js":70,"./DemandSource/dsConfig.js":71,"./ProductAdapter/ProductStatesManager.js":78,"./prdTaskManager.js":102}],77:[function(e,n,t){n.exports={NativePrefix:"NativeCallback",className:"ProductAdapter",adStates:{notSet:0,waitingToLoad:1,inLoadingProcess:2,internalLoadingProcess:3,loaded:4,visible:5,inShowingProcess:6,instanceOnHold:7,failedInBackground:8}}},{}],78:[function(H,e,n){function t(o,s,c,l,r,d,u){var e=H("./ProductAdapterConstants.js"),f=e.adStates,n=f.notSet,g=l.eventicsCategories,p=!1,v=!1,m=s.DemandUtils,b=!1,h=m.extendCallbackParamsWithDemandConfig(c);function S(e){return n===e}function y(e){n=parseInt(e,10)}function t(){return n}function a(){return y(f.notSet)}function i(e,n,t){if(p)p=!1;else if(S(f.waitingToLoad))y(f.internalLoadingProcess);else{if(S(f.inLoadingProcess)||v||c.productType===r.BN&&S(f.loaded)){d.trackEvent(t,{callFailReason:n},h);var i=m.extendCallbackParamsWithDemandConfig(c,{errMsg:l.errors.load.noMoreOffers});s.callSDKFunction(e,i),o.PubSub.publish("ProductStatesManager.stateResolved",[m.extendCallbackParamsWithProductConfig(c,{response:!1})])}v=!1,a()}}function C(e){if(u)if(e===u.load){if(S(f.inLoadingProcess)||S(f.waitingToLoad))return l.errors.load.duringLoad;if(S(f.visible)||S(f.inShowingProcess))return l.errors.load.duringShow}else if(e===u.show){if(S(f.notSet))return l.errors.show.notLoaded;if(S(f.inLoadingProcess)||S(f.waitingToLoad))return l.errors.show.duringLoad;if(S(f.visible)||S(f.inShowingProcess))return l.errors.show.visible}}function A(e,n){if(u)if(e===u.load)(S(f.inLoadingProcess)||S(f.waitingToLoad))&&s.log(C(u.load),s.LogLevels.error);else if(e===u.show)if(S(f.notSet)||S(f.internalLoadingProcess)||S(f.inLoadingProcess)||S(f.waitingToLoad)){var t=m.extendCallbackParamsWithDemandConfig(c,{errMsg:C(u.show)});s.callSDKFunction(n,t)}else(S(f.visible)||S(f.inShowingProcess))&&s.log(C(u.show),s.LogLevels.error)}function D(e){var n=m.isLegacy(c)?{}:h;b=!0,s.callSDKFunction(e,n)}function I(e,n,t,i){c.productType!==r.BN?w(e,n,t,i):L(e,n,t,i)}function w(e,n,t,i){var r=function(){};if(S(f.notSet))y(f.inLoadingProcess),e(h,r,t);else if(S(f.loaded))d.trackEvent(g.loadAdSuccess,{},h),s.callSDKFunction(n,m.extendCallbackParamsWithDemandConfig(c,i)),o.PubSub.publish("ProductStatesManager.stateResolved",[m.extendCallbackParamsWithProductConfig(c,{response:!0})]);else if(p||v){var a=p?l.errors.load.inStateVisibleOrInShowingProcess:l.errors.load.inLoadingStateOrWaitingToLoad;d.trackEvent(g.loadAdIgnored,{callfailreason:a},h)}else S(f.visible)||S(f.inShowingProcess)?p=!0:B()?v=!0:S(f.instanceOnHold)?(y(f.waitingToLoad),e(h,r,t)):(d.trackEvent(g.loadAdFailed,{callfailreason:C(u.load)},h),A(u.load))}function L(e,n,t,i){d.trackTimingStart(g.bannerLoadToLoadSuccess);var r=function(){};S(f.notSet)?(y(f.inLoadingProcess),e(h,r,t)):S(f.loaded)?(y(f.notSet),e(h,void 0,t)):S(f.visible)||S(f.inShowingProcess)?(y(f.inLoadingProcess),e(h,r,t)):B()?v=!0:S(f.instanceOnHold)?(y(f.waitingToLoad),e(h,r,t)):S(f.inLoadingProcess)?d.trackEvent(g.bannerReloadDuringLoad,m.extendCallbackParamsWithDemandConfig(c)):(d.trackEvent(g.loadAdFailed,{callfailreason:C(u.load)},h),A(u.load))}function P(e,n,t,i,r){if(!b){var a="instance was not initiated",o=m.extendCallbackParamsWithDemandConfig(c,{errMsg:a});return d.trackEvent(g.loadAdFailed,{callfailreason:a},h),void s.callSDKFunction(t,o)}if(S(B()))return d.trackEvent(g.loadAdIgnored,{callfailreason:l.errors.load.inLoadingStateOrWaitingToLoad},h),void s.log("productStateManager | loadWithADM | already in loading process",s.LogLevels.verbose);y(f.inLoadingProcess),e(r,function(){},t)}function T(e,n,t){S(f.loaded)?(y(f.inShowingProcess),e(h,n,t)):(d.trackEvent(g.showAdFail,{callfailreason:C(u.show)},h),A(u.show,t))}function O(e,n){c.productType!==r.BN?U(e,n):F(e,n)}function U(e,n){var t=!1;(S(f.inLoadingProcess)||v)&&(t=!0),v=!1,y(f.loaded),t&&(d.trackEvent(g.loadAdSuccess,{},h),s.callSDKFunction(e,m.extendCallbackParamsWithDemandConfig(c,n)),o.PubSub.publish("ProductStatesManager.stateResolved",[m.extendCallbackParamsWithProductConfig(c,{response:!0})]))}function F(e,n){(S(f.inLoadingProcess)||S(f.visible)||v)&&(d.trackTimingStop(g.loadAdSuccess,{eNameStart:g.bannerLoadToLoadSuccess}),d.trackTimingStart(g.bannerLoadSuccessToVisible),s.callSDKFunction(e,m.extendCallbackParamsWithDemandConfig(c,n)),o.PubSub.publish("ProductStatesManager.stateResolved",[m.extendCallbackParamsWithProductConfig(c,{response:!0})])),v=!1,y(f.loaded)}function x(e,n){i(e,n,g.loadAdFailed)}function N(e,n){i(e,n,g.loadAdFailed)}function M(e,n){i(e,n,g.loadAdFailedForOnHoldInstance)}function k(){y(f.instanceOnHold)}function B(){return S(f.waitingToLoad)||S(f.internalLoadingProcess)}function E(){a()}function V(){a()}function R(){c.productType===r.BN?j():K()}function K(){y(p?f.inLoadingProcess:f.waitingToLoad)}function j(){y(f.notSet)}function W(){y(f.visible)}function G(){return S(f.failedInBackground)}var q={getAdState:t,init:D,load:I,show:T,cacheReady:O,allOffersVast:x,noMoreOffers:N,instanceOnHold:k,failedToShow:E,failedToLoad:V,instanceLoadFailedOnHold:M,isWaitingForLoad:B,engageEnd:R,isFailedInBG:G,adVisible:W,loadWithADM:P,resetAdState:a};return q}e.exports=t},{"./ProductAdapterConstants.js":77}],79:[function(o,e,n){e.exports=function(i,r){var a=o("../components/Constants.js");return{create:function(){var e;if(r.isLegacy(r.featureMap.rewardedAdInitLoadShow))return new(e=o("./RewardedVideo/RewardedVideo.js"))(i,r);e=o("./ProductAdapter.js");var n=o("./AdapterSharedConfig.js"),t=o("./RewardedVideo/RewardedAdConfiguration.js")(n,a);return new e(i,r,t,a)}}}},{"../components/Constants.js":7,"./AdapterSharedConfig.js":60,"./ProductAdapter.js":76,"./RewardedVideo/RewardedAdConfiguration.js":80,"./RewardedVideo/RewardedVideo.js":81}],80:[function(e,n,t){n.exports=function(e,n){return{NativeAPI:{init:".initRewardedVideo",load:".loadRewardedVideo",show:".showRewardedVideo"},ControllerCallbacks:e.ControllerCallbacks,AdUnitCallbacks:e.AdUnitCallbacks,ControllerNativeAPI:e.NativeAPI,DemandName:"SupersonicAds",ProductName:"RewardedVideo",Features:{allowMultiInitCalls:!0,forceNewFeedOnAdClose:!0,supportManualLoad:!0,preFetchAllVasts:!0},gatewayDestinationMap:{prod:n.gatewayDestinationMap.RV.production},amountOfInventories:1,allowConsecutiveGatewayRequestsDuringLoad:!0}}},{}],81:[function(P,e,n){function t(i,c){"use strict";var l,n=!1,o=P("../../components/Constants.js"),e={preFetchAllVasts:!0},d=o.RV,u=new(P("./../DemandSource/EventCategories.js"))(d),t=new(P("./../DemandSource/dsConfig.js"))(d,u,e),r=new(P("./../prdTaskManager.js"))(i,c,d,o),f,a={},s={},g,p=function(){i.PubSub.subscribe(d+".exhaustedDemandSource",function(e){var n=e;S(e)&&n.demandSourceName&&l[n.demandSourceName]&&(l[n.demandSourceName].exhausted=!0,c.instancesManager.exhaustedDemandSource(d,n),e&&e.engaged||(c.log("Demand source deleted in BG: "+n.demandSourceName,c.LogLevels.verbose),delete l[n.demandSourceName]))}),i.PubSub.subscribe("SDKController.AdVisible",function(e){if(S(e)){r.publish("Engaged",[h({duringEngage:!0})]);var n=I(e.demandSourceName);n&&n.adVisible(e)}}),i.PubSub.subscribe("SDKController.onAdWindowsClosed",function(e){if(S(e)){var n=e.demandSourceName;n&&l[n]&&l[n].exhausted&&(c.log("Demand source deleted: "+n,c.LogLevels.verbose),delete l[n])}}),i.PubSub.subscribe("SDKController.engageEnd",function(e,n){if(S(e)){var t=I(e.demandSourceName);t&&t.engageEnd(e,function(){D(e.engaged),i.Utils.isFunction(n)&&n()})}}),i.PubSub.subscribe("SDKController.AdClicked",function(e){var n=c.getCurrentDisplayedAd();S(e)&&n&&"CPVI"===n.ext.type&&c.callSDKFunction("adClicked",{productType:d,demandSourceName:n.demandSourceName})}),i.PubSub.subscribe(d+".ActionClick",function(e){c.OpenURLService.open(e)||c.log(d+" failed to perform ActionClick",c.LogLevels.info)}),i.PubSub.subscribe(d+".failedToLoad",function(e){e&&e.demandSourceName&&f.trackEvent(u.initAdFail,{callFailReason:e.errMsg})}),i.PubSub.subscribe(o.CB+".initRewardedVideo",function(n,t,i){if(!n||!n.demandSourceName)return f.trackEvent(u.initAdFail,{callFailReason:"Missing demand name on initiation"}),void c.callSDKFunction(i,{errMsg:"Missing demand name on initiation"});var e=c.getSDKLimitationData(d);if(e.didSucceed){var r=c.instancesManager.createUninitializedDemandInstance(d,n.demandSourceName);b(r);var a=l[r.demandSourceName],o=a.initProduct.bind(null,n,function(e){e&&e.eventics&&(e.eventics.trackEvent(u.initAd),e.eventics.trackTimingStart(u.initAdToAdReady)),a.loadAd(n,t,i)},i),s=a.instanceOnHold;c.instancesManager.initiateDemandInstance(d,n.demandSourceName,o,s)}else m(n.demandSourceName,i,e)}),i.PubSub.subscribe(o.CB+".showRewardedVideo",function(e,n,t){if(e&&e.demandSourceName){var i=I(e.demandSourceName);i?(v(i),c.AppOrientationManager.updateAppOrientationByNewRestriction(e.orientationRestriction),i.showAd(e,n,t)):c.callSDKFunction(t,{errMsg:"Error calling show, uninitialized product.",demandSourceName:e.demandSourceName})}else c.callSDKFunction(t,{errMsg:"Missing demand name on show."})}),i.PubSub.subscribe(o.CB+".initBrandConnect",function(n,t,i){if(c.isLegacy(c.featureMap.MDS[o.RV])){n||(n={}),n.demandSourceName=o.BC;var e=c.getSDKLimitationData(d);if(e.didSucceed){var r=c.instancesManager.createUninitializedDemandInstance(d,n.demandSourceName);c.initEventics({productType:o.BC});var a=b(r);a.initProduct(n,function(e){e&&e.eventics&&(e.eventics.trackEvent(u.initAd),e.eventics.trackTimingStart(u.initAdToAdReady)),a.loadAd(n,t,i)},i)}else m(n.demandSourceName,i,e)}else c.callSDKFunction(i,{errMsg:"Unsupported API function, use initAds instead."})}),i.PubSub.subscribe(o.CB+".showBrandConnect",function(e,n,t){if(c.isLegacy(c.featureMap.MDS[o.RV])){var i=I(o.BC);i?(e||(e={}),e.demandSourceName=o.BC,v(i),i.showAd(e,n,t)):c.callSDKFunction(t,{errMsg:"Error calling show, uninitialized product."})}else c.callSDKFunction(t,{errMsg:"Unsupported API function, use showRewardedVideo instead."})})};function v(e){e.updateEventicsWithAdData(),e.getDSEventics().trackEvent(u.showAd),e.getDSEventics().trackTimingStart(u.showAd)}function m(e,n,t){f.trackEvent(u.initAd,{callFailReason:t.errMsg,demandSourceName:e}),f.trackEvent(u.initAdFail,{callFailReason:t.errMsg,demandSourceName:e}),c.callSDKFunction(n,{errMsg:t.errMsg,demandSourceName:e})}function b(e){var n=e.demandSourceName;return l[n]||(l[n]=new(P("./../DemandSource/ProductInstance.js"))(i,c,o,e,t,null),l[n].init(),f=l[n].getDSEventics()),l[n]}function h(e){return(e=e||{}).productType=A(),e}function S(e){return e&&(e.productType===d||e.productType===o.BC)}function y(){var e=c.getProtocol();a={dev:e+o.gatewayDestinationMap.RV.production,stage:e+o.gatewayDestinationMap.RV.production,prod:e+o.gatewayDestinationMap.RV.production};var n,t,i=c.getApiData({destinationMap:0});if(i&&i.destinationMap)for(n in s=i.destinationMap)t=s[n],s[n]&&0<s[n].length&&-1===s[n].indexOf(e)&&(s[n]=e+t)}function C(e){return s&&s[e]?s[e]:a[c.getEnv()]}function A(){return g?o.BC:d}var D=function(e){e&&r.publish("Engaged",[{duringEngage:!1,productType:d}])};function I(e){return e?l[e]:(c.log("cannot extract demand source name from data",c.LogLevels.verbose),null)}function w(e){return l[e]?l[e].getConfirmCloseMsg():null}var L={name:"RewardedVideo",className:"RewardedVideo",init:function(){if(l=this,!n){var e={productChance:(c.getEnv(),1),baseData:{productType:d}};f=i.Eventics.createEventic(e),g=c.isLegacy(c.featureMap.MDS[o.RV]),p(),r.init(),y(),n=!0}},getProductType:A,getDestination:C,getProductTM:function(){return r},getConfirmCloseMsg:w,getAmountOfSupportedInventories:function(){return o.DEFAULT_AMOUNT_OF_INVENTORIES},doesAllowConsecutiveGatewayRequestsDuringLoad:function(){return!0}};return l=L,L}e.exports=t},{"../../components/Constants.js":7,"./../DemandSource/EventCategories.js":65,"./../DemandSource/ProductInstance.js":70,"./../DemandSource/dsConfig.js":71,"./../prdTaskManager.js":102}],82:[function(e,n,t){n.exports=function(e,t,c,n,f){var g=n.eventicsCategories,i=n.responseTypesWithReason,p={};function r(e){e&&t.isRewardedAdBeforeInitLoadShow(n.productType)&&f.trackEvent(g.noMoreOffers,{callFailReason:e}),c.publishAvailabilityFalse("NoMoreOffers",e)}function v(e,n){return p.preFetchAllVasts&&n||p.isPreCache&&e}function m(e,n,t,i,r,a,o){v(e,o)?(n(),r()):p.reportOnAdunitReady&&p.isPreCache&&0!==a||r()}function l(e,n){r(e),n()}function d(e,n){l(e,n)}function b(e,n){t.log("Availability Manager | reportAdAvailable",t.LogLevels.verbose),a(i.ready)||(a(i.none)&&(f.trackTimingStop(g.adReady,{eNameStart:g.initAdToAdReady}),f.trackTimingStart(g.adReadyToAdShow)),c.publishAvailabilityTrue(e,n))}function a(e){return c.isCurrentState(e)}function o(e,n){p.reportOnAdunitReady&&p.isPreCache&&0!==p.numOfBannersToInitSuccess?c.reportNotInInit():b(e,n)}return{setAMSettings:function(e,n){e&&"object"==typeof e&&(n?jQuery.extend(p,e):p=e)},cacheAdsFailed:function(e,n,t,i){e&&n?i():r(t)},cacheUpdate:function(e,n,t,i){0===e?r("Cache updated with zero campaigns"):n&&t&&i()},cacheTimeoutFail:function(e){r(e)},canReportAvailable:function(e,n,t,i){v(t,i)||o(e,n)},adLoadError:function(){r("Ad loaded with error")},inventoryEmpty:function(e){r(e)},engageEnd:function(e,n,t,i,r,a,o,s){e?d(r,a):(v(n,s)&&c.publishAvailabilityFalse("AllOffersVast",r),t||!p.isPreCache&&!i||(p.shouldRefreshInventory?o(r):l(r,a)))},reportBasedOnVast:m,shouldValidateVast:v,isCurrentState:a,preLoadNext:function(e,n,t){v(e,t)&&n()},allVastPromiseResolved:function(e,n){o(e,n)},notPreCacheMode:function(e){e()},preCacheMode:function(e,n,t,i,r,a,o,s){if(e&&f.trackEvent(g.campaignsAvailableFromCache),0===p.numOfBannersToInitSuccess)return c=t,l=o,d=r,u=a,v(i,s)?d():b(u,l),void c();var c,l,d,u;e?t():0===n&&m(i,r,0,0,t,n,s)},reset:function(){c.setLastResponse(i.none),p={}},adLoadedSuccessfully:function(e,n){(p.reportOnAdunitReady||p.preFetchAllVasts)&&p.isPreCache&&b(e,n)},instanceOnHold:function(){r("Instance on hold")},instanceReachCapping:function(e,n){d(e,n)},adClosedMovingToNextAd:function(e,n){v(e)&&c.publishAvailabilityFalse("AllOffersVast",n)},sessionOver:function(e,n){l(e,n)}}}},{}],83:[function(e,n,t){n.exports=function(a,e,o,s,n){var t=o.responseTypesWithReason,i=t.none,c=e.DemandUtils;function r(e){return i===e}function l(e,n,t,i,r){a.PubSub.publish(o.productType+"."+e,[c.extendCallbackParamsWithParentProductConfig(s,{numOfAdUnits:n,firstCampaignCredits:t,totalNumberCredits:i,errorMsg:r})])}function d(){n.publish("InitiatedAPICall",[c.extendCallbackParamsWithProductConfig(s,{duringInit:!1})])}return{setLastResponse:function(e){i=e},getLastResponse:function(){return i},publishAvailabilityTrue:function(e,n){d(),r(t.ready)||(l("CacheReady",e,1,n),i=t.ready)},publishAvailabilityFalse:function(e,n){d(),r(t.notReady)||("NoMoreOffers"===e||"AllOffersVast"===e&&r(t.ready))&&(l(e,0,0,0,n),i=t.notReady)},isCurrentState:r,reportNotInInit:d}}},{}],84:[function(e,n,t){n.exports=function(t,n,i,r){var a,e=!1,o=!1,s=!1,c=!1,l=!1,d=!1;function u(e){return e&&e.productType===i.productType&&(!i.demandSourceName||e.demandSourceName===i.demandSourceName)}return{init:function(){e||(t.PubSub.subscribe(r.taskManager+".InitiatedAPICall",function(e){u(e)&&t.Utils.isDefined(e.duringInit)&&(o=e.duringInit)}),t.PubSub.subscribe(r.taskManager+".AdErrorState",function(e){u(e)&&t.Utils.isDefined(e.error)&&(l=e.error)}),t.PubSub.subscribe(r.taskManager+".Engaged",function(e){u(e)&&t.Utils.isDefined(e.duringEngage)&&(s=e.duringEngage,n.log("duringEngage "+s+" on demand "+i.demandSourceName,n.LogLevels.verbose))}),t.PubSub.subscribe(r.taskManager+".CacheUpdateStatus",function(e){u(e)&&t.Utils.isDefined(e.duringCacheUpdate)&&(c=e.duringCacheUpdate)}),t.PubSub.subscribe(r.taskManager+".InitiatedTimeoutAttempt",function(e){u(e)&&t.Utils.isDefined(e.duringAPITimeoutAttempts)&&(d=e.duringAPITimeoutAttempts)}),e=!0,a=n[i.productType].getProductTM())},canEngage:function(){return!o&&!s&&a.canEngage()},canPreload:function(){return!l&&!o&&!s&&a.isConnected()},canInitCallToApi:function(){return s||o||c||!a.isConnected()?t.Utils.returnRejectedPromise():a.canInitCallToApi()},allowExternalCallToApi:function(){return!d},setConnection:function(e){return a.setConnection(e)},getStatusMsg:function(){return" duringInit:"+o+" duringEngage:"+s+" duringCacheUpdate:"+c+" error state:"+l+" during timeout attempts:"+d+a.getStatusMsg()},getStatus:function(){return{duringInit:o,duringEngage:s,duringCacheUpdate:c,adErrorState:l,timeoutAttempts:d,isConnected:a.isConnected()}},publish:function(e,n){t.PubSub.publish(r.taskManager+"."+e,n)}}}},{}],85:[function(t,e,n){e.exports=function(n,e,s,c){var l=t("./configurationValidator.js")(s,c.DebugLevels,c.errors),d=function(){var t=!0;return e.each(n.mobileSDKSettings,function(e,n){return e.match(/^deviceIds/)&&s.isDefined(n)&&n&&(t=!1),t}),t};return{parseConfiguration:function(e,n,t){var i,r,a=[],o=n.length;for(r=0;r<o;r++)s.isDefined(e[n[r]])||("applicationUserId"!==n[r]||d())&&a.push(n[r]);return 0<a.length?{didSucceed:(i={errMsg:c.errors.missing+JSON.stringify(a)},!1),errMsg:i}:l(e,t)},getDeviceApiLevel:function(){var e=n.mobileSDKSettings.deviceApiLevel;return"android"!==n.mobileSDKSettings.deviceOs||e?"ios"!==n.mobileSDKSettings.deviceOs||e||(e=n.mobileSDKSettings.deviceOSVersion.split(".")[0]):e=n.mobileSDKSettings.deviceOSVersion,e},getDeviceOsVersion:function(){var e=n.mobileSDKSettings.deviceOSVersion;return"android"===n.mobileSDKSettings.deviceOs&&(e=n.mobileSDKSettings.deviceApiLevel?n.mobileSDKSettings.deviceOSVersion:""),e}}}},{"./configurationValidator.js":89}],86:[function(e,n,t){n.exports=function(){return{adVisibleToClose:{name:"adVisibleToClose",id:222},adClosed:{name:"adClosed",id:100},OWClosed:{name:"OWClosed",id:104},getApplicationConfigurationError:{name:"getApplicationConfigurationError",id:135},getExternalApplicationConfigurationError:{name:"getExternalApplicationConfigurationError",id:136},openUrlError:{name:"openUrlError",id:114},getUserUniqueIdFailure:{name:"getUserUniqueIdFailure",id:242},setUserUniqueIdFailure:{name:"setUserUniqueIdFailure",id:243},cdnABTestSuccess:{name:"cdnABTestSuccess",id:223},cdnABTestFail:{name:"cdnABTestFail",id:224},cdnABTestException:{name:"cdnABTestException",id:225},latencyTestSuccess:{name:"latencyTestSuccess",id:244},latencyTestFail:{name:"latencyTestFail",id:245},latencyTestException:{name:"latencyTestException",id:246},userClosedBeforeAdVisible:{name:"userClosedBeforeAdVisible",id:151},controllerException:{name:"controllerException",id:153},mismatchAdLoadError:{name:"mismatchAdLoadError",id:206},dialogBoxExit:{name:"dialogBoxExit",id:155},dialogBoxResume:{name:"dialogBoxResume",id:156}}}},{}],87:[function(Ii,e,n){function P(p,v,m){var e=Ii("../../presenter/uiConfig.js"),n=Ii("../../components/Logger.js")(p.Utils),t=Ii("../AdUnitManager/AdUnitGlobals.js")(m),i=Ii("../AdUnitManager/AdUnitLibsManager.js")(p.Utils),r=Ii("../../components/DisplayedAdManager.js"),a=Ii("../AdUnitUrl.js")(t),o=Ii("./mainConfig.js")(),s=new(Ii("../../components/ExternalConfig")),c=Ii("./instancesManager.js")(p,m),l=new(Ii("../../components/BlacklistService"))(m),b=new(Ii("../../components/FrameHelper.js"))(p,n,v,m),d=Ii("./ConfigurationHelper.js"),u=Ii("../../components/AdOrientationManager.js"),f=Ii("../../components/containers/ContainerManager.js"),g=Ii("../../components/containers/ExternalContainer.js"),h=Ii("./sessionConfig")(),S=Ii("../../components/NativeLifeCycleEventsConstants.js"),y=Ii("../../patches/PatchesIphoneX.js"),C,A,D,I,w,L,P,T,O,U,F=0,x=!1,N,M,k=p.Utils,B=p.PubSub,E=null,V=null,R=[],K=!1,j=!0,W=!1,G="supersonicads",q="acknowledgeMessage",H=m.CB,J=m.BC,Q=m.RV,_=m.OW,z=m.IS,X=m.BN,$=m.errors,Y=m.videoStates,Z=m.closeButtonStates,ee=m.featureCompatibilityMap,ne=m.confirmCloseMsg,te=m.requiredDeviceInfo,ie=m.requiredAppInfo,re=m.optionalAppInfo,ae={v:"3.0.1",controllerId:(new Date).getTime()+"_"+Math.random(),controllerTimeLoaded:(new Date).getTime(),mobileSDKSettings:{protocol:null,defaultProtocol:null,securedProtocol:null,domain:null,overrideDebug:!1,defaultDebug:0,debug:0,appOrientation:null,mobileCarrier:null,connectionType:null,iphoneAppOnIpadDevice:null,deviceOs:"",SDKVersion:null,deviceOSVersion:null,deviceApiLevel:null,bundleId:null,deviceOEM:null,deviceScreenScale:null,"deviceScreenSize[width]":null,"deviceScreenSize[height]":null,"deviceIds[OpenUDID]":null,"deviceIds[IFA]":null,"deviceIds[IDFV]":null,"deviceIds[SERIAL]":null,"deviceIds[AndroidID]":null,"deviceIds[IMEI]":null,"deviceIds[AID]":null,deviceWidthDP:null,deviceHeightDP:null,deviceLanguage:null,deviceModel:null,diskFreeSize:null,geoLocation:null,isLimitAdTrackingEnabled:null,unLocked:null,gpi:null,webviewType:null,allowArbitraryLoads:null,allowArbitraryLoadsInWebContent:null,mcc:null,mnc:null,appVersion:null,batteryLevel:null,androidIsVersion:null},applicationSettings:{preCache:"device",applicationKey:null,applicationUserId:null,numOfCampaigns:null,campaignId:null,pageSize:null,landingId:null,page:null,applicationUserGender:null,applicationUserAgeGroup:null,applicationUserCreationDate:null,applicationUserCreationDateSignature:null,useClientSideCallbacks:null,SDKPluginType:null,disableCache:null,showDeliveryLimitationsLog:null,country:null,admin:null,placementId:null,consent:null,moatSupported:null},configMapping:{jb:function(){return ae.mobileSDKSettings.unLocked}},controllerConfig:{fpf:null,destinationMap:null,isSecured:null,segmentId:null,segmentName:null,instancesMap:null},userType:SuperSonicGlobalConfig.userType},oe={localTime:function(){return(new Date).getTime()},timezoneOffset:function(){return(new Date).getTimezoneOffset()}},se="mobileController.min.css",ce=SuperSonicGlobalConfig.mobileSDKSettings.isProd?"/versions/"+ae.v+"/"+se:ae.v+"/"+se,le,de,ue,fe,ge,pe,ve,me=!1,be=!1,he=0,Se=3,ye,Ce={flag_none:0,flag_iap:1,flag_aia:2,flag_ugl:4,nflag_sl:8,flag_as:16},Ae={flag_iap:function(){return!1},flag_aia:function(){return!1},flag_ugl:function(){return!1},nflag_sl:function(){return!1},flag_as:function(){return ae.mobileSDKSettings.deviceOs===m.deviceOs.android}},De={defaultBehavior:0,adunitResponsibility:1},Ie={close:1,nextFrame:2},we=e.style.iconBGConfig,Le=m.defaultOrientation,Pe={none:0,device:1,controller:2},Te=e.style.defaultControlFrames,Oe=m.blockedProductsPerApiLevel,Ue=m.storeSearchKeys,Fe={scrollHeight:""},xe={BrandConnect:{},RewardedVideo:{},Interstitial:{},OfferWall:De.defaultBehavior,Banner:De.defaultBehavior},Ne={BrandConnect:{},RewardedVideo:{},Interstitial:{},OfferWall:Z.close,Banner:Z.close},Me={BrandConnect:Z.close,RewardedVideo:Z.close,Interstitial:Z.close,OfferWall:Z.close,Banner:Z.close},ke={cdns:[{cdnName:"a.akamaihd.net",assets:["https://akm.ssacdn.com/users/cdn/jsonFile.json","https://akm.ssacdn.com/users/cdn/videoFile.mp4","https://akm.ssacdn.com/users/cdn/imgFile.png"]},{cdnName:"cncn.ssacdn.com",assets:["https://cncn.ssacdn.com/users/cdn/jsonFile.json","https://cncn.ssacdn.com/users/cdn/videoFile.mp4","https://cncn.ssacdn.com/users/cdn/imgFile.png"]},{cdnName:"itcn.ssacdn.com",assets:["https://itcn.ssacdn.com/users/cdn/jsonFile.json","https://itcn.ssacdn.com/users/cdn/videoFile.mp4","https://itcn.ssacdn.com/users/cdn/imgFile.png"]}]},Be=[{url:"https://init.supersonicads.com/admin/healthCheck",method:"GET",data:{},region:"all"}],Ee,Ve,Re=!1,Ke={RewardedVideo:!1,Interstitial:!1,BrandConnect:!1},je={},We=m.appConfigPath,Ge=m.appExtConfigPath,qe=m.appExtConfigPathStaging,He=Math.floor(100*Math.random()),Je=!1,Qe=e.templates.mainDefaultTemplate,_e=e.templates.defaultDialogBoxTemplate,ze=e.templates.defaultNavigationTemplate,Xe=e.templates.loaderOWTemplate,$e=e.templates.loaderOWOfferTemplate,Ye=p.Eventics,Ze=Ii("../../modules/SDKController/EventCategories")(),en=function(e){var n=P.getDisplayedAdType(),t={productType:"UnKnown",action:"stopTiming",eventParam:{eName:Ze.adClosed,data:{eNameStart:Ze.adVisibleToClose}}};if(e&&(t.eventParam.data.generalMessage=e),n){n===m.OW&&(t.eventParam.eName=Ze.OWClosed),t.productType=n;var i=P.getDisplayedAdDemandName();i&&(t.demandSourceName=i),B.publish("SDKController.Analytics",[t]),B.publish("SDKController.adClosed",[{productType:t.productType,demandSourceName:t.demandSourceName}])}else B.publish("SDKController.Analytics",[t])},nn=function(e,n,t,i){var r,a=e.length,o=!0,s=[],c=null;for(r=0;r<a;r++)k.isDefined(n[e[r]])||(s.push(e[r]),o=!1);return o||(c=$.missing+JSON.stringify(s)+" in "+t,k.isDefined(i)&&i&&N.callSDKFunction(i,{errMsg:c}),N.log(c,N.LogLevels.error)),{didSucceed:o,errMsg:c}},tn=function(e){v.each(e,function(e,n){B.unsubscribe(n)})},rn=function(){v.fn.textfill2=function(e){var n,t,i=e.maxFontPixels,r=e.maxHeight,a=e.maxWidth,o=void 0!==e.parentContainer?v(e.parentContainer):null,s=v(this),c=null!==o?o.height():v(this).parent().height(),l=null!==o?o.width():v(this).parent().width();return void 0!==r&&(c=r),void 0!==a&&(l=a),s.each(function(){for(i=e.maxFontPixels;v(this).css({"font-size":i}),i-=1,e.lineHeight&&o.css({"line-height":e.lineHeight+"em"}),n=v(this).height(),t=v(this).width(),c<n||l<t&&3<i;);}),this},v.fn.textWidth=function(){var e,n=v(this).children(),t=v('<span style="display: inline-block;" />');return n.wrap(t),e=n.parent().width(),n.unwrap(),e}},an=function(){B.subscribe(H+".initProducts",function(e,n,t){v.when(Sn(e)).then(function(){"use strict";k.isDefined(n)&&N.callSDKFunction(n),yn(e)},function(e){"use strict";k.isDefined(t)&&N.callSDKFunction(t,{errMsg:e})})}),B.subscribe(H+".nativeNavigationPressed",function(){if(P.isDisplayed()){var e=P.getDisplayedAdType(),n=P.getDisplayedAdDemandName();W||((n?xe[e][n]:xe[e])===De.adunitResponsibility?Tn("backButtonPressed"):Gn())}}),B.subscribe(H+".engageEnd",function(e){ln()||("forceClose"===e.action?(en(),kn(!1,!1),L.clearCountViewport()):"secondaryClose"===e.action&&(I.returnFromNavigationMode(In,Fe,Ln),P.getDisplayedAdType()===_&&B.publish("SDKController.AdClosed",[P.get()])))}),B.subscribe(H+".interceptedUrlToStore",function(){P.isDisplayed()&&Tn("interceptedUrlToStore$$intercept=true")}),B.subscribe(H+".enterBackground",function(e){N.log("entered BG",N.LogLevels.info);var n="";e&&k.isDefined(e.action)&&(n="$$action="+e.action),Tn("enterBackground"+n)}),B.subscribe(H+".pageFinished",function(){Tn("pageFinished")}),B.subscribe(H+".enterForeground",function(e){var n="enterForeground",t=I.getContainerState();N.log("line[1070]:entered FG, webview is "+JSON.stringify(t),N.LogLevels.info),e&&k.isDefined(e.active)&&(n+="$$active="+e.active),t.engaged&&t.opened&&ae.mobileSDKSettings.deviceOs===m.deviceOs.android&&!t.standalone&&(P.isDisplayed()&&en(),kn(!1,!1)),Tn(n)}),B.subscribe(H+".viewableChange",function(e){var n={name:"viewableChange"};if(e&&k.isDefined(e.isViewable)){N.log("viewableChange to:"+e.isViewable,N.LogLevels.info),me=e.isViewable,k.isDefined(e.webview)&&"main"!==e.webview||I.setContainerVisibility(e.isViewable),n.isViewable=e.isViewable,P.isDisplayed()&&Rn(),k.isDefined(e.webview)&&(n.webview=e.webview);var t=P.getDisplayedAdType();t&&(n.productType=t)}Tn(JSON.stringify(n)),e&&k.isDefined(e.isViewable)&&on()}),B.subscribe(H+".deviceStatusChanged",function(e){var n=v.extend({name:"deviceStatusChanged"},e);Tn(JSON.stringify(n)),p.Utils.isDefined(e.connectionType)&&(Ye.updateBaseData({connectionType:e.connectionType}),j="none"!==e.connectionType&&"notReachable"!==e.connectionType)}),B.subscribe(H+".parseBandwidth",function(e){N.log(JSON.stringify(e),3)}),B.subscribe(H+".getBandwidthFailed",function(e){N.log(JSON.stringify(e),3),N.log("getBandwidth Failed",N.LogLevels.error)}),B.subscribe(H+".parseUDIA",function(e,n){N.log("retrieved UDIA"+JSON.stringify(e),N.LogLevels.verbose),k.isDefined(n)&&N.callSDKFunction(n)}),B.subscribe(H+".getUDIAFailed",function(e){N.log("Failed to retrieve UDIA",N.LogLevels.error)}),B.subscribe(J+".CacheReady",function(e){N.log("Succeeded to init BC with:"+JSON.stringify(e),N.LogLevels.info),N.callSDKFunction("adUnitsReady",e)}),B.subscribe(J+".NoMoreOffers",function(e){N.log("BC currently has no more offers",N.LogLevels.info),N.callSDKFunction("adUnitsReady",e)}),B.subscribe(Q+".CacheReady",function(e){N.log("Succeeded to init BC with:"+JSON.stringify(e),N.LogLevels.info),N.callSDKFunction("adUnitsReady",e)}),B.subscribe(Q+".NoMoreOffers",function(e){N.log("BC currently has no more offers",N.LogLevels.info),N.callSDKFunction("adUnitsReady",e)}),B.subscribe(Q+".AllOffersVast",function(e){N.log("RV rest of the feed is Vast",N.LogLevels.info),N.callSDKFunction("adUnitsReady",e)}),B.subscribe(z+".CacheReady",function(e){N.log("Succeeded to init IS with:"+JSON.stringify(e),N.LogLevels.info),N.callSDKFunction("adUnitsReady",e)}),B.subscribe(z+".NoMoreOffers",function(e){N.log("IS currently has no more offers",N.LogLevels.info),N.callSDKFunction("adUnitsReady",e)}),B.subscribe("SDKController.GetConfig",function(e){e&&e.productType&&B.publish(e.productType+".GetConfig",[e])}),B.subscribe("SDKController.GetCompletionOffers",function(e){e&&e.productType&&B.publish(e.productType+".GetCompletionOffers",[e])}),B.subscribe("SDKController.ActionClick",function(e){e&&e.productType&&B.publish(e.productType+".ActionClick",[e])}),B.subscribe("SDKController.OpenUrl",function(e){nn(["url","method"],e,"openUrl").didSucceed?(N.log("Request to open external url",N.LogLevels.info),wn(e)):N.log("error calling open url with "+JSON.stringify(e),N.LogLevels.error)}),B.subscribe("SDKController.nativePixel",function(e){nn(["url"],e,"nativePixel").didSucceed?(N.log("Request to send click in native api",N.LogLevels.info),pi(e.url)):N.log("error sending safe click "+JSON.stringify(e),N.LogLevels.error)}),B.subscribe("SDKController.FirePixel",function(e){nn(["url"],e,"FirePixel").didSucceed?(N.log("Request to fire pixel from controller",N.LogLevels.info),"native"===e.type&&pi(e.url)||vi(e)):N.log("error firing pixel "+JSON.stringify(e),N.LogLevels.error)}),B.subscribe("SDKController.adEventNotification",function(e){N.log("ad notified controller with event: "+JSON.stringify(e),N.LogLevels.info),N.isLegacy(ee.postAdEventNotification)?N.log("postAdEventNotification on legacy SDK version",N.LogLevels.info):nn(["eventName","productType","dsName"],e,"adEventNotification").didSucceed&&mi(e.eventName,e.productType,e.dsName,e.extData)}),B.subscribe("SDKController.hideClose",function(e){var n=Cn(N.AdUtils.getAdId(e),e);if(n){var t=I.getAdFrameByProductAndId(n);t.data("close",!1),b.isFrameDisplayed(t)&&An()}else N.log("line[1196]: ERROR",N.LogLevels.error)}),B.subscribe("SDKController.AdClose",function(e){e.ignoreClick?Qn():Gn()}),B.subscribe("SDKController.closeAdunit",function(e){en(),kn(!1)}),B.subscribe("SDKController.setBackButtonState",function(e){if(e&&e.state&&e.productType){var n="default"===e.state?De.defaultBehavior:De[e.state];e.demandSourceName?xe[e.productType][e.demandSourceName]=n:xe[e.productType]=n}}),B.subscribe("SDKController.setCloseButtonState",function(e){Xt(e)}),B.subscribe("SDKController.ScrollHeight",function(e){var n,t,i;p.Utils.isDefined(e.value)&&(n=e.value,N.log("scroll height is: "+n,N.LogLevels.info),v.when(qn()).then(function(e){i=P.getDisplayedAdType(),t=i&&"application"===Le[i]&&A.isAppOrientation("portrait")?Math.max(e.height,e.width):i&&k.isDefined(i)&&"application"===Le[i]&&A.isAppOrientation("landscape")?Math.min(e.height,e.width):e.height,n<t&&(n=t),N.log("min scroll height is: "+t+"scroll height was set to: "+n+" screen height: "+e.height,N.LogLevels.verbose),Fe.scrollHeight=n,ae.mobileSDKSettings.deviceOs!==m.deviceOs.android&&v("body").css("height",Fe.scrollHeight)}))}),B.subscribe("SDKController.scrollTop",function(){N.log("scrollTop",N.LogLevels.verbose),setTimeout(function(){v("html,body").scrollTop(0)},1e3)}),B.subscribe("SDKController.getScreenSize",function(){v.when(qn()).then(function(e){Tn("screenSize$$width="+e.width+"&height="+e.height+"&orientation="+e.orientation+"&scrollTop="+e.scrollTop)})}),B.subscribe("SDKController.showNoConnectionMessage",function(){var e={productType:_,message:"You are not connected to the internet, please connect and try again.",yes:"close",no:"OK"};N.alert(e)}),B.subscribe("SDKController.GetDeviceVolume",function(e){k.isDefined(e.callback)&&Ht(e.callback)}),B.subscribe(S.serviceCallback+"."+S.AndroidEvents.onDestroy,function(e){N.log("SDKController | received event | onDestroy",N.LogLevels.verbose),ln()?N.log("SDKController | onDestroy - shouldAvoidHandleFrameClose, with params: "+JSON.stringify(e),N.LogLevels.verbose):dn()})};function on(){ae.mobileSDKSettings.deviceOs===m.deviceOs.android&&20<=D.getDeviceApiLevel()&&(N.callSDKFunction("setWebviewBackgroundColor",{color:"black"}),N.callSDKFunction("setWebviewBackgroundColor",{color:"transparent"}))}function sn(){O=Ii("./videoStateHandler.js")(p.PubSub,N),U=Ii("./nativeConfigHandler.js")(p.PubSub,N)}function cn(){var e={productChance:(N.getEnv(),1),protocol:ae.mobileSDKSettings.protocol?ae.mobileSDKSettings.protocol:"https:",baseData:{productType:"controller"}};fe=Ye.createEventic(e)}function ln(){var e=Zt(P.get());return e&&"function"==typeof e.shouldAvoidHandleFrameClose&&e.shouldAvoidHandleFrameClose()}function dn(){N.log("SDKController.js | handleFrameDestroyed",N.LogLevels.verbose),P.isDisplayed()&&en(m.adClosedErrorReason.unexpectedCloseActivityDestroy),kn(!1,!1),zn()}var un=function(){v("body").append(Qe+_e+ze+Xe);for(var e="",n=0;n<10;n++)e+=$e;v(".loaderOW .offers").prepend(e),Yn()};function fn(){B.subscribe(H+".acknowledgeMessage",function(e){N.acknowledgeMessage(e)})}function gn(){p.Msg.init(N,N.msgHandler,Zn),B.init();var e=N.SDKInterface;switch(ae.mobileSDKSettings.deviceOs){case m.deviceOs.android:de=e._Android;break;case m.deviceOs.ios:de="wk"===ae.mobileSDKSettings.webviewType?e.Ios_WK:e.Ios;break;default:de=e.Ios}fn()}function pn(){n.init(ae.mobileSDKSettings.deviceOs,de,ae.mobileSDKSettings.debug,N.PixelTrackingService.firePixel),B.subscribe("SDKController.log",function(e){k.isDefined(e.debugLevel)&&k.isDefined(e.msg)&&("string"==typeof e.msg&&(e.msg=decodeURI(e.msg)),N.log(e.msg,e.debugLevel,e.origin))})}var vn=function(){i.init(n,v,N.Cache),t.init(n,ae.mobileSDKSettings,v,N.Cache,tt(),a,i,N.getEnv(),p),c.init(ae.controllerConfig,n),l.init(n),P=new r(N.AdUtils),N.RewardedVideo=N.RewardedAdFactory.create(),N.BrandConnect=N.RewardedVideo,N.RewardedVideo.init(),N.Interstitial=N.InterstitialFactory.create(),N.Interstitial.init(),N.Banner=N.BannerFactory.create(),N.Banner.init(),N.OfferWall.init()};function mn(){N.HTTPService.init(!N.isLegacy(ee.nativeHttpEngine)),N.OrientationService.init(!N.isLegacy(m.featureCompatibilityMap.appOrientationRestrictions),fe),N.GDPRService.init(!N.isLegacy(m.featureCompatibilityMap.GDPRSupport)),bn()&&N.RingerSwitchService.init(),N.NativeLifeCycleEventsService.init(),pt(),L=new y(m,ae,v),I=new f(p,N,ae,m,v,N.AdUtils,N.ViewsManager,C,e,s,N.OrientationService,N.DemandUtils,b,L,N.RingerSwitchService,hn(),N.AppOrientationManager,P),(w=new g(p,N,m,v,P)).initExternalContainer()}function bn(){return!N.isLegacy(m.featureCompatibilityMap.ringerSwitch)&&ae.mobileSDKSettings.deviceOs===m.deviceOs.ios&&"wk"===ae.mobileSDKSettings.webviewType}function hn(){return{supportImmersive:N.isLegacy(ee.supportImmersive),supportOrientation:N.isLegacy(ee.supportOrientation),translucent:N.isLegacy(ee.translucent),supportAdCloseCB:!N.isLegacy(ee.adCloseCB)}}var Sn=function(e){var n=new v.Deferred;N.log("Products info received: "+JSON.stringify(e),N.LogLevels.info);var t,i,r,a=re.length,o=[];for(t=0;t<a;t++)k.isDefined(e[re[t]])||(ae.applicationSettings[re[t]]=null);for(i in e)e.hasOwnProperty(i)&&i.match(/^custom/)&&o.push(i);return it(o),(r=D.parseConfiguration(e,ie,ae.applicationSettings)).didSucceed?n.resolve():n.reject(r.errMsg),n.promise()},yn=function(e){v.each(e.products,function(e,n){p.hasOwnProperty(n)&&k.isFunction(p[n].init)&&p[n].init()})},Cn=function(e,n){var t=null;return v.each(R,function(){return!!(N.AdUtils.getAdId(this)!=e||this.productType!==n.productType||n.demandSourceName&&this.demandSourceName!==n.demandSourceName)||(t=this,!1)}),t},An=function(){ue.addClass("ssaOnAdUnitCloseVisible")},Dn=function(){ue.removeClass("ssaOnAdUnitCloseVisible")},In=function(e,n){Tn("dialogBoxAboutToClose"),e&&k.isVisible(ge)?ge.fadeOut(100,function(){v(".dialogBox").css("visibility","hidden"),v("#ssaDialogBoxOverlay").fadeOut(100,function(){k.isFunction(n)&&n.call(),b.getDisplayedAdFrame()&&Tn("showFrame")})}):(v(".dialogBox").css("visibility","hidden"),v("#ssaDialogBoxOverlay").css("display","none"),k.isFunction(n)&&n.call(),b.getDisplayedAdFrame()&&Tn("showFrame"))},wn=function(e,n){var i,r=[],t=null,a=null;function o(){var e=P.getDisplayedAdType();P.isDisplayed()&&B.publish("SDKController.AdOpened",[{productType:e}]),n&&n.call(null)}a=B.subscribe(H+".openUrlFailure",function(e){clearTimeout(i),tn(r),B.unsubscribe(a);var n=k.isDefined(e.errMsg)?e.errMsg:"Unknown reason for error",t=P.getDisplayedAdType()||"";fe.trackEvent(Ze.openUrlError,{generalMessage:n},{productType:t}),N.log("SDK failed to open url",N.LogLevels.verbose)}),t=ae.mobileSDKSettings.deviceOs===m.deviceOs.ios&&"webview"===e.method?B.subscribe(H+".openUrlSuccess",function(){clearTimeout(i),tn(r),e.controls&&I.changeToNavigationMode(In,ue,Fe,Ln),o()}):B.subscribe(H+".viewableChange",function(e){clearTimeout(i),tn(r),!k.isDefined(e.isViewable)||e.isViewable||ae.mobileSDKSettings.deviceOs===m.deviceOs.android&&"main"!==e.webview||o()}),r.push(a),r.push(t),"storeKit"===e.method&&(ae.mobileSDKSettings.deviceOs!==m.deviceOs.ios||N.isLegacy({ios:"5.17",android:"99"})?e.method="external_browser":e.method="store"),"webview"===e.method&&e.controls?ae.mobileSDKSettings.deviceOs===m.deviceOs.android?N.callSDKFunction("openUrl",{url:e.url,method:"webview"},"openUrlSuccess","openUrlFailure"):N.callSDKFunction("openUrl",{url:e.url,method:e.method,controlFrames:Te},"openUrlSuccess","openUrlFailure"):N.callSDKFunction("openUrl",{url:e.url,method:e.method,appId:e.appId,viewUniqueId:e.viewUniqueId},"openUrlSuccess","openUrlFailure"),i=setTimeout(function(){B.unsubscribe(t),"ios"===N.getApiData({deviceOs:1}).deviceOs&&parseFloat(N.getConfigurationHelper().getDeviceOsVersion())<8&&n&&n.call(null)},500)},Ln=function(){ue.unbind("touchend").bind("touchend",Gn),Pn(Ie.close),ve.unbind("click").bind("click",function(e){e.stopPropagation(),e.preventDefault(),B.publish("SDKController.dialogBoxResume",[P.get()]),In(!0)})},Pn=function(t){pe.unbind("click").bind("click",function(e){e.stopPropagation(),e.preventDefault();var n=j?t:Ie.close;switch(B.publish("SDKController.dialogBoxExit",[P.get()]),n){case Ie.nextFrame:Tn("moveToNextFrame"),In(!0);break;case Ie.close:P.isDisplayed()?(Tn("confirmCloseClicked"),In(!0)):kn(!0)}})},Tn=function(n,e){if(N.log("postAdUnitEvent | should be posting to ad unit: "+n,N.LogLevels.verbose),e)N.log("postAdUnitEvent | posting to ALL ad unit frames: "+n,N.LogLevels.verbose),v.each(v(".ssaAdUnit"),function(){p.Msg.postMessage(n,"*",this.contentWindow)}),w.checkStatusOfAdView().then(function(e){e&&e.isExternalAdViewInitiated&&w.sendMessageToExternalAdView(n)});else{var t=b.getDisplayedAdFrame(),i=P.get();i&&i.settings.viewType===m.viewTypes.externalView?w.sendMessageToExternalAdView(n):i&&t?(N.log("postAdUnitEvent | posting to DISPLAYED ad unit: "+n,N.LogLevels.verbose),p.Msg.postMessage(n,"*",t[0].contentWindow)):N.log("postAdUnitEvent | can't find displayed ad: "+n,N.LogLevels.verbose)}};function On(){var e=P.getDisplayedAdType(),n=P.getDisplayedAdDemandName();N.log("in setDefaultBackAndCloseBehavior with product "+e+" and demand "+n,N.LogLevels.verbose),e&&(n?(Ne[e][n]=Z.close,xe[e][n]=De.defaultBehavior):(Ne[e]=Z.close,xe[e]=De.defaultBehavior))}function Un(e){for(var n=v("#ssaDialogBox"),t=n[0]&&n[0].className.split(" "),i=0;i<t.length;i++){var r=t[i];r!==m.styleAccordingToProtocol.secured&&r!==m.styleAccordingToProtocol.unsecured||n.removeClass(r),r.match(/template.*/)&&n.removeClass(r)}var a=ae.mobileSDKSettings.protocol===m.protocol.https?m.styleAccordingToProtocol.secured:m.styleAccordingToProtocol.unsecured;n.addClass(a),e.settings.templateid&&n.addClass("template"+e.settings.templateid)}function Fn(e){e?Dn():An()}function xn(){Mn()}var Nn=function(e,n){var t=v.Deferred(),i=b.getDisplayedAdFrame();return Pn(Ie.close),I.displayContainer(e),v.when(Hn(e)).then(function(){_n(),Un(e),L.addIphoneXAdjustClass(),I.handleScreenVisible(n,i,e),t.resolve()}),t.promise()},Mn=function(){var e=P.get(),n=P.getDisplayedAdType();be=!0,clearTimeout(ye),e&&Kn(),N.log("SDKController | onAdVisible",N.LogLevels.verbose),B.publish("SDKController.AdVisible",[e]),Tn("adVisible$$productType="+n)},kn=function(e,n){N.RingerSwitchService.isInitiated()&&N.RingerSwitchService.stopListener();var t=!0,i=P.get();n&&(t=!1),Fe.scrollHeight="",v("body").css("height",Fe.scrollHeight),In(e,function(){var e=function(){};P.reset(),n&&I.displayLoader(i.productType),N.callSDKFunction("setBackButtonState",{state:Pe.controller}),t?e=Bn.bind(this,i):Dn(),i?St(i,{preloadNextInBG:!n},e):(I.unloadProductFromContainer(),e())})},Bn=function(e){N.log("SDKController | ad unit close done",N.LogLevels.verbose),setTimeout(function(){N.log("SDKController | closing webview with currentAd "+JSON.stringify(e),N.LogLevels.verbose),I.hideContainer(e)},250)},En=function(n){v.each(R,function(e){return N.AdUtils.getAdId(this)!=n||(R.splice(e,1),!1)})},Vn=function(e){var n=N.AdUtils.getAdId(e);v.each(R,function(e){return N.AdUtils.getAdId(this)==n})},Rn=function(){if(!W){var e,n=P.getDisplayedAdType(),t=P.getDisplayedAdDemandName(),i=P.getDisplayedAdSettings();e=n===m.OW?i&&(i.OLXD||0===i.OLXD)?1e3*i.OLXD:m.closeAndBackDisabledTimerOW:m.closeAndBackDisabledTimer;var r={eventParam:{eName:Ze.userClosedBeforeAdVisible},action:"startTiming",productType:n,demandSourceName:t};B.publish("SDKController.Analytics",[r]),jn(),W=!0,ye=setTimeout(function(){Kn()},e)}},Kn=function(){Wn(),W=!1},jn=function(){v("#ssaNavigatorCloseButton").addClass("invisible")},Wn=function(){v("#ssaNavigatorCloseButton").removeClass("invisible")},Gn=function(){I.hideLoader(),Qn();var e=P.getDisplayedAdType(),n=P.getDisplayedAdDemandName();if(!e)return en(),void kn(!1);if(!be&&!W){var t={eventParam:{eName:Ze.userClosedBeforeAdVisible},action:"stopTiming",productType:e,demandSourceName:n};B.publish("SDKController.Analytics",[t])}switch(Xn(e)){case Z.close:N.ViewsManager.waitForAllViews().then(function(){zn(),en(),kn(!1)});break;case Z.confirm:Pn(Ie.close),N.alert($n(e,n));break;case Z.confirmNextFrame:Pn(Ie.nextFrame),N.alert($n(e,n));break;case Z.nextFrame:Tn("moveToNextFrame");break;case Z.ignore:}},qn=function(){var t="deviceScreenSize[width]",i="deviceScreenSize[height]",r=m.appInfo.orientation.portrait,a=m.appInfo.orientation.landscape,o=m.defaultOrientation,s=ae.mobileSDKSettings[t],c=ae.mobileSDKSettings[t],l=new v.Deferred;return v.when(N.OrientationService.oldGetOrientation()).then(function(e){var n=P.getDisplayedAdType();!n||o[n]!==a&&o[n]!==r||(e=o[n]),e===a&&(s=Math.max(ae.mobileSDKSettings[t],ae.mobileSDKSettings[i]),c=Math.min(ae.mobileSDKSettings[t],ae.mobileSDKSettings[i])),e===r&&(s=Math.min(ae.mobileSDKSettings[t],ae.mobileSDKSettings[i]),c=Math.max(ae.mobileSDKSettings[t],ae.mobileSDKSettings[i])),ae.mobileSDKSettings.deviceOs===m.deviceOs.android&&(s/=ae.mobileSDKSettings.deviceScreenScale,c/=ae.mobileSDKSettings.deviceScreenScale),l.resolve({width:s,height:c,orientation:e,scrollTop:v(window).scrollTop()})}),l.promise()},Hn=function(){var n,t=new v.Deferred;return me?t.resolve():n=B.subscribe(H+".viewableChange",function(e){e&&k.isDefined(e.isViewable)&&e.isViewable&&(N.log("SDKController | viewableChange(screenVisible) to:"+e.isViewable,N.LogLevels.info),B.unsubscribe(n),t.resolve())}),t.promise()},Jn=function(e){N.AdUtils.getViewType(e)===m.viewTypes.externalView?(w.setAdIsLoadedInContainer(!0),w.onExternalViewLoaded(function(){P.set(e)},xn)):I.onAdUnitLoaded(e,Fn,xn)},Qn=function(){N.callSDKFunction("removeCloseEventHandler",N.ViewsManager.getDisplayWebViewParams(!1))};function _n(){N.NativeLifeCycleEventsService.startNotify(S.AndroidEvents.onDestroy)}function zn(){N.NativeLifeCycleEventsService.stopNotify(S.AndroidEvents.onDestroy)}function Xn(e){var n=P.getDisplayedAdDemandName();if(e)return(n?Ne[e][n]:Ne[e])||Me[e]}function $n(e,n){var t=N[e];return t&&t.getConfirmCloseMsg&&t.getConfirmCloseMsg(n)||ne}var Yn=function(){ue=v("#ssaNavigatorCloseButton"),ge=v("#ssaDialogBox"),pe=v("#ssaDialogConfirmBtn"),ve=v("#ssaDialogCancelBtn"),le=v("#ssaViewWrap"),Ln()},Zn=function(){return!0},et=function(e){N.log(e,N.LogLevels.error)},nt=function(e){var n,t={};return k.isString(e)?(n=e.split(/\?(.+)/),t.name=n[0],t.parameters=e.split(/parameters=(.+)/)[1],t):null},tt=function(){return ae.mobileSDKSettings.deviceOs===m.deviceOs.android?"supersonicads":"SSAPublisher"},it=function(n){v.each(ae.applicationSettings,function(e){e.match(/^custom/)&&-1===v.inArray(e,n)&&delete ae.applicationSettings[e]})},rt=function(){var n={};return v.each(ae.applicationSettings,function(e){e.match(/^custom/)&&(n[e]=ae.applicationSettings[e])}),n},at=function(e){var n=ae.mobileSDKSettings.protocol+"//"+ae.mobileSDKSettings.domain+"/l/?type={{logType}}&count={{count}}&applicationKey={{applicationKey}}&applicationUserId={{applicationUserId}}&SDKVersion={{SDKVersion}}&deviceOs={{deviceOs}}&deviceOSVersion={{deviceOSVersion}}&{{customQueryString}}",t=new Image,i={},r={logType:"",count:1,applicationKey:ae.applicationSettings.applicationKey,applicationUserId:ae.applicationSettings.applicationUserId,SDKVersion:ae.mobileSDKSettings.SDKVersion,deviceOs:ae.mobileSDKSettings.deviceOs,deviceOSVersion:ae.mobileSDKSettings.deviceOSVersion,customQueryString:""};e=v.extend({"deviceIds[OpenUDID]":ae.mobileSDKSettings["deviceIds[OpenUDID]"],"deviceIds[IFA]":ae.mobileSDKSettings["deviceIds[IFA]"],"deviceIds[IDFV]":ae.mobileSDKSettings["deviceIds[IDFV]"],"deviceIds[SERIAL]":ae.mobileSDKSettings["deviceIds[SERIAL]"],"deviceIds[AndroidID]":ae.mobileSDKSettings["deviceIds[AndroidID]"],"deviceIds[IMEI]":ae.mobileSDKSettings["deviceIds[IMEI]"]},r,e),v.each(e,function(e,n){k.isDefined(r[e])||(i[e]=n)}),v.isEmptyObject(i)||(e.customQueryString+=k.serialize(i)),t.src=k.renderTemplate(n,e)},ot=function(){var t=0;return v.each(Ae,function(e,n){n()&&(t|=Ce[e])}),t},st=function(e){var t="";return k.isDefined(e)||(e=ae),v.each(e,function(e,n){return!e.match(/^deviceIds/)||!k.isDefined(n)||null===n||(t=n,!1)}),t},ct=function(){var e=ae.mobileSDKSettings;if(e.deviceScreenScale)try{var n=parseInt(e["deviceScreenSize[width]"])/(e.deviceOs!==m.deviceOs.ios?e.deviceScreenScale:1),t=parseInt(e["deviceScreenSize[height]"])/(e.deviceOs!==m.deviceOs.ios?e.deviceScreenScale:1);e.deviceHeightDP=parseInt(t),e.deviceWidthDP=parseInt(n)}catch(e){N.log("SDKController | Failed to parse screen DP",N.LogLevels.error)}},lt=function(){if(ae.mobileSDKSettings.deviceOs!==m.deviceOs.android||N.isLegacy(ee.sValue))N.log("SDKController | setupSValue | feature not supported",N.LogLevels.verbose);else{var i=[],r=m.sValueApps;T.checkIfAppInstallOnDevice(r).then(function(e){for(var n=0;n<r.length;n++){var t=r[n];i.push(e.hasOwnProperty(t)&&e[t].isInstalled?1:0)}F=function(e){for(var n=0,t=e.length-1,i=t;0<=i;i--)1===e[i]&&(n+=Math.pow(2,t-i));return n}(i)},function(){N.log("SDKController | setupSValue | checkIfAppInstallOnDevice failed",N.LogLevels.verbose)})}},dt=function(){var n=new v.Deferred,t=!1,i=ae.mobileSDKSettings;return T.checkIfAppInstallOnDevice(["com.google.market","com.android.vending"]).then(function(e){v.each(e,function(e,n){n.isInstalled&&(t=!0)}),i.gpi=t,n.resolve()},function(){i.gpi=t,n.reject("Unable to check if Google play services is installed on the device")}),n.promise()},ut=function(){var e,n,t,i=[],r=new v.Deferred;return e=B.subscribe(H+".parseDeviceStatus",function(e,n){tn(i),N.log("SDKController | Device status received: "+JSON.stringify(e),N.LogLevels.info),(t=D.parseConfiguration(e,te,ae.mobileSDKSettings)).didSucceed?(N.callSDKFunction(n),A.init(ae.controllerConfig.appOrientation,ae.mobileSDKSettings),ae.mobileSDKSettings.appOrientation=A.getOrientation(),ct(),L.adjustSizeForIphoneX(),ii(ae.mobileSDKSettings),r.resolve()):r.reject(t.errMsg)}),i.push(e),n=B.subscribe(H+".getDeviceStatusFailed",function(e){tn(i),et(e),r.reject($.device)}),i.push(n),N.callSDKFunction("getDeviceStatus",{},"parseDeviceStatus","getDeviceStatusFailed"),r.promise()};function ft(e){if(e){var n=k.sortDataByDateKey(e);if(1<n.length){var t=n[1]?new Date(n[1][0]).getTime():n[0]?new Date(n[0][0]).getTime():null;isNaN(t)||(ae.mobileSDKSettings.androidIsVersion=t)}}N.log("SDKController | androidIsVersion "+ae.mobileSDKSettings.androidIsVersion,N.LogLevels.info)}var gt=function(){var e,n,t=[],i=new v.Deferred;return N.isLegacy(ee.androidIsVersion)||(e=B.subscribe(H+".handleAppsInstallTimeSuccess",function(e,n){tn(t),ft(e)}),t.push(e),n=B.subscribe(H+".handleAppsInstallTimeFailed",function(e){tn(t)}),t.push(n),N.callSDKFunction("getAppsInstallTime",{systemApps:"false"},"handleAppsInstallTimeSuccess","handleAppsInstallTimeFailed")),i.resolve()},pt=function(){ae.mobileSDKSettings.deviceOs!==m.deviceOs.ios&&N.callSDKFunction("setStoreSearchKeys",{searchKeys:Ue[ae.mobileSDKSettings.deviceOs]})},vt=function(e){return k.isDefined(ae[e])&&null!==ae[e]||k.isDefined(ae.applicationSettings[e])&&null!==ae.applicationSettings[e]||k.isDefined(ae.mobileSDKSettings[e])&&null!==ae.mobileSDKSettings[e]||k.isDefined(ae.controllerConfig[e])&&null!==ae.controllerConfig[e]||k.isDefined(ae.configMapping[e])&&null!==ae.configMapping[e]()},mt=function(e){return k.isDefined(oe[e])},bt=function(e){var n;return k.isDefined(ae[e])?n=ae[e]:k.isDefined(ae.applicationSettings[e])?n=ae.applicationSettings[e]:k.isDefined(ae.mobileSDKSettings[e])?n=ae.mobileSDKSettings[e]:k.isDefined(ae.controllerConfig[e])?n=ae.controllerConfig[e]:k.isDefined(ae.configMapping[e])?n=ae.configMapping[e]():"customParam"===e&&(n=rt()),n},ht=function(){var e,n,t=[],o=new v.Deferred;return e=B.subscribe(H+".parseCachedFilesMap",function(e,n){var t,i,r,a={};(r=nn(["path"],e,"parseCachedFileMap")).didSucceed?(t=decodeURIComponent(e.path).split("/"),""!==e.path?a[i=t[t.length-1]]=k.isDefined(e[i])?e[i]:e:a=e,N.log("SDKController | successfully received files map:"+JSON.stringify(e),N.LogLevels.info),delete e.path,Pt(a).then(function(e){return N.log("SDKController | Finished purging cache on controller init, calling init with sorted:"+JSON.stringify(M.cachePriorityArray),N.LogLevels.verbose),N.log("SDKController | The file map after:"+JSON.stringify(e),N.LogLevels.verbose),N.Cache.init(e,M.cachePriorityArray)}).then(function(){N.log("SDKController | Cache module initiated",N.LogLevels.info),N.callSDKFunction(n),o.resolve()}).fail(function(e){e="SDKController | Cache module failed to initiated",N.log(e,N.LogLevels.error),o.reject(e)})):o.reject(r.errMsg)}),t.push(e),n=B.subscribe(H+".getCachedFilesMapFailed",function(e){N.log("SDKController | failed to receive files map:"+e,N.LogLevels.error),o.reject($.filemap)}),t.push(n),N.callSDKFunction("getCachedFilesMap",{path:""},"parseCachedFilesMap","getCachedFilesMapFailed"),o.promise()},St=function(n,t,i){t=t||{preloadNextInBG:!0},I.unloadAdFrame(n),En(N.AdUtils.getAdId(n));var r=Zt(n),a=!1;p.Utils.isFunction(r.prepareAdToEngageEnd)&&r.prepareAdToEngageEnd(n).then(function(){a=r.getNextAd(!t.preloadNextInBG,n.inventoryId)}),N.log("engageEnd on controller with :"+n.engaged,N.LogLevels.verbose),p.PubSub.publish("SDKController.engageEnd",[n,function(){n.engaged&&I.unloadProductFromContainer(n);var e=!t.preloadNextInBG;p.Utils.isFunction(r.attemptToPreloadAd)&&a&&r.attemptToPreloadAd(e,n.inventoryId),i&&i(),O.getState()===Y.play&&O.handleOnEngageEnd(n)}])},yt=function(){N.callSDKFunction("toggleUDIA",{toggle:ot()})},Ct=function(){N.callSDKFunction("getUDIA",{getByFlag:ot(),2:1},"parseUDIA","getUDIAFailed")},At=function(){var e=Pe.controller;return ae.mobileSDKSettings.deviceOs===m.deviceOs.android&&10==D.getDeviceApiLevel()&&(e=Pe.device),e},Dt=function(e){return It(e),Lt(e),wt(e),e&&e.applicationKey&&(ae.applicationSettings.applicationKey=e.applicationKey),D.parseConfiguration(e,ie,ae.applicationSettings)},It=function(e){var n,t=re.length;for(n=0;n<t;n++)k.isDefined(e[re[n]])||(ae.applicationSettings[re[n]]=null)},wt=function(e){var n,t=[];for(n in e)e.hasOwnProperty(n)&&n.match(/^custom/)&&t.push(n);it(t)};function Lt(e){e.moatSupported=N.MOATService.isInitialized()}function Pt(r){var e,a,n,o=[],t=new v.Deferred,s=[],c=["temp","files","assets","libs","graphicAssets"],i=function(){var n=new v.Deferred,t=0;function i(){var e;(e=new v.Deferred,0<s.length&&v.each(s,function(e,n){M.cachePriorityArray&&M.cachePriorityArray[n]&&delete M.cachePriorityArray[n],delete r[n]}),"0"!==M.controllerVersion?(M.controllerVersion=ae.v,N.setGlobalAppData(M).then(function(){e.resolve()},function(){e.reject("NewController: Save app global data failed")})):e.resolve(),e.promise()).then(function(){n.resolve(r)},function(e){n.reject(e)}),tn(o)}return e=B.subscribe(H+".deleteFolderSuccess",function(){N.log("NewController: A new controller version detected. Folder deleted successfully",N.LogLevels.verbose),++t>=s.length&&i()}),a=B.subscribe(H+".deleteFolderFailed",function(e){if(tn(o),p.Utils.isDefined(e.errCode)&&1==e.errCode)N.log("NewController: The folder requested for deletion was not found. Continue...",N.LogLevels.verbose),++t>=s.length&&i();else{tn(o),n.reject("NewController: Purge cache for new controller version failed.")}}),function(){var e="purgeCampaignsCache",n="purgeGlobalsCache",t=ae.mobileSDKSettings;if(t.hasOwnProperty(e)&&!1===t[e])for(var i in r)-1===i.indexOf("RewardedVideo")&&-1===i.indexOf("Interstitial")||c.push(i);t.hasOwnProperty(n)&&!1===t[n]&&c.push("globals")}(),o.push(e),o.push(a),v.each(r,function(e,n){-1===c.indexOf(e)&&s.push(e)}),N.log(s+JSON.stringify(s),N.LogLevels.verbose),0<s.length?v.each(s,function(e,n){N.deleteFolder(n)}):i(),n.promise()};return function(){if(N.isLegacy(ee.userData)){N.log("NewController: Old controller version. UserData is not supported. Will purge anyway",N.LogLevels.verbose);var e=new v.Deferred;return e.resolve({controllerVersion:"0"}),e}return N.getGlobalAppData()}().then(function(e){N.log("SDKController | getGlobalAppData: "+JSON.stringify(e),N.LogLevels.verbose),n=(M=e).controllerVersion,k.isDefined(n)&&n!==ae.v||!k.isDefined(n)?(N.log("NewController: A new controller version detected. Purging cache... old: "+n+"new: "+ae.v,N.LogLevels.verbose),Re=!0,i().then(function(e){t.resolve(e)},function(){t.reject()})):(N.log("NewController: Controller version did not change. Saved version: "+n+" Current version: "+ae.v,N.LogLevels.verbose),t.resolve(r))},function(){N.log("SDKController | getGlobalAppData: failed! ",N.LogLevels.verbose),t.reject("getGlobalAppData: failed! ")}),t.promise()}function Tt(n){return function(e){Tn(JSON.stringify({data:e,id:n}),!0)}}function Ot(e){var n=e.data,t=n.indexOf("$$");if(0===t){var i,r=n.slice(t+2);if(!r)return;i=k.getParams(r),k.isDefined(i.event)&&(N.log("received event:"+i.event,N.LogLevels.verbose),p.PubSub.publish("SDKController."+i.event,[i])),k.isDefined(i.name)&&k.isDefined(i.parameters)&&(N.log("received event:"+i.name,N.LogLevels.verbose),p.PubSub.publish("SDKController."+i.name,[i.parameters]))}else if(n&&-1!==n.indexOf("MSFAPI"))N.log("MOAT message was fired: "+n.toString(),N.LogLevels.verbose);else try{n=JSON.parse(n),v.extend(n.arguments,{callback:Tt(n.id)}),p.PubSub.publish("SDKController."+n.method,[n.arguments])}catch(e){N.log("SDKController | unable to parse message: "+n,N.LogLevels.error)}}function Ut(){return ae.controllerConfig&&void 0!==ae.controllerConfig.abTest?ae.controllerConfig.abTest:-4}function Ft(e){Ee||N.getApplicationInfo(e).then(null,function(){var e=v.Deferred();return e.resolve(N.getConfig()),e.promise()}).always(function(e){var n=xt(e);Ye.init(n),Ee=!0})}function xt(e){var n=-1;try{n=parseInt(D.getDeviceApiLevel())}catch(e){N.log("getEventicsBaseData | Error converting deviceApiLevel to Integer "+e,N.LogLevels.verbose)}return{sdkVersion:e.mobileSDKSettings.SDKVersion,controllerVersion:e.v,bfn:sonicVersionByConfig.buildNumber,bundleId:e.mobileSDKSettings.bundleId,connectionType:e.mobileSDKSettings.connectionType,applicationKey:e.applicationSettings.applicationKey,deviceId:ni(e.mobileSDKSettings),applicationUserId:e.applicationSettings.applicationUserId,deviceOs:e.mobileSDKSettings.deviceOs,deviceOsVersion:D.getDeviceOsVersion(),deviceApiLevel:n,deviceOEM:e.mobileSDKSettings.deviceOEM,deviceModel:e.mobileSDKSettings.deviceModel,appOrientation:A.getOrientation(),env:Di.getEnv(),lat:"true"===e.mobileSDKSettings.isLimitAdTrackingEnabled,abTest:Ut(),usertype:e.userType}}function Nt(){var e;switch(window.orientation){case-90:case 90:e="landscape";break;default:e="portrait"}return e}function Mt(){countViewport<10&&setTimeout(function(){addViewportFixMeta(),countViewport++,Mt()},100)}function kt(e,n){var t,i=[],r=new v.Deferred,a=n.length;for(t=0;t<a;t++)i.push(Bt(e,n[t]));return v.when.apply(null,i).always(function(){N.deleteFolder(e),r.resolve(0)}),r.promise()}function Bt(r,a){var o=new v.Deferred,e=function(e){var n={timingValue:(new Date).getTime()-void 0,success:e},t=n.success?Ze.cdnABTestSuccess:Ze.cdnABTestFail,i={eNameStart:Ze.cdnABTestSuccess,timingValue:n.timingValue,rvnomoreoffersreason:r,generalMessage:a};fe.trackTimingStop(t,i),o.resolve()};return fe.trackTimingStart(Ze.cdnABTestSuccess),N.cacheAsset(r,a).then(e.bind(null,!0),e.bind(null,!1)),o.promise()}function Et(){try{var e=ke,t=function(e,n){return Math.floor(Math.random()*(n-e+1)+e)},n=(a=s.getExtConfig()).Interstitial&&a.Interstitial.abtest&&a.Interstitial.abtest[3e3]&&a.Interstitial.abtest[3e3].cdnPercent?a.Interstitial.abtest[3e3].cdnPercent:0;if(0<n&&t(0,100)<n&&ae&&ae.controllerConfig&&"CN"===ae.controllerConfig.country){var i=e.cdns,r=function(){if(0!==i.length){var e=t(0,i.length-1),n=i[e];i.splice(e,1),kt(n.cdnName,n.assets).then(r)}};r()}}catch(e){N.log("_manageCdnABTest | catch: "+e,N.LogLevels.verbose),fe.trackEvent(Ze.cdnABTestException,null,{generalMessage:e})}var a}function Vt(i){var r=new v.Deferred,e=function(e){var n=e?Ze.latencyTestSuccess:Ze.latencyTestFail,t={eNameStart:Ze.latencyTestSuccess,generalMessage:i.url};fe.trackTimingStop(n,t),r.resolve()};return fe.trackTimingStart(Ze.latencyTestSuccess),v.ajax({url:i.url,type:i.method?i.method:"GET",dataType:"json",data:JSON.stringify(i.data),cache:!0,timeout:6e4}).then(e.bind(null,!0),e.bind(null,!1)),r.promise()}function Rt(){try{var e=Be,t=function(e,n){return Math.floor(Math.random()*(n-e+1)+e)},n=(a=s.getExtConfig()).Interstitial&&a.Interstitial.abtest&&a.Interstitial.abtest[5e3]&&a.Interstitial.abtest[5e3].latencyTestPercent?a.Interstitial.abtest[5e3].latencyTestPercent:0;if(0<n&&t(0,100)<n){var i=e,r=function(){if(0!==i.length){var e=t(0,i.length-1),n=i[e];i.splice(e,1),Vt(n).then(r)}};r()}}catch(e){N.log("_manageLatencyABTest | catch: "+e,N.LogLevels.verbose),fe.trackEvent(Ze.latencyTestException,null,{generalMessage:e})}var a;return p.Utils.returnResolvedPromise()}function Kt(){if(V&&"rejected"!==V.state())return p.Utils.returnResolvedPromise();var e="prod"===N.getEnv()?Ge:qe,n=N.getBaseCdnUrl()+e;return V=v.ajax({url:n,type:"GET",dataType:"jsonp",cache:!0,jsonpCallback:"getExtConfig",timeout:2e4}).then(function(e,n,t){N.log("SDKController | MicroJob | Got Application configuration"+JSON.stringify(e)),s.setConfig(e);var i=e&&e.general&&e.general.eventProb||0;Je=He<i},function(e,n,t){var i="SDKController | MicroJob | Failed to receive configuration from server "+t;N.log(i,N.LogLevels.verbose),fe.trackEvent(Ze.getExternalApplicationConfigurationError,{generalMessage:i})}).then(Rt).then(Et),p.Utils.returnResolvedPromise()}function jt(e){var n;N.isLegacy(N.featureMap.MOAT)||((n=e)&&n.moat&&n.moat===m.moat.disabled||(N.MOATService.initWithOptions(),p.PubSub.subscribe("SDKController.MOATStartTracking",function(){N.MOATService.createAdTracker(),N.MOATService.startTracking()}),p.PubSub.subscribe("SDKController.MOATStopTracking",function(){N.MOATService.stopTracking()})))}function Wt(){if(E&&"rejected"!==E.state())return E;var e=N.apiWithCdn()+We,n=(N.getConfig().mobileSDKSettings.deviceOs,N.getApiData({bundleId:1,deviceOs:1}));if(n.errMsg)return p.Utils.returnRejectedPromise(n.errMsg);if(!n.bundleId)return p.Utils.returnRejectedPromise("Missing bundleId");if(!n.deviceOs)return p.Utils.returnRejectedPromise("Missing deviceOs");var i="Failed to receive configuration from server";return E=v.ajax({url:e,data:n,type:"GET",dataType:"jsonp",cache:!0,jsonpCallback:"getAppConfigReqCallBack",timeout:2e4}).then(function(e,n,t){return e&&e.errorCode?p.Utils.returnRejectedPromise(e.errorMessage||i):(N.log("Got application configuration from server"),p.Utils.returnResolvedPromise(e))},function(e,n,t){return p.Utils.returnRejectedPromise(n||i)}).then(N._parseReceivedApplicationConfiguration,function(e){return N.log("Failed to get application configuration from server - "+e,N.LogLevels.verbose),fe.trackEvent(Ze.getApplicationConfigurationError,{generalMessage:e}),p.Utils.returnResolvedPromise()})}function Gt(e){je=e||{},e&&e.generalConfiguration&&e.generalConfiguration.applicationKey&&!ae.applicationSettings.applicationKey&&(ae.applicationSettings.applicationKey=e.generalConfiguration.applicationKey),e&&e.offerWallConfiguration&&(e.offerWallConfiguration.baseServerUrl&&(ae.mobileSDKSettings.baseServerUrl=e.offerWallConfiguration.baseServerUrl),e.offerWallConfiguration.serverType&&(ae.mobileSDKSettings.serverType=e.offerWallConfiguration.serverType))}function qt(){return je.offerWallConfiguration||{}}function Ht(n){if(!N.isLegacy(ee.MOAT)){var e="deviceVolumeSuccess";B.subscribe(H+"."+e,function(e){N.log("Device volume received: "+(e?JSON.stringify(e):"empty"),N.LogLevels.verbose),n&&e&&n.call(null,{deviceVolume:e.deviceVolume||"0"})}),N.callSDKFunction("getDeviceVolume",{},e,e)}}function Jt(){var t,i,r=new v.Deferred;return t=B.subscribe(H+".getDebugParamsSuccess",function(e){N.log("getDebugParamsSuccess "+JSON.stringify(e),N.LogLevels.verbose);try{var n={};ae.mobileSDKSettings.deviceOs===m.deviceOs.android?n=k.parseJSON(decodeURIComponent(e.SDK5DebugParams)):"object"==typeof e.SDK5DebugParams&&(n=e.SDK5DebugParams),r.resolve(n)}catch(e){N.log("getSDKDebugParams | getDebugParamsSuccess | parseJSONFailed |"+e,N.LogLevels.verbose),r.reject("failed to parse received SDK5 params")}tn([t,i])}),i=B.subscribe(H+".getDebugParamsFailed",function(e){var n="failed to get debug param";N.log("getSDKDebugParams | getDebugParamsFailed | "+n,N.LogLevels.verbose),r.reject(n),tn([t,i])}),N.callSDKFunction("getUserData",{key:"SDK5DebugParams"},"getDebugParamsSuccess","getDebugParamsFailed"),r.promise()}function Qt(n){var t=new v.Deferred;return Jt().then(function(e){return p.Utils.returnResolvedPromise(v.extend(n,e))}).always(function(e){t.resolve(e||n)}),t.promise()}function _t(e){var n="false";!0===e&&(n="true"),N.callSDKFunction("setAllowFileAccessFromFileURLs",{allowFileAccess:n})}function zt(){return ae.mobileSDKSettings&&ae.mobileSDKSettings.bundleId&&-1!==m.testAppBundleIds.indexOf(ae.mobileSDKSettings.bundleId)}function Xt(e){N.log("setCloseButtonState params "+JSON.stringify(e),N.LogLevels.verbose),e&&e.state&&e.productType&&(e.demandSourceName?Ne[e.productType][e.demandSourceName]=Z[e.state]:Ne[e.productType]=Z[e.state])}function $t(){if(!Ve){var e=N.getApiData(o.deviceDataRequestObject);e&&0<Object.keys(e).length&&(Ve={os:e.deviceOs,osv:e.deviceOSVersion,apilvl:D.getDeviceApiLevel(),sdkv:e.SDKVersion,webviewType:ae.mobileSDKSettings.webviewType})}return Ve||{}}function Yt(){var e;return ae.controllerConfig&&!0===ae.controllerConfig.isSecured?e=m.protocol.https:ae.mobileSDKSettings.deviceOs===m.deviceOs.android?e=m.protocol.http:ae.mobileSDKSettings.deviceOs===m.deviceOs.ios&&(ae.mobileSDKSettings.deviceOSVersion&&0<=k.versionCompare(ae.mobileSDKSettings.deviceOSVersion,"10")?ae.mobileSDKSettings.allowArbitraryLoadsInWebContent?(e=m.protocol.http,x=!0):ae.mobileSDKSettings.allowArbitraryLoads?e=m.protocol.http:(e=m.protocol.https,x=!0):e=ae.mobileSDKSettings.allowArbitraryLoads?m.protocol.http:m.protocol.https),e}function Zt(e){var n=null;return e?(e.productType&&(n=N[e.productType],e.demandSourceName&&n&&(n=n[e.demandSourceName])),n):null}function ei(e){var n={class:"ssaAdUnit ",selector:".ssaAdUnit"};return e&&e.productType?(n.class+=e.productType+" ",n.selector+="."+e.productType,e.demandSourceName&&(n.class+=e.demandSourceName+" ",n.selector+="."+e.demandSourceName)):N.log("In getAdUnitClass with no ad",N.LogLevels.error),n}function ni(e){return e.deviceOs===m.deviceOs.ios?ti(e):e["deviceIds[AID]"]}function ti(e){return 0<=k.versionCompare(e.deviceOSVersion,"10")&&"true"===e.isLimitAdTrackingEnabled?e["deviceIds[IDFV]"]:e["deviceIds[IFA]"]}var ii=function(e){e.deviceOs!==m.deviceOs.ios||-1!==k.versionCompare(e.deviceOSVersion,"10")&&"false"!==e.isLimitAdTrackingEnabled||(e["deviceIds[IDFV]"]=null)};function ri(){var e=N.Cache.getCacheByType({cacheBase:"assets"}),n=ae.mobileSDKSettings.jQueryUrls;e&&-1<N.Cache.getFileIndexInCache(e.cache,n[0])?N.log("jQuery file already cache",N.LogLevels.verbose):(N.log("Start save jQuery to cache",N.LogLevels.verbose),N.cacheAsset("assets",n).then(function(){N.log("jQuery file saved successfully",N.LogLevels.verbose)},function(){N.log("jQuery file cache failed",N.LogLevels.verbose)}))}function ai(){var e=ae.mobileSDKSettings.controllerPathFolder+ae.v,n=N.Cache.getCacheByType({cacheBase:e});n&&-1<N.Cache.getFileIndexInCache(n.cache,ae.mobileSDKSettings.controllerJSUrl)?N.log("controller js file already cache",N.LogLevels.verbose):si(e,ae.mobileSDKSettings.controllerJSUrl)}function oi(){var e=ae.mobileSDKSettings.controllerPathFolder+ae.v,n=N.Cache.getCacheByType({cacheBase:e}),t=ae.mobileSDKSettings.rootPath+ce,i=ae.mobileSDKSettings.cacheFolderPath+"/"+se;n&&-1<N.Cache.getFileIndexInCache(n.cache,t)?ci(i):si(e,t).then(function(){N.log("updateControllerCssToCache - cache css file succeeded",N.LogLevels.verbose),ci(i)},function(){N.log("updateControllerCssToCache - cache css file failed",N.LogLevels.verbose),ci(t)})}function si(e,n){return N.log("Start saving file to cache, url: "+n,N.LogLevels.verbose),N.cacheAsset(e,n).then(function(){N.log("File saved successfully",N.LogLevels.verbose)},function(){N.log("File cache failed",N.LogLevels.verbose)})}function ci(e){var n=v("head");0<v("#ssaMobileControllerCss").length||n.prepend('<link rel="stylesheet" id="ssaMobileControllerCss" type="text/css" />'),v("#ssaMobileControllerCss").attr("href",e)}function li(){ri(),ai(),oi()}function di(n){if(!n)return p.Utils.returnRejectedPromise("productType is empty");var e=null,t=null,i=new v.Deferred,r="getUserUniqueIdSuccess",a="getUserUniqueIdFailure";function o(){p.PubSub.unsubscribe(e),p.PubSub.unsubscribe(t)}return e=p.PubSub.subscribe(H+"."+r,function(e){e&&e.productType===n&&(N.log("succeeded to get "+n+" unique user "+JSON.stringify(e),N.LogLevels.verbose),o(),i.resolve(e))}),t=p.PubSub.subscribe(H+"."+a,function(e){e&&e.productType===n&&(N.log("failed to get "+n+" unique user",N.LogLevels.verbose),o(),fe.trackEvent(Ze.getUserUniqueIdFailure),i.reject(e))}),N.callSDKFunction("getUserUniqueId",{productType:n},r,a),i.promise()}function ui(n){if(!n)return p.Utils.returnRejectedPromise("productType empty");var e=null,t=null,i=new v.Deferred;function r(){p.PubSub.unsubscribe(e),p.PubSub.unsubscribe(t)}return e=p.PubSub.subscribe(H+".setUserUniqueIdSuccess",function(e){e&&e.productType===n&&(N.log("succeeded to set RV unique user",N.LogLevels.verbose),r(),i.resolve())}),t=p.PubSub.subscribe(H+".setUserUniqueIdFailure",function(e){e&&e.productType===n&&(N.log("failed to set RV unique user",N.LogLevels.verbose),r(),fe.trackEvent(Ze.setUserUniqueIdFailure),i.reject("Failed to set user unique id"))}),N.callSDKFunction("setUserUniqueId",{userUniqueId:N.getFixedUserIdForCache(),productType:n},"setUserUniqueIdSuccess","setUserUniqueIdFailure"),i.promise()}function fi(n){if(!n)return p.Utils.returnRejectedPromise("productType is empty");if(ae.mobileSDKSettings.deviceOs===m.deviceOs.ios)return p.Utils.returnResolvedPromise();var e=new v.Deferred;return n===Q&&N.isLegacy(N.featureMap.MDS[m.RV])&&(n=J),di(n).then(function(e){if(!e||!e.userUniqueId)return N.log("UserId in "+n+"is empty. try to set default userId",N.LogLevels.verbose),Ke[n]=!0,ui(n)}).always(function(){e.resolve()}),e.promise()}function gi(){si(ae.mobileSDKSettings.assetsCachePath,"http://local.ssacdn.com/users/staging/local/adunit/dist/assets/obfuscators/obfuscateV1.4bdd1f85.html").then(function(){N.log("downloadObfuscator - cache obfuscateV1 succeeded",N.LogLevels.verbose)},function(){N.log("downloadObfuscator - cache obfuscateV1 failed",N.LogLevels.verbose)})}function pi(e){if(!N.HTTPService.getIsNativeEngineExist())return!1;return N.HTTPService.GETRequest(e,{allowNative:!0,background:!0,retries:3}),!0}function vi(e){N.PixelTrackingService.firePixel(e)}function mi(e,n,t,i){var r,a,o=new v.Deferred,s=[];if(!k.isString(e)||!k.isString(n))return k.returnRejectedPromise("missing or corrupted params");r=B.subscribe(H+".postAdEventNotificationSuccess",function(e){N.log("postAdEventNotificationSuccess"+JSON.stringify(e),N.LogLevels.info),tn(s),o.resolve()}),s.push(r),a=B.subscribe(H+".postAdEventNotificationFailed",function(e){var n=e.errMsg?e.errMsg:"unknown reason";N.log("error calling postAdEventNotificationFailed: "+n,N.LogLevels.error),tn(s),o.reject(n)}),s.push(a);var c={eventName:e,dsName:t,productType:n,extData:i||{}};return N.log("Controller - Notifies SDK on Event: "+c.eventName+" in Product: "+c.productType,N.LogLevels.info),N.callSDKFunction("postAdEventNotification",c,"postAdEventNotificationSuccess","postAdEventNotificationFailed"),o.promise()}function bi(e){var n,t=v("#ssaDialogBox");switch(e){case"template4":n={dialogText:{maxFontPixels:29,maxHeight:87,parentContainer:t},buttonText:{maxFontPixels:24,maxHeight:43,maxWidth:hi(e).maxDialogBtnTextWidth,parentContainer:pe}};break;default:n={dialogText:{maxFontPixels:24,maxHeight:87,parentContainer:t},buttonText:{maxFontPixels:20,maxHeight:44,maxWidth:hi(e).maxDialogBtnTextWidth,parentContainer:pe}}}return n}function hi(e){return m.templateStyle[e]?m.templateStyle[e]:m.templateStyle.defaultTemplate}function Si(){var t="",e=v("#ssaDialogBox"),n=e[0]&&e[0].classList;return v.each(n,function(e,n){n.match(/template.*/)&&(t=n)}),t}function yi(e,n,t,i){p.PubSub.publish(H+"."+e,[n,t,i])}function Ci(){for(;0<nativeQueue.length;){var e=nativeQueue.shift();yi(e.name,e.parameters,e.successCallback,e.errorCallback)}}function Ai(e){return N.SDKLimitations.getLimitData(e)}window.onerror=function(e,n,t,i,r){try{if(!r||!r.message)return;var a={url:n,lineNo:t,colNo:i,error:r&&r.message.substring(0,500)||""};Ee&&Je&&fe.trackEvent(Ze.controllerException,{generalMessage:e},{rvnomoreoffersreason:JSON.stringify(a)}),N.log("onError handler. Exception:"+JSON.stringify(a),N.LogLevels.verbose)}catch(e){}};var Di={adUnitGlobals:t,adUnitLibsManager:i,adUnitUrl:a,LogLevels:{none:0,error:1,info:2,verbose:3},featureMap:ee,debugMsg:n.debugMsg,decideUrlProtocolAccordingToHTTPSCompliance:Yt,msgHandler:Ot,instancesManager:c,blacklistService:l,jQuery:function(){return v},api:function(){return Yt()+"//"+ae.mobileSDKSettings.domain},apiWithCdn:function(){return ae.mobileSDKSettings.protocol+"//"+ae.mobileSDKSettings.serviceCdn},getBaseCdnUrl:function(){return ae.mobileSDKSettings.protocol+"//"+ae.mobileSDKSettings.cdn},getBaseServerUrl:function(){return ae.mobileSDKSettings.baseServerUrl&&N.getEnv()===m.environment.production?ae.mobileSDKSettings.protocol+"//"+ae.mobileSDKSettings.baseServerUrl:""},getServerType:function(){return ae.mobileSDKSettings.serverType||"new"},init:function(e){return N=this,v=window.jQuery,T=Ii("../../components/CampaignsFilter.js")(p,N).factory("Controller"),K||(v.extend(ae.mobileSDKSettings,e.mobileSDKSettings),v.extend(ae.controllerConfig,e.controllerConfig),ae.mobileSDKSettings.overrideDebug&&(ae.mobileSDKSettings.debug=ae.mobileSDKSettings.defaultDebug),N.APIConfigurations.init(),D=new d(ae,v,p.Utils,m),A=N.AppOrientationManager,C=new u(n,m,A),gn(),pn(),gt(),cn(),rn(),un(),vn(),mn(),an(),sn(),jt(ae.controllerConfig),N.log("Controller initiated",N.LogLevels.info),U.setNativeConfiguration(h.native[ae.mobileSDKSettings.deviceOs]),v.when(fi(Q),fi(z),fi(X)).then(function(){v.when(ut(),ht()).then(function(){t.setProtocol(Yt()),window.queueValidMessages={},Ci()},function(e){N.callSDKFunction("initController",{stage:"failed",errMsg:e})}).then(Kt).then(function(){v.when(N._getApplicationConfigurationFromServer(),li(),dt())}).then(function(){return lt(),p.Utils.returnResolvedPromise()}).fail(function(e){e?N.log(e,N.LogLevels.verbose):N.log("failed promise on get app config",N.LogLevels.verbose)})}),yt(),Ct(),K=!0),K},getConfigurationHelper:function(){return D},initProducts:function(t){v.each(t.products,function(e,n){N[n].init(t[n])})},getAPIRequiredData:function(){var e=N.APIConfigurations.getCommonRequiredData(),n=N.getApiData(e),t=new v.Deferred;return n&&n!=={}?p.Utils.isDefined(n.errMsg)?t.reject(n.errMsg):t.resolve(n):t.reject("Failed to get required parameters"),t.promise()},getApiData:function(e){var n,t={};for(n in e)if(e.hasOwnProperty(n)){if(1===e[n]&&!vt(n)&&!mt(n)){t={errMsg:$.missing+n};break}vt(n)?t[n]=bt(n):"customParams"===n?v.extend(t,rt()):mt(n)&&(t[n]=oe[n]())}return t},getSDKDataByKey:function(e){return bt(e)},runFunction:function(e,n,t){var i=nt(e);if(queueValidMessages[i.name])nativeCommunicator.runFunction(e,n,t);else{if("acknowledgeMessage"!==i.name||!window.shouldReportReady){var r,a=!0;r=k.parseJSON(i.parameters);try{k.isDefined(i.name)&&yi(i.name,r,n,t)}catch(e){N.log("error running function:"+i.name+", error:"+e,N.LogLevels.error),a=!1}return a}nativeCommunicator.runFunction(e,n,t)}},callSDKFunction:function(e,n,t,i){if(k.isString(e)&&""!==e){var r=k.isDefined(t)&&k.isString(t)?t:"",a=k.isDefined(i)&&k.isString(i)?i:"";N.postMessage({eventName:e,parameters:v.extend({success:r,fail:a},n)})}},callSDKService:function(e,n,t,i,r){t&&(t.functionName=n),N.callSDKFunction(e,t,i,r)},postMessage:function(e,n,t){e.prefix=G,k.isDefined(e.parameters)||(e.parameters={}),v.extend(e.parameters,{acknowledgeWith:k.isDefined(n)?n:q,declineWith:k.isDefined(t)?t:"errorTest"}),de.postMessage(e)},acknowledgeMessage:function(e){de.acknowledgeMessage(e)},getApplicationInfo:function(r,e){var t,i,a=v.Deferred(),o=function(e,n){tn([t,i]),e?a.resolve(ae):a.reject($.appInfo,n)};if(t=B.subscribe(H+".parseApplicationInfo",function(e,n,t){var i;k.isDefined(e.productType)&&e.productType!==r.productType&&e.demandSourceName!==r.demandSourceName?N.log("application info send for the wrong product",N.LogLevels.verbose):(N.log("App info received: "+JSON.stringify(e),N.LogLevels.info),delete e.productType,delete e.demandSourceName,(i=Dt(e)).didSucceed?(k.isDefined(n)&&N.callSDKFunction(n),o(!0)):(k.isDefined(t)&&N.callSDKFunction(t,{errMsg:i.errMsg}),o(!1,i.errMsg)))}),i=B.subscribe(H+".getApplicationInfoFailed",function(e){et(e),o(!1,"Failed retrieving application info")}),k.isDefined(e)&&e){var n=Dt(e);n.didSucceed?o(!0):(N.log(n.errMsg,N.LogLevels.error),o(!1,n.errMsg))}else N.callSDKFunction("getApplicationInfo",r,"parseApplicationInfo","getApplicationInfoFailed");return a.promise()},setCloseButtonState:Xt,getEnv:function(){m.environment.production;return ae.mobileSDKSettings.debug&&0<parseInt(ae.mobileSDKSettings.debug)&&ae.mobileSDKSettings.domain!==m.domainUrls.prod?ae.mobileSDKSettings.domain===m.domainUrls.local?m.environment.develop:m.environment.stage:m.environment.production},getProtocol:function(){return ae.mobileSDKSettings.protocol},isLegacy:function(e){var n=-1;try{var t="android"===ae.mobileSDKSettings.deviceOs?e.android:e.ios;n=k.versionCompare(ae.mobileSDKSettings.SDKVersion,t)}catch(e){N.log(e,N.LogLevels.error)}return N.log("isLegacy: "+(n<0)+" Feature: "+JSON.stringify(e),N.LogLevels.verbose),n<0},getFixedUserIdForCache:function(){return"UniqueUser"},setFixedUserIdForCache:ui,getSValue:function(){return F},isRewardedAdBeforeInitLoadShow:function(e){return N.isLegacy(N.featureMap.rewardedAdInitLoadShow)&&e===m.RV},cacheAdUnitAssets:function(n,e){var t,i=e.assets,r=e.lastUpdateTime,a=i.length,o=new v.Deferred,s=[],c=0;for(0===a&&o.resolve(0),t=0;t<a;t++)s.push(N.cacheAsset(n,i[t],r));return v.when.apply(null,s).always(function(){var e=arguments;for(t in e)N.log("path: "+n+" res: "+e[t],3),e[t]&&c++;o.resolve(c)}),o.promise()},cacheAsset:function(n,t,e,i){var r,a,o,s=[],c=new v.Deferred;if(k.isString(t)&&(t=[t]),"device"===ae.applicationSettings.preCache){var l,d={path:k.isString(n)?n:n.toString(),overrideExistingFile:i},u=-1,f=function(e){c.reject(e),tn(s)},g=function(e){++u>=t.length?f(e||"Index error in array assets url"):(l=t[u],d.file=x?k.changeUrlProtocol(l,m.protocol.https):l,N.log("trying to save file: "+d.file+". To path: "+decodeURIComponent(d.path),N.LogLevels.info),N.callSDKFunction("saveFile",d,"preCacheFileSuccess","preCacheFileFailed"))};k.isDefined(e)&&(d.lastUpdateTime=e.toString()),r=B.subscribe(H+".assetCached",function(e){if(!nn(["path","file"],e,"preCacheFileSuccess").didSucceed)return N.log("error calling assetCached "+JSON.stringify(e),N.LogLevels.error),void f("error calling assetCached");decodeURIComponent(e.path)===n&&l.match(e.file)&&(tn(s),N.log("successfully saved file: "+decodeURIComponent(e.path)+"/"+e.file,N.LogLevels.info),c.resolve(!0))}),a=B.subscribe(H+".assetCachedFailed",function(e){decodeURIComponent(e.path)===n&&l.match(e.file)&&(N.log("failed saved file: "+decodeURIComponent(e.path)+"/"+e.file,N.LogLevels.info),g("failed saved file"))}),o=B.subscribe(H+".preCacheFileFailed",function(e){decodeURIComponent(e.path)===n&&l.match(e.file)&&(N.log("failed to create connection to save file:"+decodeURIComponent(e.path)+"/"+e.file,N.LogLevels.error),g("failed to create connection to save file"))}),s.push(r),s.push(a),s.push(o),g()}else c.resolve(!0);return c.promise()},deleteFolder:function(e){k.isString(e)||e.toString(),N.callSDKFunction("deleteFolder",{path:e},"deleteFolderSuccess","deleteFolderFailed")},deleteAsset:function(n,t){var e,i,r=new v.Deferred,a=[];return k.isString(n)||n.toString(),k.isString(t)||t.toString(),e=B.subscribe(H+".deleteFileSuccess",function(e){if(!nn(["path","file"],e,"deleteFileSuccess").didSucceed)return N.log("error calling deleteFileSuccess "+JSON.stringify(e),N.LogLevels.error),r.reject("failed to delete file: "+e.file),void tn(a);decodeURIComponent(e.path)===n&&t.match(e.file)&&(tn(a),N.log("successfully deleted file: "+decodeURIComponent(e.path)+"/"+e.file,N.LogLevels.info),r.resolve())}),a.push(e),i=B.subscribe(H+".deleteFileFailed",function(e){if(!nn(["path","file"],e,"deleteFileFailed").didSucceed)return N.log("error calling deleteFileFailed "+JSON.stringify(e),N.LogLevels.error),r.reject("failed to delete file: "+e.file),void tn(a);decodeURIComponent(e.path)===n&&t.match(e.file)&&(tn(a),N.log("failed to delete file: "+e.file,N.LogLevels.info),r.reject("failed to delete file: "+e.file))}),a.push(i),N.callSDKFunction("deleteFile",{path:n,file:t},"deleteFileSuccess","deleteFileFailed"),r.promise()},setBackButtonState:function(e){var n=e?At():Pe.none;N.callSDKFunction("setBackButtonState",{state:n})},addAdToLoadedCreatives:function(e){return!(!e||Vn(e))&&(R.push(e),!0)},isContainerLoaded:function(e){return I.isContainerLoaded(e)},loadAdUnitUrl:function(e,n,t,i){I.createAndLoadAdFrame(e,n,t,i),N.addAdToLoadedCreatives(e)},displayAdUnitFrame:function(e){I.displayAdFrame(e,Fn,xn,Nn)},updateAdUnitUrl:function(e,n,t,i){I.updateFrameUrl(e,n,t,i),N.addAdToLoadedCreatives(e)},onAdLoaded:function(e){var n=function(){N.log("line[2787]: ad loaded mismatch",N.LogLevels.error),he<Se&&(B.publish("SDKController.AdLoadError",[e]),he++)};if(e&&e.productType)if(Cn(N.AdUtils.getAdId(e),e))Jn(e);else{var t={eventParam:{eName:Ze.mismatchAdLoadError},action:"fireEvent",productType:e.productType};e.demandSourceName&&(t.demandSourceName=e.demandSourceName),B.publish("SDKController.Analytics",[t]),N.log("mismatch from not being in loadedcreatives",3),n()}else n()},removeAdUnit:function(e){if(P.isAdDisplayed(e)){var n=Zt(e);On();var t=!(!n||!k.isFunction(n.getNextAd))&&n.getNextAd(!0,e.inventoryId);kn(!1,t)}else St(Cn(N.AdUtils.getAdId(e),e),{preloadNextInBG:!0})},removeAdUnitFromExternal:function(e){En(N.AdUtils.getAdId(e)),p.PubSub.publish("SDKController.engageEnd",[e])},unloadFramesByProduct:function(e){var t,n=b.getDisplayedAdFrame();N.log("Removing all current "+e.productType+" frames"),n&&n.hasClass(ei(e).class)&&P.isDisplayed()&&(en(),kn()),v.each(v(ei(e).selector),function(e,n){t=v(n).data("id"),En(t),n.parentNode.removeChild(n)})},isRootFolder:function(e){return ae.mobileSDKSettings.deviceOs===m.deviceOs.ios?"SSAPublisher"===e:"supersonicads"===e},getCurrentDisplayedAd:function(){return P.get()},setCurrentDisplayedAd:function(e){return P.set(e)},getCurrentDisplayedAdType:function(){return P.getDisplayedAdType()},isAdDisplayed:function(e){return P.isAdDisplayed(e)},getGlobalAppData:function(){var n,t,i,r,a=new v.Deferred;return n=B.subscribe(H+".parseGlobalData",function(e){if(r="string"==typeof e.ssaGlobalAppData?k.parseJSON(decodeURIComponent(e.ssaGlobalAppData)):e.ssaGlobalAppData,N.log("Full global app data is: "+JSON.stringify(r),N.LogLevels.verbose),!r)return a.reject("Invalid Global Data response"),void tn([n,t]);a.resolve(r),tn([n,t])}),t=B.subscribe(H+".getGlobalDataFailed",function(e){i=nn(["errMsg"],e,"getGlobalDataFailed").didSucceed?e.errMsg:nn(["errMsg"],e,"getGlobalDataFailed").errMsg,a.reject(i),tn([n,t])}),N.callSDKFunction("getUserData",{key:"ssaGlobalAppData"},"parseGlobalData","getGlobalDataFailed"),a.promise()},setCachePriorityArrayKey:function(n,t){return t?N.getGlobalAppData().then(function(e){return e.cachePriorityArray=e.cachePriorityArray||{},e.cachePriorityArray[n.cacheBase]=t,N.setGlobalAppData(e)}):p.Utils.returnResolvedPromise()},setGlobalAppData:function(e){var n,t,i,r=new v.Deferred;return n=B.subscribe(H+".setGlobalDataSuccess",function(){r.resolve(),tn([n,t])}),t=B.subscribe(H+".setGlobalDataFailed",function(e){i=nn(["errMsg"],e,"setGlobalDataFailed").didSucceed?e.errMsg:nn(["errMsg"],e,"setGlobalDataFailed").errMsg,r.reject(i),tn([n,t])}),N.callSDKFunction("setUserData",{key:"ssaGlobalAppData",value:JSON.stringify(e)},"setGlobalDataSuccess","setGlobalDataFailed"),r.promise()},getUserData:function(n,t){var i,r,a,o,s=new v.Deferred;return k.isDefined(t)&&!k.isDefined(n)?s.reject("Missing info to retrieve user data."):(i=B.subscribe(H+".parseUserData",function(e){return nn(["ssaUserData"],e,"parseUserData").didSucceed?(o="string"==typeof e.ssaUserData?k.parseJSON(decodeURIComponent(e.ssaUserData)):e.ssaUserData,N.log("Full user data is: "+JSON.stringify(o),N.LogLevels.verbose),o?(k.isDefined(n)&&(o=o[n]||{},k.isDefined(t)&&(o=o[t]||{})),N.log("Get user data response: "+JSON.stringify(o)+" for appKey "+n+" and userId "+t+" (if no specific user return all)",N.LogLevels.verbose),s.resolve(o)):s.reject("Invalid User Data response"),void tn([i,r])):(a=nn(["errMsg"],e,"parseUserData").errMsg,s.reject(a),void tn([i,r]))}),r=B.subscribe(H+".getUserDataFailed",function(e){a=nn(["errMsg"],e,"getUserDataFailed").didSucceed?e.errMsg:nn(["errMsg"],e,"getUserDataFailed").errMsg,s.reject(a),tn([i,r])}),N.callSDKFunction("getUserData",{key:"ssaUserData"},"parseUserData","getUserDataFailed")),s.promise()},setUserData:function(n,t,i){var r,a,o,s,c=new v.Deferred;return k.isDefined(n)&&k.isDefined(t)?v.when(N.getUserData()).then(function(e){s=e,k.isDefined(s[n])||(s[n]={}),k.isDefined(s[n][t])||(s[n][t]={}),i==={}?s[n][t]={}:v.extend(s[n][t],i),r=B.subscribe(H+".setUserDataSuccess",function(){c.resolve(),tn([r,a])}),a=B.subscribe(H+".setUserDataFailed",function(e){o=nn(["errMsg"],e,"setUserDataFailed").didSucceed?e.errMsg:nn(["errMsg"],e,"setUserDataFailed").errMsg,c.reject(o),tn([r,a])}),N.callSDKFunction("setUserData",{key:"ssaUserData",value:JSON.stringify(s)},"setUserDataSuccess","setUserDataFailed")},function(e){c.reject(e)}):c.reject("Missing info to set user data."),c.promise()},getConfig:function(){return ae},getApplicationExternalConfig:function(){return s},isSupportedOsVersion:function(e){return null===D.getDeviceApiLevel().match(Oe[e][ae.mobileSDKSettings.deviceOs])},isLimitedDeviceModel:function(){if(!ae.controllerConfig||-1===m.applicationsLimitations.indexOf(ae.controllerConfig.applicationKey))return!1;var e=decodeURIComponent(ae.mobileSDKSettings.deviceModel);return-1!==m.deviceLimitations.indexOf(e)},checkRequiredCallbackParams:function(e,n,t,i){return nn(e,n,t,i)},clearHandlers:function(e){tn(e)},alert:function(e){var n,t=v("#ssaDialogText"),i=v(".dialogBox"),r=Si(),a=bi(r),o=hi(r),s=!1,c=v("#ssaDialogConfirmBtnText"),l=v("#ssaDialogCancelBtnText"),d=v("#ssaDialogBtns");Tn("dialogBoxAboutToOpen"),i.removeAttr("style"),i.css("display","block"),(!me||e&&e.alwaysClose)&&(I.hideLoader(),Dn(),s=!0),me||I.displayContainer(e);var u=b.getDisplayedAdFrame();if(u&&p.Msg.postMessage("hideFrame","*",u[0].contentWindow),d.removeClass("singleBtn"),"object"==typeof e&&(ve.removeClass("hidden").removeAttr("style"),pe.removeClass("hidden").removeAttr("style"),k.isDefined(e.close)?(n=e.close,c.text(e.yes),l.text(e.no),pe.textWidth()>o.minDialogBtnWidth||ve.textWidth()>o.minDialogBtnWidth?(ve.css({width:o.maxDialogBtnWidth+"px",left:"20px"}),pe.css({width:o.maxDialogBtnWidth+"px",right:"20px"})):(ve.css({width:o.baseDialogBtnWidth+"px",left:"55px"}),pe.css({width:o.baseDialogBtnWidth+"px",right:"55px"})),(pe.textWidth()>o.maxDialogBtnTextWidth||ve.textWidth()>o.maxDialogBtnTextWidth||-1!==v.inArray(" ",e.yes)||-1!==v.inArray(" ",e.no))&&(c.textfill2(a.buttonText),a.buttonText.parentContainer=ve,l.textfill2(a.buttonText))):k.isDefined(e.message)?(n=e.message,k.isDefined(e.yes)&&c.text(e.yes),k.isDefined(e.no)&&l.text(e.no)):n=JSON.stringify(e),s)){d.addClass("singleBtn"),ve.addClass("hidden");var f=pe[0].offsetWidth/2;pe.css("margin-left",-1*f+"px")}t.text(n),t.textfill2(a.dialogText),i.css("visibility","visible");var g=v("#ssaDialogBoxOverlay");g.fadeIn(100),g.bind("click",function(e){e.preventDefault()}),ge.fadeIn(300)},log:n.log,logEvent:function(e,n){at(e)},openUrl:function(e,n){wn(e,n)},postAdUnitEvent:function(e,n){Tn(e,n)},initEventics:Ft,getOfferWallConfiguration:qt,getFormattedDeviceData:$t,shouldExtendApiDataWithDebugData:zt,extendApiDataWithDebugParams:Qt,getSDKDebugParams:Jt,getPatchesIphoneXObj:function(){return L},setAllowFileAccessFromFileURLs:_t,getDeviceId:function(){return ni(N.getConfig().mobileSDKSettings)},getSDKLimitationData:Ai,addExternalAdViewIdAndSetStatus:function(e){w.addExternalAdViewIdAndSetStatus(e)},getExternalContainer:function(){return w},onAdVisible:Mn};return v.extend(Di,{_getApplicationConfigurationFromServer:Wt,_parseReceivedApplicationConfiguration:Gt}),N=Di,Di}e.exports=function(e,n){var t=Ii("../../components/Constants.js"),i=Ii("../Cache.js"),r=Ii("../InterstitialFactory.js"),a=Ii("../OfferWall.js"),o=Ii("../RewardedAdFactory.js"),s=Ii("../BannerFactory.js"),c=Ii("../SDKInterface.js"),l=Ii("../../components/HTTPService.js"),d=Ii("../../components/AdUtils.js"),u=Ii("../../components/DemandUtils.js"),f=Ii("../../components/HybridService.js"),g=Ii("../../components/StoreKitService.js"),p=Ii("../../components/ViewsManager.js"),v=Ii("../../components/PixelTrackingService.js"),m=Ii("../../components/OpenURLService.js"),b=Ii("../../components/MOATService.js"),h=Ii("../../components/RingerSwitchService.js"),S=Ii("../../components/OrientationService.js"),y=Ii("../../components/GDPRservice.js"),C=Ii("../../components/orientation/AppOrientationManager.js"),A=Ii("../../components/PermissionService"),D=Ii("./SDKLimitations"),I=Ii("../../components/APIConfigurations.js"),w=Ii("../../components/NativeLifeCycleEventsService.js"),L=new P(e,window.jQuery,t);return L.Cache=new i(e,L),L.SDKLimitations=new D(L),L.OfferWall=new a(e,L),L.InterstitialFactory=new r(e,L),L.RewardedAdFactory=new o(e,L),L.BannerFactory=new s(e,L),L.SDKInterface=new c(e,L,n),L.HTTPService=new l(e,L),L.AdUtils=new d(e,L,window.jQuery),L.DemandUtils=new u(e,L),L.HybridService=new f(e,L),L.StoreKitService=new g(e,L),L.ViewsManager=new p(e),L.PixelTrackingService=new v(L),L.OpenURLService=new m(L),L.MOATService=new b(e,L),L.RingerSwitchService=new h(e,L),L.OrientationService=new S(e,L,t),L.GDPRService=new y(e,L,t),L.AppOrientationManager=new C(e,L,t),L.PermissionService=new A(e,L),L.APIConfigurations=new I(L),L.NativeLifeCycleEventsService=new w(e,L,t),L}},{"../../components/APIConfigurations.js":1,"../../components/AdOrientationManager.js":2,"../../components/AdUtils.js":3,"../../components/BlacklistService":5,"../../components/CampaignsFilter.js":6,"../../components/Constants.js":7,"../../components/DemandUtils.js":8,"../../components/DisplayedAdManager.js":9,"../../components/ExternalConfig":10,"../../components/FrameHelper.js":13,"../../components/GDPRservice.js":15,"../../components/HTTPService.js":16,"../../components/HybridService.js":17,"../../components/Logger.js":20,"../../components/MOATService.js":21,"../../components/NativeLifeCycleEventsConstants.js":24,"../../components/NativeLifeCycleEventsService.js":25,"../../components/OpenURLService.js":27,"../../components/OrientationService.js":29,"../../components/PermissionService":31,"../../components/PixelTrackingService.js":33,"../../components/RingerSwitchService.js":36,"../../components/StoreKitService.js":37,"../../components/ViewsManager.js":40,"../../components/containers/ContainerManager.js":41,"../../components/containers/ExternalContainer.js":44,"../../components/orientation/AppOrientationManager.js":45,"../../modules/SDKController/EventCategories":86,"../../patches/PatchesIphoneX.js":103,"../../presenter/uiConfig.js":105,"../AdUnitManager/AdUnitGlobals.js":55,"../AdUnitManager/AdUnitLibsManager.js":57,"../AdUnitUrl.js":59,"../BannerFactory.js":62,"../Cache.js":63,"../InterstitialFactory.js":74,"../OfferWall.js":75,"../RewardedAdFactory.js":79,"../SDKInterface.js":95,"./ConfigurationHelper.js":85,"./SDKLimitations":88,"./instancesManager.js":90,"./mainConfig.js":91,"./nativeConfigHandler.js":92,"./sessionConfig":93,"./videoStateHandler.js":94}],88:[function(e,n,t){n.exports=function(t){var i=" is not supported";return{getLimitData:function(e){var n={errMsg:"",didSucceed:!0};return t.isSupportedOsVersion(e)?t.isLimitedDeviceModel()&&(n.errMsg="Device"+i,n.didSucceed=!1):(n.errMsg="Operating system version "+t.getApiData({deviceOSVersion:1}).deviceOSVersion+i,n.didSucceed=!1),n}}}},{}],89:[function(e,n,t){n.exports=function(s,n,c){var l={v:function(e){return e.match(/^[0-9]+?[.]?[0-9]+?[.]?[0-9]+$/)},appOrientation:function(e){var n=e;return"portrait"===(n=n.toLowerCase())||"landscape"===n||"none"===n},connectionType:function(e){var n=decodeURIComponent(e);return"wifi"===(n=n.toLowerCase())||n.match(/^mobile\[.+\]$/)||"3g"===n||"none"===n},iphoneAppOnIpadDevice:function(e){var n=parseInt(e);return 0===n||1===n},deviceOs:function(e){return e&&""!==e},SDKVersion:function(e){return e&&""!==e},deviceOSVersion:function(e){return e&&""!==e},deviceApiLevel:function(e){return e&&""!==e},bundleId:function(e){return e&&""!==e},"deviceIds[OpenUDID]":function(e){return s.isDefined(e)},"deviceIds[IFA]":function(e){return s.isDefined(e)},"deviceIds[SERIAL]":function(e){return s.isDefined(e)},"deviceIds[AndroidID]":function(e){return s.isDefined(e)},"deviceIds[IMEI]":function(e){return s.isDefined(e)},"deviceIds[AID]":function(e){return s.isDefined(e)},deviceScreenScale:function(){return!0},"deviceScreenSize[width]":function(){return!0},"deviceScreenSize[height]":function(){return!0},diskFreeSize:function(e){var n=parseInt(e);return!isNaN(n)&&0<=n},showDeliveryLimitationsLog:function(){return!0},country:function(e){return e&&""!==e},debug:function(e){return s.isDefined(n[e])},disableCache:function(e){var n=parseInt(e);return 0===n||1===n},disableSession:function(e){var n=parseInt(e);return 0===n||1===n},applicationKey:function(e){return e&&""!==e},applicationUserId:function(e){return e&&""!==e},applicationUserGender:function(e){return"unknown"===e||"female"===e||"females"===e||"male"===e||"males"===e||"both"===e},applicationUserAgeGroup:function(e){var n=parseInt(e);return 0<=n&&n<=9},applicationUserCreationDate:function(e){return e.match(/^(19|20)\d\d([- /.])(0[1-9]|1[012])\2(0[1-9]|[12][0-9]|3[01])$/)},maxVideoLength:function(e){var n=parseInt(e);return!isNaN(n)&&0<=n},itemCount:function(e){var n=parseInt(e);return!isNaN(n)&&0<n},minimumOfferCommission:function(e){var n=parseFloat(e);return!isNaN(n)&&0<=n},demoCampaigns:function(e){var n=parseInt(e);return 0===n||1===n},numOfCampaigns:function(e){var n=parseInt(e);return!isNaN(n)&&0<=n},campaignId:function(e){var n=parseInt(e);return!isNaN(n)&&0<n},pageSize:function(e){var n=parseInt(e);return!isNaN(n)&&0<=n},landingId:function(e){var n=parseInt(e);return!isNaN(n)&&0<n},page:function(e){var n=parseInt(e);return!isNaN(n)&&0<n},admin:function(e){var n=parseInt(e);return 0===n||1===n},useClientSideCallbacks:function(e){var n=e.toString();return"true"===n||"false"===n},unLocked:function(e){var n=e.toString();return"true"===n||"false"===n},isLimitAdTrackingEnabled:function(e){return s.isDefined(e)},placementId:function(e){var n=parseInt(e);return!isNaN(n)&&0<=n},allowArbitraryLoads:function(e){var n=e.toString();return"true"===n||"false"===n},allowArbitraryLoadsInWebContent:function(e){var n=e.toString();return"true"===n||"false"===n}};return function(e,n){var t,i,r,a=!0,o=null;for(t in e){if(s.isDefined(l[t])&&!1===l[t](e[t])){o=c.invalid+t,a=!1;break}r=e[i=t],n[i]=r}return{didSucceed:a,errMsg:o}}}},{}],90:[function(e,n,t){n.exports=function(l,d){var i=!1,u={};u[d.RV]=[],u[d.IS]=[],u[d.BN]=[];var f=e("../DemandSource/DemandInstanceBuilder.js");function a(e){var n=u[e.productType];if(n)for(var t=0;t<n.length;t++){var i=n[t],r=i&&i.instances;if(!r)break;var a=r.indexOf(e.demandSourceName);if(-1<a){var o=g(i.instancesUninitializedList,e.demandSourceName);if(-1<o&&i.instancesUninitializedList.splice(o,1),-1===g(i.instancesOrderList,e.demandSourceName))if(i.instanceOrderByActivation)i.instancesOrderList.push(e);else{var s=Math.min(i.instancesOrderList.length,a);i.instancesOrderList.splice(s,0,e)}break}}}function o(e,i){var r=!0,n=u[e];return n&&n.forEach(function(e){var n=e.instances;if(n&&-1<n.indexOf(i)){var t=e.instanceOrderByActivation;r=e.instancesOrderList[0].demandSourceName===i&&(t||n[0]===i)}}),r}function g(e,n){for(var t=0;t<e.length;t++)if(e[t].demandSourceName===n)return t;return-1}function s(e,i){var r=new f({productType:e},{demandSourceName:i,demandGroupName:i,demandType:d.demandSourceType.demandSource}),n=u[e];return n&&n.forEach(function(e){var n=e.instances;if(n&&-1<n.indexOf(i)){var t=g(e.instancesUninitializedList,i);-1<t?r=e.instancesUninitializedList[t]:-1<(t=g(e.instancesOrderList,i))&&(r=e.instancesOrderList[t])}}),r}function r(e,n){if(n&&0<n.length)for(var t=n,i=0;i<t.length;i++)t[i].instancesOrderList=[],t[i].instancesUninitializedList=[],u[e].push(t[i])}return{init:function(e,n){var t;i||(e&&e.instancesMap&&(t=e.instancesMap)&&(t[d.sspProductNames.RewardedVideo]&&r(d.RV,t[d.sspProductNames.RewardedVideo]),t[d.sspProductNames.Interstitial]&&r(d.IS,t[d.sspProductNames.Interstitial]),t[d.sspProductNames.Banner]&&r(d.BN,t[d.sspProductNames.Banner])),i=!0)},initiateDemandInstanceWithDependency:function(e,n,t,i){var r=s(e,n);a(r),r.demandType===d.demandSourceType.instance?(r.waitingForState=r.waitingForState||[],r.initiationCallback=t,r.pendingInitiationCallback=i,r.alreadyDispatchedInitiationCallback=!1,r.duringProcessWaitingForResolve=!0,function(e){var n=!1,t=u[e.productType];if(t){for(var i=0;i<t.length;i++){var r=t[i].instancesOrderList;if(r)for(var a=g(r,e.demandSourceName),o=0;o<a&&r[o].demandSourceName!==e.demandSourceName;o++)r[o].duringProcessWaitingForResolve&&(n=!0)}return n}}(r)?r.pendingPreviousResolve=!0:(r.alreadyDispatchedInitiationCallback=!0,o(e,n)?r.initiationCallback():r.pendingInitiationCallback())):t()},createUninitializedDemandInstance:function(e,n,t){var i=u[e];if(i){for(var r,a=0;a<i.length;a++){var o=i[a],s=o&&o.instances;if(!s)break;var c=g(i[a].instancesUninitializedList,n);if(-1<c?r=i[a].instancesUninitializedList[c]:-1<s.indexOf(n)&&(r=new f({productType:e},{demandSourceName:n,demandGroupName:o.demandGroupName,demandType:d.demandSourceType.instance,isProgrammatic:t}),i[a].instancesUninitializedList.push(r)),r)break}return r||(r=new f({productType:e},{demandSourceName:n,isProgrammatic:t})),r}},initiateDemandInstance:function(e,n,t,i){var r=s(e,n);a(r),r.demandType===d.demandSourceType.instance?(r.initiationCallback=t,r.pendingInitiationCallback=i,o(e,n)?r.initiationCallback():r.pendingInitiationCallback()):t()},onStateResolve:function(e,n,t){var i=s(e,n);if(i.demandType===d.demandSourceType.instance){i.duringProcessWaitingForResolve&&(i.duringProcessWaitingForResolve=!1);var r=function(e,n){var t=s(e,n);if(e&&n&&u[e])for(var i=u[e],r=0;r<i.length;r++)if(i[r].demandGroupName&&i[r].demandGroupName===t.demandGroupName)for(var a=g(i[r].instancesOrderList,n)+1;a<i[r].instancesOrderList.length;a++)if(i[r].instancesOrderList[a].pendingPreviousResolve)return i[r].instancesOrderList[a];return null}(e,n);r&&(r.pendingPreviousResolve&&(r.pendingPreviousResolve=!1),!t&&o(e,n)||r.alreadyDispatchedInitiationCallback||(e===d.IS&&(r.alreadyDispatchedInitiationCallback=!0),r.pendingInitiationCallback()))}},exhaustedDemandSource:function(e,n){if((!n.demandType||n.demandType===d.demandSourceType.instance)&&e&&n.demandGroupName&&n.demandSourceName&&u[e])for(var t=u[e],i=0;i<t.length;i++)if(t[i].demandGroupName&&t[i].demandGroupName===n.demandGroupName){var r=t[i].instances,a=t[i].instancesOrderList,o=g(a,n.demandSourceName);return void(0<=o&&(r.push(r.shift(n.demandSourceName)),a.splice(o,1),s=t[i],c=e,s&&s.instancesOrderList&&0<s.instancesOrderList.length&&l.Utils.isFunction(s.instancesOrderList[0].initiationCallback)&&(s.instancesOrderList[0].alreadyDispatchedInitiationCallback||(c===d.IS&&(s.instancesOrderList[0].alreadyDispatchedInitiationCallback=!0),s.instancesOrderList[0].initiationCallback()))))}var s,c},getNextInstance:function(e,n){var t=s(e,n);if((!t.demandType||t.demandType===d.demandSourceType.instance)&&e&&t.demandGroupName&&t.demandSourceName&&u[e])for(var i=u[e],r=0;r<i.length;r++)if(i[r].demandGroupName&&i[r].demandGroupName===t.demandGroupName){var a=i[r].instancesOrderList,o=g(a,t.demandSourceName);if(0<=o&&o<a.length-1&&a[o+1])return a[o+1].demandSourceName}}}}},{"../DemandSource/DemandInstanceBuilder.js":64}],91:[function(e,n,t){n.exports=function(){return{deviceDataRequestObject:{deviceOs:1,SDKVersion:1,deviceOSVersion:1,deviceApiLevel:0}}}},{}],92:[function(i,e,n){function t(e,n){var t=i("../../components/Constants.js");return e.subscribe(t.CB+".nativeConfigSuccess",function(e){n.log("nativeConfig update successfully.",n.LogLevels.error)}),e.subscribe(t.CB+".nativeConfigFailed",function(e){n.log("nativeConfig failed to update.",n.LogLevels.error)}),{setNativeConfiguration:function(e){e&&n.callSDKFunction("setNativeConfiguration",e,"nativeConfigSuccess","nativeConfigFailed")}}}var r;e.exports=function(e,n){return r||(r=new t(e,n)),r}},{"../../components/Constants.js":7}],93:[function(e,n,t){n.exports=function(){return{native:{ios:{supportViewControllerFromAdapter:!0,allowOrientationFromAppDelegate:!0}}}}},{}],94:[function(s,e,n){function t(e,n){var t=s("../../components/Constants.js"),i=t.videoStates,r=t.BC,a=i.none,o=n.isLegacy(n.featureMap.MDS[t.RV]);return r=o?t.BC:t.RV,e.subscribe("SDKController.AdStarted",function(){n.log("VideoStateHandler | AdStarted",n.LogLevels.verbose),a=i.play,n.callSDKFunction("onVideoStatusChanged",{status:"started",productType:r})}),e.subscribe("SDKController.AdPlaying",function(){n.log("VideoStateHandler | AdPlaying",n.LogLevels.verbose),a=i.play,n.callSDKFunction("onVideoStatusChanged",{status:"playing",productType:r})}),e.subscribe("SDKController.AdPaused",function(){n.log("VideoStateHandler | AdPaused",n.LogLevels.verbose),a=i.stop,n.callSDKFunction("onVideoStatusChanged",{status:"paused",productType:r})}),e.subscribe("SDKController.AdVideoEnded",function(){n.log("VideoStateHandler | AdVideoEnded",n.LogLevels.verbose),a=i.stop,n.callSDKFunction("onVideoStatusChanged",{status:"ended",productType:r})}),{handleOnEngageEnd:function(){n.log("VideoStateHandler | handleOnEngageEnd onVideoStatusChanged stopped from engaged end",n.LogLevels.verbose),a=i.none,n.callSDKFunction("onVideoStatusChanged",{status:"stopped",productType:r})},getState:function(){return a}}}var i;e.exports=function(e,n){return i||(i=new t(e,n)),i}},{"../../components/Constants.js":7}],95:[function(e,n,t){var i=e("./iOSSDKInterface.js"),r=e("./iOSSDKInterface_WK.js"),a=e("./androidSDKInterface.js");n.exports=function(e,n,t){"use strict";return{Ios:new i(e,n,t),Ios_WK:new r(e,n,t),_Android:new a(e,t)}}},{"./androidSDKInterface.js":99,"./iOSSDKInterface.js":100,"./iOSSDKInterface_WK.js":101}],96:[function(p,e,n){function v(t){var i,r,a={},o={},n=!1,s=function(n){var e=null;a=i.Utils,(o=i.PubSub).init(),a.isDefined(n.mobileSDKSettings)&&(e=(r=i.SDKController).init(n)),t.when(e).then(function(){n.products&&t.each(n.products,function(e){a.isDefined(e.init)&&e.init(n[e])})},function(){console.log("Failed to initiate controller")})},e={init:function(e){return i=this,s(e),n=!0},log:function(e,n){r&&r.log&&r.log(e,n||r.LogLevels.error)}};return e}e.exports=function(e,n,t,i){var r=p("../components/Utils.js"),a=p("../components/PubSub.js"),o=p("../components/Msg.js"),s=p("./AdAssets.js"),c=p("./VastUtils.js"),l=n.Eventics,d=new v(e),u={};d.Utils=new r(d,n,t,i),d.PubSub=new a(d),d.Msg=new o,d.AdAssets=new s,d.VastUtils=new c(d.AdAssets);var f,g=["KuduEventicsProvider"];return f=n.productionDebug||n.SuperSonicGlobalConfig&&n.SuperSonicGlobalConfig.mobileSDKSettings&&"www.supersonicads.com"!==n.SuperSonicGlobalConfig.mobileSDKSettings.domain?(g.push("QAEventicsProvider"),1):Math.random(),n.SuperSonicGlobalConfig&&n.SuperSonicGlobalConfig.mobileSDKSettings&&n.SuperSonicGlobalConfig.mobileSDKSettings.protocol&&(u.isSecured="https:"===n.SuperSonicGlobalConfig.mobileSDKSettings.protocol),d.Eventics=l(f),d.Eventics.setProvidersHandlers(g),d.Eventics.setProvidersConfig(u),d}},{"../components/Msg.js":22,"../components/PubSub.js":34,"../components/Utils.js":38,"./AdAssets.js":52,"./VastUtils.js":97}],97:[function(e,n,t){n.exports=function(n){function t(e){if(e)return!e.controllerSpace||e.controllerSpace.viewCount}function i(e,n){return e&&(e.controllerSpace||(e.controllerSpace={}),e.controllerSpace.viewCount=n),e}function r(e){return!!e&&(0<n.extractVastSource(e).length||e.ext&&e.ext.videoData&&!0===e.ext.videoData.isVast)}return{getVastViewCount:t,setVastViewCount:i,setMaxVastCount:function(e){e&&r(e)&&"number"==typeof e.ext.vastExhaustIndex&&0<e.ext.vastExhaustIndex&&i(e,e.ext.vastExhaustIndex)},isVastCampaign:r,isThereVastCampaign:function(e){if(!e||!jQuery.isArray(e))return!1;for(var n=!1,t=0;t<e.length;t++)if(r(e[t])){n=!0;break}return n},areAllCampaignTypesAreVast:function(e){if(!e||!jQuery.isArray(e)||0===e.length)return!1;for(var n=!0,t=0;t<e.length;t++)if(!r(e[t])){n=!1;break}return n},incrementVastViewCount:function(e){return e&&r(e)?(e.controllerSpace||(e.controllerSpace={}),e.controllerSpace.viewCount=e.controllerSpace.viewCount?e.controllerSpace.viewCount+1:1,e.controllerSpace.viewCount):-1},isVastCanPlayAgain:function(e){return!!e&&r(e)&&e.ext.vastExhaustIndex&&t(e)<e.ext.vastExhaustIndex},getVastViewCountForEvent:function(e){return"number"==typeof e?e:-1}}}},{}],98:[function(r,e,n){(function(e){"use strict";var n=r("./SonicCore.js"),t=r("./SDKController/SDKController.js");var i=e.SonicCore=e.SSA_CORE=new n(e.jQuery,e,document,"undefined");i.SDKController=new t(i,"undefined"),"function"==typeof sonicAsyncInit&&sonicAsyncInit()})(window)},{"./SDKController/SDKController.js":87,"./SonicCore.js":96}],99:[function(e,n,t){function i(t,n){var i={postMessage:function(n,e){if("undefined"!=typeof Android&&Android[n])try{Android[n](JSON.stringify(e))}catch(e){t.SDKController.log("Error running function "+n+" error:"+JSON.stringify(e),t.SDKController.LogLevels.error)}else t.SDKController.log("Error calling SDK function "+n,t.SDKController.LogLevels.error)},log:function(e){console.log(e.message)}},e={postMessage:function(e){typeof e.eventName!==n&&typeof e.prefix!==n&&typeof e.parameters!==n&&("function"==typeof i[e.eventName]?i[e.eventName](e.parameters):i.postMessage(e.eventName,e.parameters))},acknowledgeMessage:function(){return!0}};return e}n.exports=i},{}],100:[function(e,n,t){function i(n){var i=function(e,n,t){var i,r=e+"://"+n+"?";jQuery.each(t,function(e,n){"object"==typeof n&&(t[e]=JSON.stringify(n))}),i=r+jQuery.param(t),a(i)},t=function(e){var n=document.createElement("IFRAME");n.setAttribute("src",e),document.documentElement.appendChild(n),n.parentNode.removeChild(n),n=null},a=function(e){0===o.length?(o.push("1"),t(e)):o.push(e)},r={postMessage:function(e,n,t){i(e,n,t)}},o=[],e={postMessage:function(e){typeof e.eventName!==n&&typeof e.prefix!==n&&typeof e.parameters!==n&&("function"==typeof r[e.eventName]?r[e.eventName](e.parameters):r.postMessage(e.prefix,e.eventName,e.parameters))},acknowledgeMessage:function(){if(0!==o.length){var e=o.shift();"1"===e&&0!==o.length&&(e=o.shift()),void 0!==e&&"1"!==e&&t(e)}}};return e}n.exports=i},{}],101:[function(e,n,t){function i(n){var i=function(e,n,t){var i,r=e+"://"+n+"?";jQuery.each(t,function(e,n){"object"==typeof n&&(t[e]=JSON.stringify(n))}),i=r+jQuery.param(t),a(i)},t=function(e){void 0!==window.webkit.messageHandlers&&void 0!==window.webkit.messageHandlers.supersonicMainMsgHandler&&window.webkit.messageHandlers.supersonicMainMsgHandler.postMessage(e)},a=function(e){0===o.length?(o.push("1"),t(e)):o.push(e)},r={postMessage:function(e,n,t){i(e,n,t)}},o=[],e={postMessage:function(e){typeof e.eventName!==n&&typeof e.prefix!==n&&typeof e.parameters!==n&&("function"==typeof r[e.eventName]?r[e.eventName](e.parameters):r.postMessage(e.prefix,e.eventName,e.parameters))},acknowledgeMessage:function(){if(0!==o.length){var e=o.shift();"1"===e&&0!==o.length&&(e=o.shift()),void 0!==e&&"1"!==e&&t(e)}}};return e}n.exports=i},{}],102:[function(e,n,t){n.exports=function(t,n,i,r){var e=!1,a=!1,o=!1,s=!0,c=r.CB+".enterBackground",l=r.CB+".enterForeground",d=r.CB+".deviceStatusChanged",u="prdTaskManager | ";return{init:function(){e||(t.PubSub.subscribe(r.taskManager+".Engaged",function(e){!t.Utils.isDefined(e.duringEngage)||e.productType!==i&&e.productType!==r.BC||(a=e.duringEngage,n.log(u+"duringEngage "+a))}),t.PubSub.subscribe(c,function(){n.log(u+c),o=!0}),t.PubSub.subscribe(l,function(){n.log(u+l),o=!1}),t.PubSub.subscribe(d,function(e){t.Utils.isDefined(e.connectionType)&&(s="none"!==e.connectionType&&"notReachable"!==e.connectionType)}),e=!0)},canEngage:function(){return!a&&s},isConnected:function(){return s},setConnection:function(e){s=e},canInitCallToApi:function(){var e=new jQuery.Deferred;return o?t.PubSub.subscribeOnce(l,function(){e.resolve()}):e.resolve(),e.promise()},getStatusMsg:function(){return"product TM - duringEngage:"+a+" appInBackground:"+o+" isConnected:"+s},getStatus:function(){return{duringEngage:a,appInBackground:o,isConnected:s}},publish:function(e,n){t.PubSub.publish(r.taskManager+"."+e,n)}}}},{}],103:[function(e,n,t){n.exports=function(r,t,e){var n=0;function i(){var e=decodeURIComponent(t.mobileSDKSettings.deviceModel);return-1!==r.iphoneXDeviceModels.indexOf(e)}function a(){var e=t.mobileSDKSettings.deviceWidthDP,n=t.mobileSDKSettings.deviceHeightDP;return i()&&function(e,n){var t=r.iphoneXDeviceResolution;for(var i in t)if(t.hasOwnProperty(i)&&t[i].width&&t[i].height&&(e===t[i].width&&n===t[i].height||e===t[i].height&&n===t[i].width))return!0;return!1}(e,n)}function o(){var e=document.getElementById("viewport"),n="viewport-fit=cover";-1===e.content.indexOf(n)&&(e.content+=","+n)}return{isIphoneX:i,adjustSizeForIphoneX:function(){a()&&window.addEventListener("resize",function(){(0===n||10<=n)&&(n=0,function e(){n<10&&setTimeout(function(){o(),n++,e()},100)}())})},clearCountViewport:function(){a()&&(n=0)},ifShouldSetIphoneXBG:function(e){return i()&&(n=e).settings&&n.settings.standaloneView;var n},addIphoneXAdjustClass:function(){a()&&!e("body").hasClass("iphoneXAdjustPadding")&&(e("body").addClass("iphoneXAdjustPadding"),o())}}}},{}],104:[function(e,n,t){n.exports=function(n){var t={android:/^\b[1][0-9]\b|\b[2][0]\b/,ios:/^[8|9]/},i=["6abeab6d","6863f09d","499b4845","4cbeec05","70fc4915"].concat(["6c982dc5","6c97f43d"]);return{shouldFail:function(e){return!(!e.controllerConfig||-1===i.indexOf(e.controllerConfig.applicationKey))&&null!==n.getDeviceApiLevel().match(t[e.mobileSDKSettings.deviceOs])}}}},{}],105:[function(e,n,t){n.exports={templates:{mainDefaultTemplate:'<div id="ssaLoaderWrap" class="hidden">                <div id="spin" class="container">                    <div class="spinner">                        <div class="bar1"></div>                        <div class="bar2"></div>                        <div class="bar3"></div>                        <div class="bar4"></div>                        <div class="bar5"></div>                        <div class="bar6"></div>                        <div class="bar7"></div>                        <div class="bar8"></div>                        <div class="bar9"></div>                        <div class="bar10"></div>                        <div class="bar11"></div>                        <div class="bar12"></div>                    </div>                </div>            </div>',defaultDialogBoxTemplate:'<div id="ssaDialogBoxOverlay"></div>            <div id="ssaDialogBox" class="dialogBox">            <div id="ssaDialogBoxTextContainer">            <div><p id="ssaDialogText">Are you sure you want to quit the offer?</p></div>            </div>        <footer id="ssaDialogBtns">            <a id="ssaDialogCancelBtn" class="dialogBtn"><span id="ssaDialogCancelBtnText">Cancel</span></a>            <a id="ssaDialogConfirmBtn"" class="dialogBtn"><span id="ssaDialogConfirmBtnText">OK</span></a>        </footer>        </div>',defaultNavigationTemplate:'            <div id="ssaNavigator" class="defaultNavigation">                <ul class="ssaList">                    <li><div data-edge="top|left" id="ssaNavigatorBackButton" class="ssaNavigationBtn ssaControllerButton ssaBackButton"><div class="innerWrapper"></div></div></li>                    <li><div data-edge="top|right" id="ssaNavigatorCloseButton" class="ssaNavigationBtn ssaControllerButton ssaCloseButton"><div class="innerWrapper"></div></div></li>                </ul>            </div>',loaderOWTemplate:'<div class="loaderOW hidden">        <div class="header">        </div>        <div class="progressbarWrap">            <div class="progressbar"></div>        </div>        <div class="offers">        <div class="shine"></div>        </div>    </div>',loaderOWOfferTemplate:'<div class="offer">        <div class="offerWrap">        <div class="offerImg"></div>        <div class="offerDetails">        <div>        <span class="offerText">Loading Info...</span>        </div>        <div class="offerEarn">        <div class="badge"></div>        <div class="callToAction">Loading...</div>        </div>        </div>        <div class="offerBtn"></div>        </div>        </div>'},style:{forceCloseProperties:{androidNeutral:{width:25,height:25,position:"top-right"},androidInterstitial:{width:0,height:0,position:"top-right"},androidNavigation:{width:25,height:25,position:"top-right"},iosNeutral:{width:24,height:24,position:"top-right"},iosNavigation:{width:50,height:50,position:"top-right"},disable:{width:0,height:0,position:"top-right"}},backgroundsByType:{BrandConnect:"#1A1A1A",RewardedVideo:"#1A1A1A",Interstitial:"transparent",OfferWall:"#1A1A1A",WebControls:"transparent",general:"#1A1A1A"},webViewBGColor:{BrandConnect:"#000000",RewardedVideo:"#000000",Interstitial:"transparent",OfferWall:"#000000",WebControls:"transparent",general:"#000000"},iconBGConfig:{},backgroundsByDevice:{iphoneX:"rgba(0,0,0,0.7)",general:"#000000"},defaultControlFrames:[{width:28,height:28,position:"top-right"},{width:30,height:30,position:"top-left"}]},settings:{}}},{}]},{},[98]);